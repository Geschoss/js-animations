var Ce=Object.defineProperty;var Le=(r,e,t)=>e in r?Ce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var s=(r,e,t)=>(Le(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();class We{constructor(e){s(this,"root");s(this,"chapters");s(this,"examples");this.examples=this.renderExamplesMenu(),this.chapters=this.renderChaptersMenu(),this.root=this.renderRoot(),e.appendChild(this.root)}renderChaptersMenu(){let e=document.createElement("div");return e.classList.add("menu__list"),e.classList.add("menu__list_chapter"),e}renderExamplesMenu(){let e=document.createElement("div");return e.classList.add("menu__list"),e}renderRoot(){let e=document.createElement("div");return e.classList.add("menu__root"),e.appendChild(this.chapters),e.appendChild(this.examples),e}}class Ae{constructor(e,t){s(this,"menu");s(this,"routing");this.menu=new We(e.body),this.routing=t}renderChaptersMenu(e,t){let i;Object.keys(e).forEach(o=>{let n=e[o],a=document.createElement("div");a.classList.add("menu__item"),a.innerText=n.name,t===n&&(i=a,i.classList.add("menu__item_selected")),a.addEventListener("click",()=>{i!==a&&(i&&i.classList.remove("menu__item_selected"),i=a,i.classList.add("menu__item_selected"),this.routing.setChapter(o))}),this.menu.chapters.appendChild(a)})}renderModuleMenu(e,t){if(this.removeChildren(this.menu.examples),!e)return;let i;e.modules.forEach(o=>{let n=document.createElement("div");n.classList.add("menu__item"),n.innerText=o.id,(t==null?void 0:t.id)===o.id&&(i=n,i.classList.add("menu__item_selected")),n.addEventListener("click",()=>{i!==n&&(i&&i.classList.remove("menu__item_selected"),i=n,i.classList.add("menu__item_selected"),this.routing.setModule(o.id))}),this.menu.examples.appendChild(n)})}removeChildren(e){for(;e.lastChild;)e.removeChild(e.lastChild)}}class Re{constructor(e){s(this,"module");s(this,"chapter");s(this,"onChange");const{module:t,chapter:i}=this.getSearchParam();this.module=t,this.chapter=i,this.onChange=e,window.addEventListener("popstate",()=>this.onUrlChanged(),!1)}setModule(e){this.setSearchParam("module",e),this.onUrlChanged()}setChapter(e){this.setSearchParam("chapter",e),this.onUrlChanged()}onUrlChanged(){const{module:e,chapter:t}=this.getSearchParam();this.module=e,this.chapter=t,this.onChange()}getSearchParam(){let e=new URLSearchParams(window.location.search);return{module:e.get("module")||"",chapter:e.get("chapter")||""}}setSearchParam(e,t){let i=new URL(window.location.href);i.searchParams.set(e,t),window.history.pushState("Animations",e,i)}}class $e{constructor(e){s(this,"chaptersMap");s(this,"currentChapter");s(this,"currentModule");s(this,"dom");s(this,"routing");this.chaptersMap=e.reduce((t,i)=>{if(Object.hasOwn(t,i.name))throw new Error(`Chapter ${i.name} alredy has in list!`);return{...t,[i.name]:i}},{}),this.routing=new Re(()=>{var t;((t=this.currentChapter)==null?void 0:t.name)!==this.routing.chapter&&(this.currentChapter=this.chapterByName()),this.moduleChanged()}),this.dom=new Ae(document,this.routing),this.currentChapter=this.chapterByName(),this.moduleChanged(),this.dom.renderChaptersMenu(this.chaptersMap,this.currentChapter)}moduleChanged(){if(this.currentModule&&(this.currentModule.module.destroy(),this.currentModule=void 0),!this.currentChapter)return;let e=this.moduleByName();e&&(this.currentModule={id:e.id,module:new e}),this.dom.renderModuleMenu(this.currentChapter,this.currentModule)}chapterByName(){return this.chaptersMap[this.routing.chapter]}moduleByName(){if(!!this.currentChapter)return this.currentChapter.modules.find(({id:e})=>e===this.routing.module)}}class ie{constructor(e,t){s(this,"name");s(this,"modules");this.name=e,this.modules=t}}class ze{constructor(e=0,t=0){s(this,"dx");s(this,"dy");this.dx=e,this.dy=t}think(e){e.x+=this.dx,e.y+=this.dy}}class Be{constructor(e=.3,t=.3){s(this,"vy");s(this,"vx");this.vx=e,this.vy=t}think(e){e.x+=this.vx,e.y+=this.vy}}class Y{think(){}}class U{render(e,{x:t,y:i,radius:o,color:n}){e.save(),e.beginPath(),e.arc(t,i,o,0,2*Math.PI),e.fillStyle=n,e.fill(),e.closePath(),e.restore()}}class Ne{render(e,{x:t,y:i,width:o,height:n,color:a}){e.save(),e.strokeStyle=a,e.beginPath(),e.rect(t,i,o,n),e.closePath(),e.stroke(),e.restore()}}let se=class{constructor(e=0,t=0,i=10,o="#ff6600",n=new Y,a=new U){s(this,"x");s(this,"y");s(this,"color");s(this,"radius");s(this,"behavior");s(this,"view");this.x=e,this.y=t,this.color=o,this.radius=i,this.view=a,this.behavior=n}static create({x:e=0,y:t=0,radius:i=10,color:o="#ff6600",view:n=new U,behavior:a=new Y}){return new se(e,t,i,o,a,n)}think(){this.behavior.think(this)}render(e){this.view.render(e,this)}};class f{constructor(e,t){s(this,"x");s(this,"y");this.x=e,this.y=t}static create(e=0,t=0){return new f(e,t)}static from({x:e,y:t}){return new f(e,t)}add(e){return new f(this.x+e.x,this.y+e.y)}left(){this.x-=1}right(){this.x+=1}up(){this.y-=1}down(){this.y+=1}}class B{constructor(e,t,i,o){s(this,"x1");s(this,"x2");s(this,"y1");s(this,"y2");this.x1=e,this.y1=t,this.x2=i,this.y2=o}static create(e,t,i,o){return new B(e,t,e+i-1,t+o-1)}intersect(e){return this.x1<=e.x2&&this.x2>=e.x1&&this.y1<=e.y2&&this.y2>=e.y1}intersect_with_padding(e,t){return this.x1-t<=e.x2&&this.x2+t>=e.x1&&this.y1-t<=e.y2&&this.y2+t>=e.y1}for_each(e){for(let t=this.x1;t<=this.x2;t++)for(let i=this.y1;i<=this.y2;i++)e(f.from({x:t,y:i}))}center(){return new f((this.x1+this.x2)/2,(this.y1+this.y2)/2)}center_trunc(){return new f(Math.trunc((this.x1+this.x2)/2),Math.trunc((this.y1+this.y2)/2))}center_floor(){return new f(Math.floor((this.x1+this.x2)/2),Math.floor((this.y1+this.y2)/2))}cut_by_window(e,t){this.x1=this.x1<1?1:this.x1,this.x2=this.x2>e?e:this.x2,this.y1=this.y1<1?1:this.y1,this.y2=this.y2>t?t:this.y2}}class S{constructor(e=100,t=100,i=200,o=200,n="#ff0000",a=new Y,h=new Ne){s(this,"width");s(this,"height");s(this,"y");s(this,"x");s(this,"right");s(this,"bottom");s(this,"color");s(this,"behavior");s(this,"view");this.x=e,this.y=t,this.color=n,this.width=i,this.height=o,this.right=e+i,this.bottom=t+o,this.view=h,this.behavior=a}static create({x:e,y:t,width:i,height:o,color:n,view:a,behavior:h}){return new S(e,t,i,o,n,h,a)}think(){this.behavior.think(this)}render(e){this.view.render(e,this)}}class Xe{constructor(e){s(this,"raw");s(this,"status","new");this.raw=new Image,this.raw.src=e,this.raw.onload=()=>{this.status="ready"},this.raw.onerror=t=>{this.status="error",console.error(t)}}isReady(){return this.status==="ready"}data(){return this.raw}}const L={coin(r,e){return Math.random()>.5?r:e},range(r,e){return Math.trunc(r+Math.random()*(e-r))}};function D(r){return r==null||r==null}function R(r,e){let t=[];for(let i=0;i<r;i++)t.push(e(i,r));return t}function N(r,e){return Math.random()>.5?r:e}var C=(r=>(r[r.Wall=0]="Wall",r[r.Floor=1]="Floor",r))(C||{});class H{constructor(e,t,i,o){s(this,"tiles");s(this,"sectors");s(this,"width",0);s(this,"height",0);this.tiles=e,this.width=i,this.sectors=t,this.height=o}static create(e,t,i){let o=R(t*i,()=>1);return new H(e,o,t,i)}render(e,t,i){for(let o=0;o<this.width;o++)for(let n=0;n<this.height;n++){let a=this.idx(o,n),h=this.sectors[a],l=t.centre.x+(o-t.position.x)*i.tile_dimensions.x,y=t.centre.y+(n-t.position.y)*i.tile_dimensions.y;switch(h){case 1:this.tiles.renderFloor(e,f.from({x:l,y}));break}}}can_enter_tile(e){return this.in_bounds(e)&&this.sectors[this.idx(e.x,e.y)]===1}in_bounds(e){return e.x>=0&&e.x<this.width-1&&e.y>=0&&e.y<this.height-1}try_idx(e){if(this.in_bounds(e))return this.idx(e.x,e.y)}idx(e,t){return t*this.width+e}}const Ye=60,G=25,j=5,He=200;class O{constructor(e,t,i){s(this,"map");s(this,"tiles");s(this,"rooms");s(this,"player_start");this.map=e,this.rooms=t,this.player_start=i}static create(e,t,i){let o=new O(H.create(e,t,i),[],f.create());return o.fill(C.Wall),o.build_random_rooms(t,i),o.build_corridors(),o.player_start=o.rooms[0].center_trunc(),o}fill(e){this.map.sectors=this.map.sectors.map(()=>e)}mock_rooms(e,t){this.rooms=Oe().map(({x1:i,x2:o,y1:n,y2:a})=>new B(i,n,o,a)),this.rooms.forEach(i=>{i.for_each(({x:o,y:n})=>{if(o>0&&o<e-1&&n>0&&n<t-1){let a=this.map.idx(o,n);this.map.sectors[a]=C.Floor}})})}build_random_rooms(e,t){let i=0;for(;this.rooms.length<Ye;){let o=B.create(L.range(-2,e-2),L.range(-2,t-2),L.range(j,G),L.range(j,G));if(o.cut_by_window(e-2,t-2),i+=1,this.rooms.some(a=>a.intersect_with_padding(o,1))||(i=0,o.for_each(({x:a,y:h})=>{let l=this.map.idx(a,h);this.map.sectors[l]=C.Floor}),this.rooms.push(o)),He<i)break}}apply_horizontal_tunnel(e,t,i){for(let o=Math.min(e,t);o<=Math.max(e,t);o++){let n=this.map.try_idx(f.create(o,i));n&&(this.map.sectors[n]=C.Floor)}}apply_vertical_tunnel(e,t,i){for(let o=Math.min(e,t);o<=Math.max(e,t);o++){let n=this.map.try_idx(f.create(i,o));n&&(this.map.sectors[n]=C.Floor)}}build_corridors(){let e=this.rooms.sort((o,n)=>o.center_trunc().x-n.center_trunc().x),[t,...i]=e;i.forEach(o=>{let n=o.center_trunc(),a=t.center_trunc();L.coin(!0,!1)?(this.apply_horizontal_tunnel(a.x,n.x,a.y),this.apply_vertical_tunnel(a.y,n.y,n.x)):(this.apply_vertical_tunnel(a.y,n.y,a.x),this.apply_horizontal_tunnel(a.x,n.x,n.y)),t=o})}}function Oe(){return[{x1:1,x2:6,y1:9,y2:14},{x1:10,x2:15,y1:3,y2:8},{x1:13,x2:19,y1:17,y2:23}]}class F{constructor(e,t,i,o){s(this,"tiles");s(this,"centre");s(this,"position");s(this,"prevMove");this.tiles=e,this.centre=o,this.position=f.create(t,i),this.prevMove=0}static create(e,t=0,i=0,o){return new F(e,t,i,o)}render(e){this.tiles.isReady()&&this.tiles.renderPlayer(e,this.centre)}update(e,t){let i=new Date().getTime();if(i-this.prevMove>50){this.prevMove=i;let o=this.move(t),n=this.position.add(o);e.can_enter_tile(n)&&(this.position=n)}}move(e){let t=f.from({x:0,y:0});return e.pressed("ArrowLeft")&&t.left(),e.pressed("ArrowRight")&&t.right(),e.pressed("ArrowUp")&&t.up(),e.pressed("ArrowDown")&&t.down(),t}}class q{constructor(e,t,i){s(this,"env");s(this,"size");s(this,"image");this.env=e,this.size=i,this.image=new Xe(t)}static create(e,t,i){return new q(e,t,i)}isReady(){return this.image.isReady()}renderFloor(e,t){e.drawImage(this.image.data(),this.size*2,0,this.size,this.size,t.x,t.y,this.env.tile_dimensions.x,this.env.tile_dimensions.y)}renderWall(e,t){e.drawImage(this.image.data(),this.size*2,this.size*2,this.size,this.size,t.x,t.y,this.env.tile_dimensions.x,this.env.tile_dimensions.y)}renderPlayer(e,t){e.save(),e.fillStyle="#00ff00",e.beginPath(),e.rect(t.x,t.y,this.env.tile_dimensions.x,this.env.tile_dimensions.y),e.closePath(),e.fill(),e.restore()}}class Fe{constructor(){s(this,"destroyed",!1);s(this,"cb");s(this,"animationCbId")}tick(e){this.cb=e;const t=i=>{(this.cb||!this.destroyed)&&(this.cb(i),this.animationCbId=requestAnimationFrame(t))};t(0)}destroy(){this.destroyed=!0,this.animationCbId&&cancelAnimationFrame(this.animationCbId)}}class qe{constructor(e){s(this,"x",0);s(this,"y",0);s(this,"pressed",!1);s(this,"rect");s(this,"canvas");s(this,"mousedown",e=>{this.pressed=!0});s(this,"mouseup",e=>{this.pressed=!1});s(this,"move",e=>{let t=0,i=0;e.pageX||e.pageY?(t=e.pageX,i=e.pageY):(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t-=this.canvas.offsetLeft,i-=this.canvas.offsetTop,this.x=t,this.y=i});this.canvas=e,e.addEventListener("mousemove",this.move,!1),e.addEventListener("mousedown",this.mousedown,!1),e.addEventListener("mouseup",this.mouseup,!1)}destroy(){this.canvas.removeEventListener("mousemove",this.move,!1),this.canvas.removeEventListener("mousedown",this.mousedown,!1),this.canvas.removeEventListener("mouseup",this.mouseup,!1)}copyPos(){return{x:this.x,y:this.y}}}class Ue{constructor(e=document.body){s(this,"cb");s(this,"resizeFn");this.cb=()=>{},this.resizeFn=()=>{const{offsetWidth:t,offsetHeight:i}=e;this.cb(t,i)},window.addEventListener("resize",this.resizeFn)}changed(e){this.cb=e}destroy(){this.cb=void 0,window.removeEventListener("resize",this.resizeFn),this.resizeFn=void 0}}function K(){return Math.random().toString(16).slice(2)}class Ge{constructor(){s(this,"keys_pressed",[]);s(this,"up_subscribers",[]);s(this,"down_subscribers",[]);s(this,"keydown",e=>{let t=e.code;this.keys_pressed.push(t),this.down_subscribers.forEach(({keys:i,cb:o})=>{(i.length===0||i.includes(t))&&o(t)})});s(this,"keyup",e=>{this.keys_pressed=this.keys_pressed.filter(i=>i!==e.code);let t=e.code;this.up_subscribers.forEach(({keys:i,cb:o})=>{(i.length===0||i.includes(t))&&o(t)})});window.addEventListener("keydown",this.keydown,!1),window.addEventListener("keyup",this.keyup,!1)}destroy(){window.removeEventListener("keydown",this.keydown,!1),window.removeEventListener("keyup",this.keyup,!1)}pressed(e){return D(e)?this.keys_pressed.length!=0:this.keys_pressed.includes(e)}down(e){let t=K();return this.down_subscribers.push({...e,hash:t}),t}up(e){let t=K();return this.up_subscribers.push({...e,hash:t}),t}}class oe{constructor(e,t){s(this,"width");s(this,"height");s(this,"ctx");s(this,"canvas");this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,document.body.appendChild(this.canvas)}destroy(){this.ctx=null,this.canvas.remove()}clean(){this.ctx.clearRect(0,0,this.width,this.height)}resize(e,t){this.width=e,this.height=t,this.canvas.width=this.width,this.canvas.height=this.height}}class d{constructor(e={}){s(this,"loop");s(this,"resize");s(this,"keyboard");s(this,"context2d");s(this,"controller");s(this,"env");const{controller:t=qe}=e,i=document.body;this.env={width:i.offsetWidth,height:i.offsetHeight},this.loop=new Fe,this.resize=new Ue(i),this.context2d=new oe(i.offsetWidth,i.offsetHeight),this.keyboard=new Ge,this.controller=new t(this.context2d.canvas),this.resize.changed((o,n)=>{this.context2d.resize(o,n)})}tick(e){this.loop.tick(t=>{this.context2d.clean(),e(this.context2d.ctx,this.controller,this.keyboard,t)})}destroy(){this.loop.destroy(),this.resize.destroy(),this.keyboard.destroy(),this.context2d.destroy(),this.controller.destroy(),this.loop=void 0,this.resize=void 0,this.keyboard=void 0,this.context2d=void 0,this.controller=void 0}}const je="/js-animations/assets/floor_tiles-899c51d6.png",J=24,v={map:null,camera:null,player:null,tiles:null};class re{constructor(){s(this,"game2D");this.game2D=new d;const{env:e}=this.game2D,t={x:J,y:J};v.tiles=q.create({tile_dimensions:t},je,32);let i=O.create(v.tiles,100,100);v.map=i.map,v.player=F.create(v.tiles,i.player_start.x,i.player_start.y,f.create(e.width/2,e.height/2)),this.game2D.tick((o,n,a)=>{v.tiles.isReady()&&(v.player.update(v.map,a),v.map.render(o,v.player,{...e,tile_dimensions:t}),v.player.render(o))})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(re,"id","dungeonCrawl");class ne{constructor(){s(this,"rect");s(this,"velocity");s(this,"keyboard");this.rect=S.create({x:150,y:350,width:50,height:50,color:"#00ff00"}),this.velocity=0}render(e){this.rect.render(e)}think(){this.rect.y+=this.velocity,this.velocity<6&&(this.velocity+=.2)}collision(e,t){return this.rect.color="#00ff00",t.y>this.rect.y||t.bottom<this.rect.y+this.rect.width?!0:e.some(i=>i.collision(this.rect))}}const u=class{constructor(e,t,i,o=0){s(this,"top");s(this,"bottom");s(this,"x");s(this,"y");s(this,"behavior");this.x=e,this.y=t,this.behavior=new ze(u.SPEED-o/10);let n=u.GAP-o;this.top=S.create({x:e,y:t,width:u.WIDTH,height:u.MIN_HEIGHT+Math.random()*(i-(n+u.MIN_HEIGHT))}),this.bottom=S.create({x:this.top.x,y:this.top.bottom+n,width:u.WIDTH,height:i-this.top.height-n})}think(){this.behavior.think(this),this.top.x=this.x,this.bottom.x=this.x}render(e){this.top.render(e),this.bottom.render(e)}collision(e){let t={x:e.x,y:e.y},i={x:e.x+e.width,y:e.y},o={x:e.x,y:e.y+e.height},n={x:e.x+e.width,y:e.y+e.height},a={x:this.top.x,y:this.top.y+this.top.height},h={x:this.top.x+u.WIDTH,y:this.top.y+this.top.height},l={x:this.bottom.x,y:this.bottom.y},y={x:this.bottom.x+u.WIDTH,y:this.bottom.y};return i.x<this.x||this.x+u.WIDTH<e.x?!1:!!(E(a.x,i.x,h.x)&&E(this.y,i.y,a.y)||E(a.x,t.x,h.x)&&E(this.y,t.y,a.y)||E(l.x,n.x,y.x)&&l.y<n.y||E(l.x,o.x,y.x)&&l.y<o.y)}static create(e){let t=[],i=e.width,o=e.y,n=e.height,a=e.width/(u.WIDTH+u.DISTANCE_BEETWEN)+1;for(let h=0;h<a;h++)t.push(new u(i,o,n)),i+=u.WIDTH+u.DISTANCE_BEETWEN;return t}static move(e,t,i){let o=e[0],n=e[e.length-1],a=t.x-u.WIDTH;if(o.x<a){e.shift();let h=t.y,l=t.height;return e.push(new u(n.x+u.WIDTH+u.DISTANCE_BEETWEN,h,l,i)),!0}return!1}};let w=u;s(w,"GAP",290),s(w,"WIDTH",50),s(w,"MIN_HEIGHT",10),s(w,"DISTANCE_BEETWEN",290),s(w,"SPEED",-4);function E(r,e,t){return r<e&&e<t}class ae{constructor(){s(this,"state");s(this,"game2D");this.game2D=new d;const e=this.game2D.env;this.state={type:"init",bird:null,screen:Ze(e),pipes:[],score:0},this.game2D.tick((t,i,o)=>{switch(this.state.screen.render(t),this.state.type){case"init":Ke(this.state,e,t,o);break;case"play":Je(this.state,e,t,o);break;case"dead":Ve(this.state,e,t,o);break}})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(ae,"id","flappyBird");function Ke(r,e,t,i){t.font="30px Arial",t.fillStyle="#0000ff",t.fillText("Press ENTER to start",e.width/2-150,e.height/2),i.pressed("Enter")&&(r.type="play",r.bird=new ne,r.pipes=w.create(r.screen),r.score=0)}function Je(r,e,t,i){if(he(r,e,t),i.pressed("Space")&&(r.bird.velocity=-6),r.bird.think(),r.bird.collision(r.pipes,r.screen)){r.type="dead";return}r.bird.render(t),r.pipes.forEach(o=>{o.think(),o.render(t)}),w.move(r.pipes,r.screen,r.score)&&(r.score+=1)}function Ve(r,e,t,i){he(r,e,t),t.font="30px Arial",t.fillStyle="#0000ff",t.fillText("You are dead",e.width/2-100,e.height/2-30),t.fillText("Press ENTER to start",e.width/2-150,e.height/2),i.pressed("Enter")&&(r.type="play",r.bird=new ne,r.pipes=w.create(r.screen),r.score=0)}function Ze(r){let e=r.width*5/100,t=r.height*10/100;return new S(e,t,r.width-2*e,r.height-2*t,"#0000ff")}function he(r,e,t){t.font="35px Arial",t.fillStyle="#0000ff",t.fillText(`Score: ${r.score}`,e.width/2-70,150)}class Qe{constructor(){s(this,"vr",0);s(this,"vx",0);s(this,"vy",0);s(this,"trust",0);s(this,"gravity",.01);s(this,"rotation",0)}left(){this.vr=-3}rigth(){this.vr=3}up(){this.trust=.05}forward(){this.vr=0}stop(){this.trust=0}calculate(){this.rotation+=this.vr*Math.PI/180;let e=Math.cos(this.rotation)*this.trust,t=Math.sin(this.rotation)*this.trust;return this.vx+=e,this.vy+=t,this.vx+=this.vx>0?-this.gravity:this.gravity,this.vy+=this.vy>0?-this.gravity:this.gravity,{vx:this.vx,vy:this.vy,rotation:this.rotation}}}class xe{constructor(e,t,i=0,o=0,n,a){s(this,"x");s(this,"y");s(this,"width");s(this,"height");s(this,"rotation");s(this,"moving");s(this,"keyboard");s(this,"acceleration");s(this,"weapon");s(this,"view");this.x=i,this.y=o,this.width=25,this.height=20,this.rotation=0,this.keyboard=e,this.moving=!1,this.acceleration=t,this.weapon=n,this.view=new a(n),this.keyboard.up({keys:["ArrowUp","ArrowLeft","ArrowRight"],cb:h=>{if(h==="ArrowUp"){this.moving=!1,this.acceleration.stop();return}this.acceleration.forward()}})}changeChip(e){this.view=new e(this.weapon)}cnahgeWeapon(e){this.view.changeWeapon(e)}shot(e){const t=this.view.shot(this);t&&e.bullets.push(...t)}think(e){this.keyboard.pressed("Space")&&this.shot(e),this.keyboard.pressed("ArrowLeft")&&this.acceleration.left(),this.keyboard.pressed("ArrowRight")&&this.acceleration.rigth(),this.keyboard.pressed("ArrowUp")&&(this.acceleration.up(),this.moving=!0);let{vx:t,vy:i,rotation:o}=this.acceleration.calculate();this.rotation=o,this.x+=t,this.y+=i}render(e){this.view.render(e,this)}}class et{constructor(e){s(this,"name","classic");s(this,"weapon_name");s(this,"weapon");const t=new e;this.weapon_name=t.name,this.weapon=new e}changeWeapon(e){const t=new e;this.weapon_name=t.name,this.weapon=new e}shot(e){const t=this.weapon.shot({x:e.x,y:e.y,rotation:e.rotation});if(t)return[t]}render(e,t){if(e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(10,0),e.lineTo(-10,10),e.lineTo(-5,0),e.lineTo(-10,-10),e.lineTo(10,0),e.stroke(),t.moving){let i=Math.random()>.5?17:15;e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-7.5,-5),e.lineTo(-i,0),e.lineTo(-7.5,5),e.stroke()}e.restore()}}class tt{constructor(e){s(this,"name","эх-100");s(this,"weapon_name");s(this,"weapons");const t=new e;this.weapon_name=t.name,this.weapons=[t,new e]}changeWeapon(e){const t=new e;this.weapon_name=t.name,this.weapons=[t,new e]}shot(e){const o=this.weapons[0].shot({x:e.x+15*Math.cos(e.rotation+Math.PI*1.88),y:e.y+15*Math.sin(e.rotation+Math.PI*1.88),rotation:e.rotation}),n=.12,a=this.weapons[1].shot({x:e.x+15*Math.cos(e.rotation+Math.PI*n),y:e.y+15*Math.sin(e.rotation+Math.PI*n),rotation:e.rotation});let h=[];return o&&h.push(o),a&&h.push(a),h.length>0?h:void 0}render(e,t){e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(15,10),e.lineTo(10,10),e.lineTo(10,5),e.lineTo(-10,5),e.lineTo(-10,10),e.lineTo(-15,10),e.lineTo(-15,-10),e.lineTo(-10,-10),e.lineTo(-10,-5),e.lineTo(-10,-5),e.lineTo(10,-5),e.lineTo(10,-10),e.lineTo(15,-10),e.stroke(),e.beginPath(),e.moveTo(15,10),e.quadraticCurveTo(30,0,15,-10),e.stroke(),t.moving&&(e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-15,-10),e.lineTo(-V(25,22),-5),e.lineTo(-15,0),e.stroke(),e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-15,10),e.lineTo(-V(25,22),5),e.lineTo(-15,0),e.stroke()),e.restore()}}function V(r,e){return Math.random()>.5?r:e}class it{constructor(e){s(this,"name","еф-100");s(this,"weapon_name");s(this,"weapons");const t=new e;this.weapon_name=t.name,this.weapons=[t,new e]}changeWeapon(e){const t=new e;this.weapon_name=t.name,this.weapons=[t,new e]}shot(e){const o=this.weapons[0].shot({x:e.x+17*Math.cos(e.rotation+Math.PI*1.88),y:e.y+17*Math.sin(e.rotation+Math.PI*1.88),rotation:e.rotation}),n=.12,a=this.weapons[1].shot({x:e.x+17*Math.cos(e.rotation+Math.PI*n),y:e.y+17*Math.sin(e.rotation+Math.PI*n),rotation:e.rotation});let h=[];return o&&h.push(o),a&&h.push(a),h.length>0?h:void 0}render(e,t){e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.strokeStyle="#ff0000",e.beginPath(),e.arc(0,0,15,0,2*Math.PI),e.stroke(),e.closePath(),e.beginPath(),e.arc(0,0,5,0,2*Math.PI),e.stroke(),e.closePath(),e.beginPath(),e.moveTo(3,15),e.quadraticCurveTo(5,22,10,21),e.stroke(),e.beginPath(),e.moveTo(8,13),e.quadraticCurveTo(10,18,15,17),e.stroke(),e.beginPath(),e.moveTo(15,17),e.lineTo(20,17),e.stroke(),e.beginPath(),e.moveTo(10,21),e.lineTo(20,21),e.stroke(),e.beginPath(),e.moveTo(20,21),e.lineTo(20,17),e.stroke(),e.beginPath(),e.moveTo(20,21),e.lineTo(24,19),e.stroke(),e.beginPath(),e.moveTo(20,17),e.lineTo(24,18),e.stroke(),e.beginPath(),e.moveTo(13,7),e.lineTo(30,3),e.stroke(),e.beginPath(),e.moveTo(15,2),e.lineTo(30,2),e.stroke(),e.beginPath(),e.moveTo(13,-7),e.lineTo(30,-3),e.stroke(),e.beginPath(),e.moveTo(15,-2),e.lineTo(30,-2),e.stroke(),e.beginPath(),e.moveTo(15,0),e.lineTo(5,0),e.stroke(),e.beginPath(),e.moveTo(0,15),e.lineTo(0,5),e.stroke(),e.beginPath(),e.moveTo(0,-15),e.lineTo(0,-5),e.stroke(),e.beginPath(),e.moveTo(-15,0),e.lineTo(-5,0),e.stroke(),e.beginPath(),e.moveTo(4,4),e.lineTo(11,11),e.stroke(),e.beginPath(),e.moveTo(4,-4),e.lineTo(11,-11),e.stroke(),e.beginPath(),e.moveTo(-4,-4),e.lineTo(-11,-11),e.stroke(),e.beginPath(),e.moveTo(-4,4),e.lineTo(-11,11),e.stroke(),t.moving&&(e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-10,-12),e.lineTo(-$(21,19),-11),e.lineTo(-14,-7),e.stroke(),e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-12,-7),e.lineTo(-$(22,20),-4),e.lineTo(-14,0),e.stroke(),e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-12,7),e.lineTo(-$(22,20),4),e.lineTo(-14,0),e.stroke(),e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-14,7),e.lineTo(-$(21,19),11),e.lineTo(-10,12),e.stroke()),e.restore()}}function $(r,e){return Math.random()>.5?r:e}class st{constructor(e){s(this,"name","т-50");s(this,"weapon_name");s(this,"weapons");const t=new e;this.weapon_name=t.name,this.weapons=[t,new e]}changeWeapon(e){const t=new e;this.weapon_name=t.name,this.weapons=[t,new e]}shot(e){const i=[],n=this.weapons[0].shot({x:e.x+10*Math.cos(e.rotation+Math.PI*1.5),y:e.y+10*Math.sin(e.rotation+Math.PI*1.5),rotation:e.rotation});n&&i.push(n);const a=.5,h=this.weapons[1].shot({x:e.x+10*Math.cos(e.rotation+Math.PI*a),y:e.y+10*Math.sin(e.rotation+Math.PI*a),rotation:e.rotation});return h&&i.push(h),i.length>0?i:void 0}render(e,t){e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(20,0),e.lineTo(15,-5),e.lineTo(-15,-5),e.lineTo(-20,-10),e.lineTo(-20,10),e.lineTo(-15,5),e.lineTo(15,5),e.lineTo(20,0),e.stroke(),e.beginPath(),e.moveTo(0,-5),e.lineTo(0,-10),e.lineTo(5,-10),e.lineTo(5,-5),e.stroke(),e.beginPath(),e.moveTo(0,5),e.lineTo(0,10),e.lineTo(5,10),e.lineTo(5,5),e.stroke(),t.moving&&(e.strokeStyle="#ff9200",e.beginPath(),e.moveTo(-20,-10),e.lineTo(-N(30,27),-6),e.lineTo(-20,-2),e.stroke(),e.beginPath(),e.moveTo(-20,10),e.lineTo(-N(30,27),6),e.lineTo(-20,2),e.stroke()),e.restore()}}class ot{constructor(e){s(this,"name","еф-50");s(this,"weapon_name");s(this,"weapons");const t=new e;this.weapon_name=t.name,this.weapons=[t,new e,new e]}changeWeapon(e){const t=new e;this.weapon_name=t.name,this.weapons=[t,new e,new e]}shot(e){const i=[],n=this.weapons[0].shot({x:e.x+15*Math.cos(e.rotation+Math.PI*1.84),y:e.y+15*Math.sin(e.rotation+Math.PI*1.84),rotation:e.rotation-.03});n&&i.push(n);const a=.16,h=this.weapons[1].shot({x:e.x+15*Math.cos(e.rotation+Math.PI*a),y:e.y+15*Math.sin(e.rotation+Math.PI*a),rotation:e.rotation+.03});h&&i.push(h);const l=0,y=this.weapons[2].shot({x:e.x+15*Math.cos(e.rotation+Math.PI*l),y:e.y+15*Math.sin(e.rotation+Math.PI*l),rotation:e.rotation});return y&&i.push(y),i.length>0?i:void 0}render(e,t){e.save(),e.translate(t.x,t.y),e.rotate(t.rotation),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(20,0),e.lineTo(15,-10),e.lineTo(-15,-15),e.lineTo(-10,0),e.lineTo(-15,15),e.lineTo(15,10),e.lineTo(20,0),e.stroke(),e.beginPath(),e.moveTo(15,-10),e.quadraticCurveTo(8,0,15,10),e.stroke(),e.beginPath(),e.moveTo(-12,-2),e.lineTo(-20,-2),e.lineTo(-20,-9),e.lineTo(-14,-9),e.stroke(),e.beginPath(),e.moveTo(-12,2),e.lineTo(-20,2),e.lineTo(-20,9),e.lineTo(-14,9),e.stroke(),e.beginPath(),e.moveTo(7,11),e.lineTo(7,15),e.lineTo(14,15),e.stroke(),e.beginPath(),e.moveTo(7,-11),e.lineTo(7,-15),e.lineTo(14,-15),e.stroke(),t.moving&&(e.strokeStyle="#ff9200",e.beginPath(),e.moveTo(-20,-9),e.lineTo(-N(30,27),-6),e.lineTo(-20,-2),e.stroke(),e.beginPath(),e.moveTo(-20,9),e.lineTo(-N(30,27),6),e.lineTo(-20,2),e.stroke()),e.restore()}}class rt{constructor(){s(this,"name","Рокетница");s(this,"rate");s(this,"prevShotTime");this.rate=1,this.prevShotTime=0}shot(e){let t=new Date().getTime();if(t-this.prevShotTime>1e3/this.rate)return this.prevShotTime=t,new nt(e.x,e.y,e.rotation)}}class nt{constructor(e=0,t=0,i=0,o=0,n=.04){s(this,"x");s(this,"y");s(this,"speed");s(this,"rotation");s(this,"acceleration");s(this,"max_speed");this.x=e+5*Math.cos(i),this.y=t+5*Math.sin(i),this.speed=o,this.rotation=i,this.acceleration=n,this.max_speed=6}think(){this.speed+=this.acceleration,this.speed>=this.max_speed?this.acceleration=0:this.acceleration+=.02,this.x+=this.speed*Math.cos(this.rotation),this.y+=this.speed*Math.sin(this.rotation)}render(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(8,1),e.lineTo(-8,1),e.lineTo(-8,-1),e.lineTo(8,-1),e.lineTo(8,1),e.stroke(),Math.random()>.1&&(e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-8,-2),e.lineTo(-12,0),e.lineTo(-8,2),e.stroke()),e.restore()}}class at{constructor(){s(this,"name","Пулимет");s(this,"rate");s(this,"bulletSpeed");s(this,"prevShotTime");this.rate=10,this.prevShotTime=0,this.bulletSpeed=6}shot(e){let t=new Date().getTime();if(t-this.prevShotTime>1e3/this.rate)return this.prevShotTime=t,new ht(e.x,e.y,e.rotation,this.bulletSpeed)}}class ht{constructor(e,t,i,o=3){s(this,"x");s(this,"y");s(this,"speed");s(this,"rotation");this.x=e,this.y=t,this.speed=o,this.rotation=i}think(){this.x+=this.speed*Math.cos(this.rotation),this.y+=this.speed*Math.sin(this.rotation)}render(e){let t=5*Math.cos(this.rotation),i=5*Math.sin(this.rotation);e.save(),e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=2,e.moveTo(this.x,this.y),e.lineTo(this.x+t,this.y+i),e.closePath(),e.stroke(),e.restore()}}class lt{constructor(){s(this,"name","Плазма");s(this,"rate");s(this,"bulletSpeed");s(this,"prevShotTime");this.rate=5,this.prevShotTime=0,this.bulletSpeed=6}shot(e){let t=new Date().getTime();if(t-this.prevShotTime>1e3/this.rate)return this.prevShotTime=t,new dt(e.x,e.y,e.rotation,this.bulletSpeed)}}class dt{constructor(e,t,i,o=4){s(this,"x");s(this,"y");s(this,"speed");s(this,"rotation");this.x=e,this.y=t,this.speed=o,this.rotation=i}think(){this.x+=this.speed*Math.cos(this.rotation),this.y+=this.speed*Math.sin(this.rotation)}render(e){e.save(),e.beginPath(),e.fillStyle="#00ff00",e.beginPath(),e.arc(this.x,this.y,3,0,2*Math.PI),e.fill(),e.closePath(),e.restore()}}const X=[ot,st,et,tt,it],z=[at,rt,lt];let k=0,P=0,I={enemies:[],bullets:[]},M;class le{constructor(){s(this,"game2D");this.game2D=new d;const{env:e,keyboard:t}=this.game2D;let i=new Qe,o=X[P];M=new xe(t,i,e.width/2,e.height/2,z[k],o),this.game2D.tick((n,a,h)=>{h.pressed("KeyL")&&Q(M,X,1),h.pressed("Semicolon")&&Q(M,X,-1),h.pressed("KeyO")&&x(M,1),h.pressed("KeyP")&&x(M,-1),ct(n,e),yt(n,e,M),I.enemies.forEach(l=>{l.think(I),l.render(n)}),I.bullets.forEach(l=>{l.think(I),l.render(n)}),M.think(I),M.render(n),ut(I,e)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(le,"id","spacesShip");function ut(r,e){r.bullets=r.bullets.filter(t=>Z(0,e.width,t.x)&&Z(0,e.height,t.y))}function Z(r,e,t){return t>r&&t<e}function Q(r,e,t){P+=t,P>=e.length&&(P=0),P<0&&(P=e.length-1),r.changeChip(e[P])}function x(r,e){k+=e,k>=z.length&&(k=0),k<0&&(k=z.length-1),r.cnahgeWeapon(z[k])}function ct(r,e){r.save(),r.fillStyle="#ff0000",r.font="20px Arial",r.fillText("Смена корабля: Д или Ж",10,e.height-10),r.fillText("Смена оружия: Щ или З",10,e.height-30),r.fillText("Летать на стрелки",10,e.height-50),r.restore()}function yt(r,e,t){r.save(),r.fillStyle="#ff0000",r.font="20px Arial",r.fillText(`корабль: ${t.view.name}`,10,e.height-80),r.fillText(`оружие: ${t.view.weapon_name}`,10,e.height-100),r.restore()}const mt=new ie("simple_2d_games",[ae,le,re]);let _=class{constructor(e=0,t=0,i=0,o="#ff6600"){s(this,"x");s(this,"y");s(this,"r");s(this,"c");s(this,"vx");s(this,"vy");s(this,"originX");s(this,"originY");this.x=e,this.y=t,this.r=i,this.c=o,this.vx=0,this.vy=0,this.originX=e,this.originY=t}set(e,t){this.x=e,this.y=t}think(e,t){let i=this.x-e.x,o=this.y-e.y;if(Math.sqrt(i*i+o*o)<e.r){let a=Math.atan2(o,i),h=e.x+Math.cos(a)*e.r,l=e.y+Math.sin(a)*e.r;this.vx+=h-this.x,this.vy+=l-this.y}this.vx+=t.spring.vx(this.x,this.originX,t),this.vy+=t.spring.vy(this.y,this.originY,t),this.vx*=t.friction.vx(this.x,this.originX,t),this.vy*=t.friction.vy(this.x,this.originX,t),this.x+=this.vx,this.y+=this.vy}render(e){e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI),e.fillStyle=this.c,e.fill(),e.closePath()}};class de{constructor(){s(this,"balls");s(this,"player");s(this,"game2D");this.game2D=new d,this.balls=ft(5e3,this.game2D.env),this.player=new _(100,100,20,"#eebe0a");let e={friction:gt(.5),spring:pt(.01)};this.game2D.tick((t,i)=>{this.player.set(i.x,i.y),this.player.render(t),this.balls.forEach(o=>{o.think(this.player,e),o.render(t)})})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.balls=void 0,this.player=void 0}}s(de,"id","Balls");function ft(r,e){let t=[],i=e.width/10,o=e.height/10;for(let n=0;n<r;n++){let a=i+Math.random()*(e.width-i*2),h=o+Math.random()*(e.height-o*2);t.push(new _(a,h,2,"#ff0000"))}return t}function pt(r){return{vx(e,t){return-(e-t)*r},vy(e,t){return-(e-t)*r}}}function gt(r){return{vx(){return r},vy(){return r}}}class ue{constructor(){s(this,"balls");s(this,"player");s(this,"game2D");this.game2D=new d,this.balls=vt(5e3,this.game2D.env),this.player=new _(100,100,20,"#eebe0a");let e={friction:Tt(),spring:wt()};this.game2D.tick((t,i)=>{this.player.set(i.x,i.y),this.player.render(t),this.balls.forEach(o=>{o.think(this.player,{...this.game2D.env,...e}),o.render(t)})})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.balls=void 0,this.player=void 0}}s(ue,"id","Balls2");function vt(r,e){let t=[],i=e.width/10,o=e.height/10;for(let n=0;n<r;n++){let a=i+Math.random()*(e.width-i*2),h=o+Math.random()*(e.height-o*2);t.push(new _(a,h,a>e.width/2?2:3,a>e.width/2?"#00bcd4":"#bdb76b"))}return t}function wt(){let r=0,e=0;return{vx(t,i,o){let n=i>o.width/2?r:e;return-(t-i)*n},vy(t,i,o){let n=i>o.width/2?r:e;return-(t-i)*n}}}function Tt(){let r=.99,e=.4;return{vx(t,i,o){return i>o.width/2?r:e},vy(t,i,o){return i>o.width/2?r:e}}}class _t{constructor(e){s(this,"x",0);s(this,"y",0);s(this,"pressed",!1);s(this,"rect");s(this,"canvas");s(this,"touch_start",()=>{this.pressed=!0});s(this,"touch_end",()=>{this.pressed=!1,this.x=0,this.y=0});s(this,"touch_move",e=>{let t=0,i=0,o=e.touches[0];o.pageX||o.pageY?(t=o.pageX,i=o.pageY):(t=o.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=o.clientY+document.body.scrollTop+document.documentElement.scrollTop),t-=this.canvas.offsetLeft,i-=this.canvas.offsetTop,this.x=t,this.y=i});this.canvas=e,e.addEventListener("touchstart",this.touch_start,!1),e.addEventListener("touchmove",this.touch_move,!1),e.addEventListener("touchend",this.touch_end,!1)}destroy(){this.canvas.removeEventListener("touchstart",this.touch_start,!1),this.canvas.removeEventListener("touchmove",this.touch_move,!1),this.canvas.removeEventListener("touchend",this.touch_end,!1)}}class ce{constructor(){s(this,"balls");s(this,"player");s(this,"game2D");this.game2D=new d({controller:_t});const e=this.game2D.env;this.balls=bt(2e3,e),this.player=new _(e.width/2,e.height/2,30,"#eebe0a");let t={friction:kt(.99),spring:Mt(0)};this.game2D.tick((i,o)=>{o.pressed&&this.player.set(o.x,o.y),this.player.render(i),this.balls.forEach(n=>{n.think(this.player,t),n.render(i)})})}destroy(){this.game2D.destroy(),this.balls=void 0,this.game2D=void 0,this.player=void 0}}s(ce,"id","BallTouch");function bt(r,e){let t=[],i=e.width/20,o=e.height/20;for(let n=0;n<r;n++){let a=i+Math.random()*(e.width-i*2),h=o+Math.random()*(e.height-o*2);t.push(new _(a,h,2,"#00bcd4"))}return t}function Mt(r){return{vx(e,t){return-(e-t)*r},vy(e,t){return-(e-t)*r}}}function kt(r){return{vx(){return r},vy(){return r}}}class ye{constructor(){s(this,"balls");s(this,"player");s(this,"game2D");this.game2D=new d,this.balls=St().map(t=>(t.set(100+Math.random()*500,100+Math.random()*400),t)),this.player=new _(100,100,20,"#eebe0a");let e={friction:Bt(.8),spring:zt(.007)};this.game2D.tick((t,i)=>{this.player.set(i.x,i.y),this.player.render(t),this.balls.forEach(o=>{o.think(this.player,e),o.render(t)})})}destroy(){this.game2D.destroy(),this.balls=void 0,this.game2D=void 0,this.player=void 0}}s(ye,"id","Pidor");const Pt="#ff0000",Dt=2,p=(r,e,t=Pt)=>new _(r,e,Dt,t),c=20;function St(){return[...Et(),...It(),...Ct(),...Lt(),...Wt(),...At(),...Rt()]}function Et(){return[...g(200,250,c,r=>p(r,100)),...g(100,150,c,r=>p(225,r))]}function It(){return[...g(100,150,c,r=>p(270,r)),...A(270,135,c),...g(100,150,c,r=>p(310,r))]}function Ct(){return[...g(170,220,c,r=>p(150,r)),...g(150,170,c,r=>p(r,170)),...g(170,220,c,r=>p(170,r))]}function Lt(){return[...g(170,220,c,r=>p(190,r)),...$t(190,220,c),...g(170,220,c,r=>p(230,r))]}function Wt(){return[...g(170,220,c,r=>p(260,r)),...A(260,195,c,25)]}function At(){return[...A(325,185,c,15,1),...g(180,210,c,r=>p(310,r)),...g(180,210,c,r=>p(340,r)),...A(325,205,c,15,2)]}function Rt(){return[...g(170,220,c,r=>p(370,r)),...A(370,185,c,15,1.5)]}function A(r,e,t,i=15,o=1.5){let n=[];for(var a=0;a<=t;a++)n.push(p(r+i*Math.cos(Math.PI*a/t+Math.PI*o),e+i*Math.sin(Math.PI*a/t+Math.PI*o)));return n}function $t(r,e,t){let i=[];for(var o=0;o<t;o++)i.push(p(r+2*o,e-2.5*o));return i}function g(r,e,t,i){let o=e-r,n=Math.trunc(o/(t-1)),a=[];for(let h=r;h<=e;h+=n)a.push(i(h));return a}function zt(r){return{vx(e,t){return-(e-t)*r},vy(e,t){return-(e-t)*r}}}function Bt(r){return{vx(){return r},vy(){return r}}}class me{constructor(){s(this,"game2D");this.game2D=new d;let e=new Nt(150,150),t=new _(100,100,20,"#eebe0a");this.game2D.tick((i,o)=>{t.set(o.x,o.y),t.render(i),e.ratateTo(o),e.draw(i)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(me,"id","Arrow");let Nt=class{constructor(e=0,t=0,i="#ffff00"){s(this,"x");s(this,"y");s(this,"color","");s(this,"rotation",0);this.x=e,this.y=t,this.color=i,this.rotation=0}ratateTo({x:e,y:t}){let i=e-this.x,o=t-this.y;this.rotation=Math.atan2(o,i)}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=2,e.fillStyle=this.color,e.beginPath(),e.moveTo(-50,-25),e.lineTo(0,-25),e.lineTo(0,-50),e.lineTo(50,0),e.lineTo(0,50),e.lineTo(0,25),e.lineTo(-50,25),e.lineTo(-50,-25),e.closePath(),e.fill(),e.stroke(),e.restore()}};class fe{constructor(){s(this,"game2D");s(this,"rect_1");s(this,"rect_2");this.game2D=new d;const e=this.game2D.env;this.rect_1={x:Math.random()*e.width,y:Math.random()*e.height},this.rect_2={x:Math.random()*e.width,y:Math.random()*e.height},this.game2D.tick((t,i)=>{t.fillStyle="#000000",t.fillRect(this.rect_1.x-2,this.rect_1.y-2,4,4),t.fillStyle="#ff0000",t.fillRect(this.rect_2.x-2,this.rect_2.y-2,4,4),t.font="30px Arial",t.fillText(`points distance: ${ee(this.rect_1,this.rect_2)}`,10,100),t.fillText(`mouse distance: ${ee(i,this.rect_2)}`,10,130),t.beginPath(),t.moveTo(this.rect_2.x,this.rect_2.y),t.lineTo(i.x,i.y),t.closePath(),t.stroke()})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.rect_1=void 0,this.rect_2=void 0}}s(fe,"id","Distance");function ee(r,e){let t=r.x-e.x,i=r.y-e.y;return Math.sqrt(t*t+i*i).toFixed(2)}class T{constructor(e=100,t=100,i=20,o="#ff0000"){s(this,"x",200);s(this,"y",100);s(this,"scaleX",1);s(this,"scaleY",1);s(this,"lineWidth",1);s(this,"color","");s(this,"radius",10);s(this,"rotation",0);this.x=e,this.y=t,this.color=o,this.radius=i}ratateTo({x:e,y:t}){let i=e-this.x,o=t-this.y;this.rotation=Math.atan2(o,i)}render(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.scale(this.scaleX,this.scaleY),e.lineWidth=this.lineWidth,e.fillStyle=this.color,e.beginPath(),e.arc(0,0,this.radius,0,Math.PI*2,!0),e.closePath(),e.fill(),this.lineWidth>0&&e.stroke(),e.restore()}}class pe{constructor(){s(this,"game2D");this.game2D=new d;const e=this.game2D.env;let t={angle:0,centrY:200,range:50,xspeed:3,yspeed:.05},i={angle:0,centryScale:1,range:.5,speed:.1},o={angleX:0,angleY:0,range:150,centerX:0,centerY:0,xspeed:.07,yspeed:.11},n=new T(0,0),a=new T(e.width/2,e.height/2,30,"#00ff00"),h=new T(e.width/2,e.height/2,30,"#0000ff");o.centerX=e.width/2,o.centerY=e.height/2,this.game2D.tick(l=>{t.angle+=t.yspeed,n.x+=t.xspeed,n.y=t.centrY/2+Math.sin(t.angle)*t.range,n.x>e.width+n.radius&&(n.x=-n.radius,t.range+=1),a.scaleX=i.centryScale+Math.sin(i.angle)*i.range,a.scaleY=i.centryScale+Math.sin(i.angle)*i.range,i.angle+=i.speed,h.x=o.centerX+Math.sin(o.angleX)*o.range,h.y=o.centerY+Math.sin(o.angleY)*o.range,o.angleX+=o.xspeed,o.angleY+=o.yspeed,o.range+=.01,a.render(l),n.render(l),h.render(l)})}destroy(){this.game2D.destroy()}}s(pe,"id","Liner");class ge{constructor(){s(this,"game2D");s(this,"ball");s(this,"ball_oval");this.game2D=new d;const e=this.game2D.env;this.ball=new T(200,200,40,"#11bbff"),this.ball_oval=new T(200,200,20,"#00ffff");let t=e.width/2,i=e.height/2,o=0,n=100,a=.02;this.game2D.tick(h=>{o+=a,this.ball.x=t+Math.sin(o)*n,this.ball.y=i+Math.cos(o)*n,this.ball_oval.x=this.ball.x+Math.sin(o*2)*100,this.ball_oval.y=this.ball.y+Math.cos(o*2)*40,this.ball.y-this.ball_oval.y>0?(this.ball_oval.render(h),this.ball.render(h)):(this.ball.render(h),this.ball_oval.render(h))})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(ge,"id","Circle");class ve{constructor(){s(this,"game2D");this.game2D=new d;const e=this.game2D.env;let t=40,i=0,o=new T(e.width/2,e.height/2,t,"#ffee00"),n=new T(e.width/2,e.height/2,t,"#00ff00"),a=new T(e.width/2,e.height/2,t,"#0000ff"),h=new T(e.width/2,e.height/2,t,"#f0f0f0"),l=new T(e.width/2,e.height/2,t);this.game2D.tick(y=>{i+=.03;let m=e.width/2,b=e.height/2;o.x=m+Math.sin(i*.2)*(m-t),n.y=b+Math.sin(i*.3)*(b-t),a.y=b+Math.sin(i*.4)*(b-t),a.x=m+Math.sin(i)*(m-t),h.y=b+Math.sin(i*.5)*(b-t),h.x=m+Math.cos(i*.2)*(m-t),l.x=m+Math.sin(i*2)*(m-t),o.render(y),n.render(y),a.render(y),h.render(y),l.render(y)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(ve,"id","Waves");class we{constructor(){s(this,"pencil");s(this,"game2D");this.game2D=new d;const e=this.game2D.env;this.pencil=new Xt(e),this.game2D.tick((t,i)=>{this.pencil.draw(t,i)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}s(we,"id","Curves");let Xt=class{constructor(e){s(this,"points",[]);s(this,"point",{x0:0,y0:0,x1:0,y1:0});this.points=R(20,()=>({x:Math.random()*e.width,y:Math.random()*e.height})),this.point={x0:Math.random()*e.width,y0:Math.random()*e.height,x1:Math.random()*e.width,y1:Math.random()*e.height}}draw(e,t){e.beginPath(),e.strokeStyle="#00ff00",e.lineWidth=10,e.lineCap="butt",e.lineJoin="round",e.miterLimit=20,e.moveTo(this.point.x0,this.point.y0),e.quadraticCurveTo(t.x,t.y,this.point.x1,this.point.y1),e.stroke(),e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=5,e.lineCap="butt",e.lineJoin="round",e.miterLimit=10,e.moveTo(this.points[0].x,this.points[0].y);for(let i=1;i<this.points.length-1;i+=2)e.quadraticCurveTo(this.points[i].x,this.points[i].y,this.points[i+1].x,this.points[i+1].y);e.stroke()}};class Te{constructor(){s(this,"context2d");let e={x:100,y:100},t={x:200,y:200},i={x:350,y:150,r:0},o={x:350,y:150,r:50};const n=document.body;this.context2d=new oe(n.offsetWidth,n.offsetHeight);const a=this.context2d.ctx;let h=a.createLinearGradient(e.x,e.y,t.x,t.y);h.addColorStop(0,"#ffffff"),h.addColorStop(.5,"#0000ff"),h.addColorStop(1,"#ff0000"),a.fillStyle=h,a.fillRect(100,100,200,200);let l=a.createRadialGradient(i.x,i.y,i.r,o.x,o.y,o.r);l.addColorStop(0,"#000000"),l.addColorStop(1,"rgba(0, 0, 0, 0)"),a.fillStyle=l,a.fillRect(300,100,100,100)}destroy(){this.context2d.destroy(),this.context2d=void 0}}s(Te,"id","Gradient");class Yt{constructor(e,t,i){s(this,"url");s(this,"data");s(this,"status");this.url=e,this.data=document.createElement("video"),this.data.width=t,this.data.height=i,this.data.autoplay=!0,this.status="new"}load(e){this.data.setAttribute("src",this.url),this.data.addEventListener("loadeddata",()=>{this.data.readyState>=3&&e()})}get isLoaded(){return this.status==="loaded"}}class te{constructor(e){s(this,"url");s(this,"data");s(this,"status");this.url=e,this.data=new Image,this.status="new"}load(e){this.data.src=this.url,this.data.onload=e}get isLoaded(){return this.status==="loaded"}}class Ht{constructor(e){s(this,"assets");this.assets=e}load(){return new Promise(e=>{let t=this.assets.length;const i=()=>{t=t-1,t===0&&e(this.assets)};this.assets.forEach(o=>o.load(i))})}}const Ot="/js-animations/assets/vovka-3b8ecfa6.png",Ft="/js-animations/assets/floor_tiles-899c51d6.png",qt="/js-animations/assets/video-f1e39b4f.mov";class _e{constructor(){s(this,"game2D");this.game2D=new d,new Ht([new te(Ot),new te(Ft),new Yt(qt,640,360)]).load().then(([t,i,o])=>{this.game2D.tick(n=>{n.drawImage(i.data,230,20,80,140,200,130,100,120),n.drawImage(t.data,80,0,135,135,90,90,65,65),n.drawImage(o.data,300,150,100,100)})})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(_e,"id","Images");class be{constructor(){s(this,"pencil");s(this,"game2D");this.game2D=new d,this.pencil=new Ut,this.game2D.tick((e,t)=>{this.pencil.draw(e,t)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}s(be,"id","Line");let Ut=class{constructor(){s(this,"prevPos")}draw(e,t){D(this.prevPos)&&t.pressed?(e.strokeStyle="#ff0000",e.lineWidth=2,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.beginPath(),e.moveTo(t.x,t.y),this.prevPos={x:t.x,y:t.y}):!D(this.prevPos)&&t.pressed?(e.lineTo(t.x,t.y),this.prevPos={x:t.x,y:t.y},e.stroke()):!D(this.prevPos)&&!t.pressed&&(this.prevPos=null)}};class Me{constructor(){s(this,"pencil");s(this,"game2D");this.game2D=new d;const e=this.game2D.env;this.pencil=new Gt(e),this.game2D.tick(t=>{this.pencil.draw(t)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}s(Me,"id","MultiCurves");let Gt=class{constructor(e){s(this,"count",10);s(this,"points",[]);s(this,"ctrlPoint",{});this.points=R(this.count,()=>({x:Math.random()*e.width,y:Math.random()*e.height}))}draw(e){e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=5,e.lineCap="butt",e.lineJoin="round",e.miterLimit=10;let t=(this.points[0].x+this.points[this.count-1].x)/2,i=(this.points[0].y+this.points[this.count-1].y)/2;e.moveTo(t,i);let o;for(o=1;o<this.points.length-2;o++){let n=(this.points[o].x+this.points[o+1].x)/2,a=(this.points[o].y+this.points[o+1].y)/2;e.quadraticCurveTo(this.points[o].x,this.points[o].y,n,a)}e.quadraticCurveTo(this.points[o].x,this.points[o].y,t,i),e.stroke(),e.beginPath(),e.strokeStyle="#0000ff",e.lineWidth=3,e.arc(100,200,40,0,Math.PI*2,!0),e.closePath(),e.stroke(),e.beginPath(),e.strokeStyle="#00ff44",e.lineWidth=5,e.moveTo(200,200),e.arcTo(200,50,150,200,20),e.stroke()}};class jt{static colorToRGB(e,t=1){let i;typeof e=="string"&&e[0]==="#"&&(i=parseInt(e.slice(1),16));var o=i>>16&255,n=i>>8&255,a=i&255,h=t<0?0:t>1?1:t;return h===1?`rgb(${o},${n},${a})`:`rgb(${o},${n},${a},${h})`}static parse(e,t=!1){return t===!0?typeof e=="number"?e|0:(typeof e=="string"&&e[0]==="#"&&(e=e.slice(1)),parseInt(e,16)):(typeof e=="number"&&(e="#"+("00000"+(e|0).toString(16)).substr(-6)),e)}}class ke{constructor(){s(this,"game2D");s(this,"pencil");this.game2D=new d;const e=this.game2D.env,t=this.game2D.context2d.ctx.getImageData(0,0,e.width,e.height);this.pencil=new Kt,this.game2D.tick((i,o)=>{this.pencil.draw(i,o,t)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}s(ke,"id","pixel");let Kt=class{constructor(){s(this,"prevPos");s(this,"brush_size",25);s(this,"brush_density",50);s(this,"brush_color",0)}draw(e,t,i){let o=i.data;if(D(this.prevPos)&&t.pressed)this.brush_color=jt.parse(Math.random()*16777215,!0),this.prevPos={x:t.x,y:t.y};else if(!D(this.prevPos)&&t.pressed){for(let n=0;n<this.brush_density;n++){let a=Math.random()*Math.PI*2,h=Math.random()*this.brush_size,l=t.x+Math.cos(a)*h|0,y=t.y+Math.sin(a)*h|0,m=(l+y*i.width)*4;o[m]=this.brush_color>>16&255,o[m+1]=this.brush_color>>8&255,o[m+2]=this.brush_color&255,o[m+3]=255}e.putImageData(i,0,0),this.prevPos={x:t.x,y:t.y}}else!D(this.prevPos)&&!t.pressed&&(this.prevPos=null)}};class Pe{constructor(){s(this,"pencil");s(this,"game2D");this.game2D=new d;const e=this.game2D.env;this.pencil=new Jt(e),this.game2D.tick(t=>{this.pencil.draw(t)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}s(Pe,"id","Shapes");class Jt{constructor(e){s(this,"count",10);s(this,"points",[]);s(this,"ctrlPoint",{});this.points=R(this.count,()=>({x:Math.random()*e.width,y:Math.random()*e.height}))}draw(e){e.beginPath(),e.fillStyle="#ff0000";let t=(this.points[0].x+this.points[this.count-1].x)/2,i=(this.points[0].y+this.points[this.count-1].y)/2;e.moveTo(t,i);let o;for(o=1;o<this.points.length-2;o++){let n=(this.points[o].x+this.points[o+1].x)/2,a=(this.points[o].y+this.points[o+1].y)/2;e.quadraticCurveTo(this.points[o].x,this.points[o].y,n,a)}e.quadraticCurveTo(this.points[o].x,this.points[o].y,t,i),e.fill(),e.beginPath(),e.fillStyle="#00ff44",e.moveTo(100,100),e.arcTo(200,50,150,200,20),e.fill()}}class De{constructor(){s(this,"game2D");this.game2D=new d;const e=this.game2D.env;let t=new Vt(e.width/2,e.height/2),i=0;this.game2D.tick((o,n,a)=>{a.pressed("ArrowLeft")&&(t.rotation-=2*Math.PI/180),a.pressed("ArrowRight")&&(t.rotation+=2*Math.PI/180),a.pressed("ArrowUp")&&i<4&&(i+=.2),a.pressed("ArrowDown")&&(i-=.2),i<0?i=0:i-=.05;let h=Math.cos(t.rotation)*i,l=Math.sin(t.rotation)*i;t.x+=h,t.y+=l,t.draw(o)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(De,"id","acceleration");let Vt=class{constructor(e=0,t=0,i="#ffff00"){s(this,"x");s(this,"y");s(this,"color","");s(this,"rotation",0);this.x=e,this.y=t,this.color=i,this.rotation=0}ratateTo({x:e,y:t}){let i=e-this.x,o=t-this.y;this.rotation=Math.atan2(o,i)}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=2,e.fillStyle=this.color,e.strokeStyle="#000000",e.beginPath(),e.moveTo(-50,-25),e.lineTo(0,-25),e.lineTo(0,-50),e.lineTo(50,0),e.lineTo(0,50),e.lineTo(0,25),e.lineTo(-50,25),e.lineTo(-50,-25),e.closePath(),e.fill(),e.stroke(),e.restore()}};class Zt{constructor(e=0,t=0,i="#ffff00"){s(this,"x");s(this,"y");s(this,"color","");s(this,"rotation",0);this.x=e,this.y=t,this.color=i,this.rotation=0}ratateTo({x:e,y:t}){let i=e-this.x,o=t-this.y;this.rotation=Math.atan2(o,i)}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=2,e.fillStyle=this.color,e.strokeStyle="#000000",e.beginPath(),e.moveTo(-50,-25),e.lineTo(0,-25),e.lineTo(0,-50),e.lineTo(50,0),e.lineTo(0,50),e.lineTo(0,25),e.lineTo(-50,25),e.lineTo(-50,-25),e.closePath(),e.fill(),e.stroke(),e.restore()}}class Se{constructor(){s(this,"game2D");let e=.05,t=0,i=0;this.game2D=new d;const o=this.game2D.env;let n=new Zt(o.width/2,o.height/2);this.game2D.tick((a,h)=>{let l=h.x-n.x,y=h.y-n.y,m=Math.atan2(y,l),b=Math.cos(m)*e,Ie=Math.sin(m)*e;n.rotation=m,t+=b,i+=Ie,n.x+=t,n.y+=i,n.draw(a)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}s(Se,"id","mouse1");const Qt=50,W=10;class Ee{constructor(){s(this,"game2D");s(this,"rect");s(this,"balls",[]);this.game2D=new d;const e=this.game2D.env;this.rect=ei(e),this.balls=ti(this.rect),this.game2D.tick(t=>{this.balls=xt(this.balls,this.rect),this.balls.forEach(i=>{i.think(),i.render(t)}),this.rect.render(t)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.rect=void 0,this.balls=[]}}s(Ee,"id","removal");function xt(r,e){return r.filter(t=>!(t.x-t.radius>e.right||t.x+t.radius<e.x||t.y-t.radius>e.bottom||t.y+t.radius<e.y))}function ei(r){return new S(100,100,r.width-200,r.height-200,"#00ff00")}function ti(r){return R(Qt,()=>new se(W+r.x+Math.random()*(r.right-2*W),W+r.y+Math.random()*(r.bottom-2*W),W,"#ff6600",new Be(Math.random()*2-1,Math.random()*2-1)))}const ii=new ie("simple_examples",[Ee,Se,De,ke,_e,Te,Pe,Me,we,be,fe,ge,pe,ve,me,de,ue,ce,ye]);new $e([mt,ii]);
