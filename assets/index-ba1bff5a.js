var nt=Object.defineProperty;var ot=(t,e,i)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var n=(t,e,i)=>(ot(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();function Ze(t,e){return e.expamples.find(({settings:i})=>i.name===t)}function Ke(t,e){let i=new URL(window.location.href);i.searchParams.set(t,e),window.history.pushState("Animations",t,i)}function at(){let t=new URLSearchParams(window.location.search);return{chapter:t.get("chapter")||"",example:t.get("example")||""}}function ht(t,e){let i=e[t];return i??Object.values(e)[0]}function lt(t,e){let i=Ze(t,e);return i??e.expamples[0]}const dt=()=>{let t={chapters:document.getElementById("chapters_menu"),examples:document.getElementById("examples_menu"),canvas:document.getElementById("canvas"),body:document.body};return{...t,onResize:ut(),updateExamplesMenu:ct(t.examples),updateChaptersMenu:ft(t.chapters)}};function ut(){return t=>{window.addEventListener("resize",()=>{t()})}}function ct(t){return(e,i,s)=>{yt(t);let r;e.expamples.forEach(a=>{let o=document.createElement("div");o.classList.add("menu__item"),o.innerText=a.settings.name,i===a&&(r=o,r.classList.add("menu__item_selected")),o.addEventListener("click",()=>{r!==o&&(r&&r.classList.remove("menu__item_selected"),r=o,r.classList.add("menu__item_selected"),Ke("example",a.settings.name),s(a.settings.name))}),t.appendChild(o)})}}function ft(t){return(e,i,s)=>{let r;Object.keys(e).forEach(a=>{let o=e[a],h=document.createElement("div");h.classList.add("menu__item"),h.innerText=o.name,i===o&&(r=h,r.classList.add("menu__item_selected")),h.addEventListener("click",()=>{r!==h&&(r&&r.classList.remove("menu__item_selected"),r=h,r.classList.add("menu__item_selected"),Ke("chapter",a),s(a))}),t.appendChild(h)}),s(i.name)}}function yt(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function b(t){return t==null||t==null}function pt(t){return Object.values(t)}function de(t,e){let i=[];for(let s=0;s<t;s++)i.push(e(s,t));return i}function mt(t){const e=t.reduce((m,N)=>({...m,[N.name]:N}),{}),i=dt(),s=at(),r=i.canvas.getContext("2d");let a=ht(s.chapter,e),o,h,L,I={width:i.body.offsetWidth,height:i.body.offsetHeight,injectors:{}},c=I;i.updateChaptersMenu(e,a,tt),i.onResize(()=>{c={...c,width:o.settings.width||i.body.offsetWidth,height:o.settings.height||i.body.offsetHeight},i.canvas.width=c.width,i.canvas.height=c.height,o.resize&&o.resize(r,c)});function tt(m){$e(),a=e[m],o=lt(s.example,a),i.updateExamplesMenu(a,o,it),Ee()}function it(m){$e(),o=Ze(m,a),Ee()}function Ee(){var N;if(o.inited)return;let m=((N=o.settings.injectors)==null?void 0:N.reduce((rt,Le)=>({...rt,[Le.name]:gt(Le,{canvas:i.canvas})}),{}))||{};c={width:o.settings.width||i.body.offsetWidth,height:o.settings.height||i.body.offsetHeight,injectors:m},i.canvas.width=c.width,i.canvas.height=c.height,o.init(i.canvas,c,r),o.inited=!0,Se(0)}function Se(m){b(L)?st():L(),L=o.render(r,c,m)||null,h=requestAnimationFrame(Se)}function $e(){h&&cancelAnimationFrame(h),o&&o.inited&&(b(c.injectors)||pt(c.injectors).map(m=>m.destroy()),o.destroy(i.canvas),o.inited=!1),c=I}function st(){r.clearRect(0,0,i.canvas.width,i.canvas.height)}}function gt(t,e){let i=t.deps.map(({name:s})=>{let r=e[s];if(b(r))throw new Error(`${t.name} has unknow dep ${s}`);return r});return new t.instance(...i)}class wt{constructor(e=0,i=0){n(this,"dx");n(this,"dy");this.dx=e,this.dy=i}think(e){e.x+=this.dx,e.y+=this.dy}}class vt{constructor(e=.3,i=.3){n(this,"vy");n(this,"vx");this.vx=e,this.vy=i}think(e){e.x+=this.vx,e.y+=this.vy}}class Te{think(){}}class Ie{render(e,{x:i,y:s,radius:r,color:a}){e.save(),e.beginPath(),e.arc(i,s,r,0,2*Math.PI),e.fillStyle=a,e.fill(),e.closePath(),e.restore()}}class bt{render(e,{x:i,y:s,width:r,height:a,color:o}){e.save(),e.strokeStyle=o,e.beginPath(),e.rect(i,s,r,a),e.closePath(),e.stroke(),e.restore()}}let et=class{constructor(e=0,i=0,s=10,r="#ff6600",a=new Te,o=new Ie){n(this,"x");n(this,"y");n(this,"color");n(this,"radius");n(this,"behavior");n(this,"view");this.x=e,this.y=i,this.color=r,this.radius=s,this.view=o,this.behavior=a}static create({x:e=0,y:i=0,radius:s=10,color:r="#ff6600",view:a=new Ie,behavior:o=new Te}){return new et(e,i,s,r,o,a)}think(){this.behavior.think(this)}render(e){this.view.render(e,this)}};class C{constructor(e=100,i=100,s=200,r=200,a="#ff0000",o=new Te,h=new bt){n(this,"width");n(this,"height");n(this,"y");n(this,"x");n(this,"right");n(this,"bottom");n(this,"color");n(this,"behavior");n(this,"view");this.x=e,this.y=i,this.color=a,this.width=s,this.height=r,this.right=e+s,this.bottom=i+r,this.view=h,this.behavior=o}static create({x:e,y:i,width:s,height:r,color:a,view:o,behavior:h}){return new C(e,i,s,r,a,h,o)}think(){this.behavior.think(this)}render(e){this.view.render(e,this)}}const w=class{constructor(e,i,s){n(this,"top");n(this,"bottom");n(this,"x");n(this,"y");n(this,"behavior");this.x=e,this.y=i,this.behavior=new wt(w.SPEED),this.top=C.create({x:e,y:i,width:w.WIDTH,height:w.MIN_HEIGHT+Math.random()*(s-(w.GAP+w.MIN_HEIGHT))}),this.bottom=C.create({x:this.top.x,y:this.top.bottom+w.GAP,width:w.WIDTH,height:s-this.top.height-w.GAP})}think(){this.behavior.think(this),this.top.x=this.x,this.bottom.x=this.x}render(e){this.top.render(e),this.bottom.render(e)}};let d=w;n(d,"GAP",200),n(d,"WIDTH",50),n(d,"MIN_HEIGHT",10),n(d,"DISTANCE_BEETWEN",220),n(d,"SPEED",-4);let D={bird:null,screen:null,pipes:[]};const Mt={settings:{name:"Flappy Bird"},init(t,e){let i=Pt(e),s=Tt(),r=_t(i);D={bird:s,screen:i,pipes:r}},render(t){D.screen.render(t),D.bird.render(t),D.pipes.forEach(e=>{e.think(),e.render(t)}),kt(D)},destroy(){D=null}};function _t(t){let e=[],i=t.width/2,s=t.y,r=t.height,a=t.width/(d.WIDTH+d.DISTANCE_BEETWEN)+1;for(let o=0;o<a;o++)e.push(new d(i,s,r)),i+=d.WIDTH+d.DISTANCE_BEETWEN;return e}function kt(t){let e=t.pipes[0],i=t.pipes[t.pipes.length-1],s=t.screen.x-d.WIDTH;if(e.x<s){t.pipes.shift();let r=t.screen.y,a=t.screen.height;t.pipes.push(new d(i.x+d.WIDTH+d.DISTANCE_BEETWEN,r,a))}}function Tt(){return C.create({x:150,y:350,width:50,height:50,color:"#00ff00"})}function Pt(t){let e=t.width*5/100,i=t.height*10/100;return new C(e,i,t.width-2*e,t.height-2*i,"#0000ff")}var Y=(t=>(t.Space="Space",t.ArrowUp="ArrowUp",t.ArrowLeft="ArrowLeft",t.ArrowDown="ArrowDown",t.ArrowRight="ArrowRight",t))(Y||{});function Ae(){return Math.random().toString(16).slice(2)}class g{constructor(){n(this,"keys_pressed",[]);n(this,"up_subscribers",[]);n(this,"down_subscribers",[]);n(this,"keydown",e=>{let i=e.code;this.keys_pressed.push(i),this.down_subscribers.forEach(({keys:s,cb:r})=>{(s.length===0||s.includes(i))&&r(i)})});n(this,"keyup",e=>{this.keys_pressed=this.keys_pressed.filter(s=>s!==e.code);let i=e.code;this.up_subscribers.forEach(({keys:s,cb:r})=>{(s.length===0||s.includes(i))&&r(i)})});window.addEventListener("keydown",this.keydown,!1),window.addEventListener("keyup",this.keyup,!1)}destroy(){window.removeEventListener("keydown",this.keydown,!1),window.removeEventListener("keyup",this.keyup,!1)}pressed(e){return b(e)?this.keys_pressed.length!=0:this.keys_pressed.includes(e)}down(e){let i=Ae();return this.down_subscribers.push({...e,hash:i}),i}up(e){let i=Ae();return this.up_subscribers.push({...e,hash:i}),i}}n(g,"keys",Y);const Pe={name:"keyboard",instance:g,deps:[]};class Et{constructor(){n(this,"vr",0);n(this,"vx",0);n(this,"vy",0);n(this,"trust",0);n(this,"gravity",.01);n(this,"rotation",0)}left(){this.vr=-3}rigth(){this.vr=3}up(){this.trust=.05}forward(){this.vr=0}stop(){this.trust=0}calculate(){this.rotation+=this.vr*Math.PI/180;let e=Math.cos(this.rotation)*this.trust,i=Math.sin(this.rotation)*this.trust;return this.vx+=e,this.vy+=i,this.vx+=this.vx>0?-this.gravity:this.gravity,this.vy+=this.vy>0?-this.gravity:this.gravity,{vx:this.vx,vy:this.vy,rotation:this.rotation}}}class St{constructor(e){n(this,"x",0);n(this,"y",0);n(this,"pressed",!1);n(this,"rect");n(this,"canvas");n(this,"touch_start",()=>{this.pressed=!0});n(this,"touch_end",()=>{this.pressed=!1,this.x=0,this.y=0});n(this,"touch_move",e=>{let i=0,s=0,r=e.touches[0];r.pageX||r.pageY?(i=r.pageX,s=r.pageY):(i=r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s=r.clientY+document.body.scrollTop+document.documentElement.scrollTop),i-=this.canvas.offsetLeft,s-=this.canvas.offsetTop,this.x=i,this.y=s});this.canvas=e,e.addEventListener("touchstart",this.touch_start,!1),e.addEventListener("touchmove",this.touch_move,!1),e.addEventListener("touchend",this.touch_end,!1)}destroy(){this.canvas.removeEventListener("touchstart",this.touch_start,!1),this.canvas.removeEventListener("touchmove",this.touch_move,!1),this.canvas.removeEventListener("touchend",this.touch_end,!1)}}class H{constructor(e){n(this,"x",0);n(this,"y",0);n(this,"leftButtonDown",!1);n(this,"rect");n(this,"canvas");n(this,"mousedown",e=>{this.leftButtonDown=!0});n(this,"mouseup",e=>{this.leftButtonDown=!1});n(this,"move",e=>{let i=0,s=0;e.pageX||e.pageY?(i=e.pageX,s=e.pageY):(i=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),i-=this.canvas.offsetLeft,s-=this.canvas.offsetTop,this.x=i,this.y=s});this.canvas=e,e.addEventListener("mousemove",this.move,!1),e.addEventListener("mousedown",this.mousedown,!1),e.addEventListener("mouseup",this.mouseup,!1)}destroy(){this.canvas.removeEventListener("mousemove",this.move,!1),this.canvas.removeEventListener("mousedown",this.mousedown,!1),this.canvas.removeEventListener("mouseup",this.mouseup,!1)}copyPos(){return{x:this.x,y:this.y}}}const B={name:"mouse",instance:H,deps:[{name:"canvas"}]};class $t{constructor(e,i,s=0,r=0,a){n(this,"x");n(this,"y");n(this,"width");n(this,"height");n(this,"rotation");n(this,"showFlame");n(this,"keyboard");n(this,"acceleration");n(this,"weapon");this.x=s,this.y=r,this.width=25,this.height=20,this.weapon=a,this.rotation=0,this.keyboard=e,this.showFlame=!1,this.acceleration=i,this.keyboard.up({keys:[g.keys.ArrowUp,g.keys.ArrowLeft,g.keys.ArrowRight],cb:o=>{if(o===g.keys.ArrowUp){this.showFlame=!1,this.acceleration.stop();return}this.acceleration.forward()}})}shot(e){this.weapon.shot(this,e.bullets)}think(e){this.keyboard.pressed(g.keys.Space)&&this.shot(e),this.keyboard.pressed(g.keys.ArrowLeft)&&this.acceleration.left(),this.keyboard.pressed(g.keys.ArrowRight)&&this.acceleration.rigth(),this.keyboard.pressed(g.keys.ArrowUp)&&(this.acceleration.up(),this.showFlame=!0);let{vx:i,vy:s,rotation:r}=this.acceleration.calculate();this.rotation=r,this.x+=i,this.y+=s}render(e){if(e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(10,0),e.lineTo(-10,10),e.lineTo(-5,0),e.lineTo(-10,-10),e.lineTo(10,0),e.stroke(),this.showFlame){let i=Math.random()>.5?17:15;e.beginPath(),e.strokeStyle="#ff9200",e.moveTo(-7.5,-5),e.lineTo(-i,0),e.lineTo(-7.5,5),e.stroke()}e.restore()}}class Lt{constructor(){n(this,"rate");n(this,"bulletSpeed");n(this,"prevShotTime");this.rate=10,this.prevShotTime=0,this.bulletSpeed=6}shot(e,i){let s=new Date().getTime();s-this.prevShotTime>1e3/this.rate&&(this.prevShotTime=s,i.push(new It(e.x,e.y,e.rotation,this.bulletSpeed)))}}class It{constructor(e,i,s,r=3){n(this,"x");n(this,"y");n(this,"speed");n(this,"rotation");this.x=e+5*Math.cos(s),this.y=i+5*Math.sin(s),this.speed=r,this.rotation=s}think(){this.x+=this.speed*Math.cos(this.rotation),this.y+=this.speed*Math.sin(this.rotation)}render(e){let i=5*Math.cos(this.rotation),s=5*Math.sin(this.rotation);e.save(),e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=2,e.moveTo(this.x,this.y),e.lineTo(this.x+i,this.y+s),e.closePath(),e.stroke(),e.restore()}}let W={enemies:[],bullets:[]},ne;const At={settings:{name:"Spacesship",injectors:[Pe]},init(t,e){let i=e.injectors.keyboard,s=new Et;ne=new $t(i,s,e.width/2,e.height/2,new Lt)},render(t,e){W.enemies.forEach(i=>{i.think(W),i.render(t)}),W.bullets.forEach(i=>{i.think(W),i.render(t)}),ne.think(W),ne.render(t),xt(W,e)},destroy(){ne=void 0}};function xt(t,e){t.bullets=t.bullets.filter(i=>xe(0,e.width,i.x)&&xe(0,e.height,i.y))}function xe(t,e,i){return i>t&&i<e}const Ct={name:"games",expamples:[Mt,At]};let _=class{constructor(e=0,i=0,s=0,r="#ff6600"){n(this,"x");n(this,"y");n(this,"r");n(this,"c");n(this,"vx");n(this,"vy");n(this,"originX");n(this,"originY");this.x=e,this.y=i,this.r=s,this.c=r,this.vx=0,this.vy=0,this.originX=e,this.originY=i}set(e,i){this.x=e,this.y=i}think(e,i){let s=this.x-e.x,r=this.y-e.y;if(Math.sqrt(s*s+r*r)<e.r){let o=Math.atan2(r,s),h=e.x+Math.cos(o)*e.r,L=e.y+Math.sin(o)*e.r;this.vx+=h-this.x,this.vy+=L-this.y}this.vx+=i.spring.vx(this.x,this.originX,i),this.vy+=i.spring.vy(this.y,this.originY,i),this.vx*=i.friction.vx(this.x,this.originX,i),this.vy*=i.friction.vy(this.x,this.originX,i),this.x+=this.vx,this.y+=this.vy}render(e){e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI),e.fillStyle=this.c,e.fill(),e.closePath()}},q,ue,ce,Ce;const Bt={settings:{name:"arrow"},init(t){ue=new Dt(150,150),q=new H(t),ce=new _(100,100,20,"#eebe0a"),Ce=new g},render(t){ce.set(q.x,q.y),ce.render(t),ue.ratateTo(q),ue.draw(t)},destroy(){Ce.destroy(),q.destroy()}};let Dt=class{constructor(e=0,i=0,s="#ffff00"){n(this,"x");n(this,"y");n(this,"color","");n(this,"rotation",0);this.x=e,this.y=i,this.color=s,this.rotation=0}ratateTo({x:e,y:i}){let s=e-this.x,r=i-this.y;this.rotation=Math.atan2(r,s)}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=2,e.fillStyle=this.color,e.beginPath(),e.moveTo(-50,-25),e.lineTo(0,-25),e.lineTo(0,-50),e.lineTo(50,0),e.lineTo(0,50),e.lineTo(0,25),e.lineTo(-50,25),e.lineTo(-50,-25),e.closePath(),e.fill(),e.stroke(),e.restore()}},F={x:0,y:0},k={x:0,y:0},G;const Wt={settings:{name:"distance"},init(t,e){G=new H(t),F.x=Math.random()*e.width,F.y=Math.random()*e.height,k.x=Math.random()*e.width,k.y=Math.random()*e.height},render(t){t.fillStyle="#000000",t.fillRect(F.x-2,F.y-2,4,4),t.fillStyle="#ff0000",t.fillRect(k.x-2,k.y-2,4,4),t.font="30px Arial",t.fillText(`points distance: ${Be(F,k)}`,10,100),t.fillText(`mouse distance: ${Be(G,k)}`,10,130),t.beginPath(),t.moveTo(k.x,k.y),t.lineTo(G.x,G.y),t.closePath(),t.stroke()},destroy(){G.destroy()}};function Be(t,e){let i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s).toFixed(2)}class v{constructor(e=100,i=100,s=20,r="#ff0000"){n(this,"x",200);n(this,"y",100);n(this,"scaleX",1);n(this,"scaleY",1);n(this,"lineWidth",1);n(this,"color","");n(this,"radius",10);n(this,"rotation",0);this.x=e,this.y=i,this.color=r,this.radius=s}ratateTo({x:e,y:i}){let s=e-this.x,r=i-this.y;this.rotation=Math.atan2(r,s)}render(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.scale(this.scaleX,this.scaleY),e.lineWidth=this.lineWidth,e.fillStyle=this.color,e.beginPath(),e.arc(0,0,this.radius,0,Math.PI*2,!0),e.closePath(),e.fill(),this.lineWidth>0&&e.stroke(),e.restore()}}let T,A={angle:0,centrY:200,range:50,xspeed:3,yspeed:.05},oe,P={angle:0,centryScale:1,range:.5,speed:.1},ae,f={angleX:0,angleY:0,range:150,centerX:0,centerY:0,xspeed:.07,yspeed:.11};const jt={settings:{name:"liner"},init(t,e){T=new v(0,0),oe=new v(e.width/2,e.height/2,30,"#00ff00"),ae=new v(e.width/2,e.height/2,30,"#0000ff"),f.centerX=e.width/2,f.centerY=e.height/2},render(t,e){return A.angle+=A.yspeed,T.x+=A.xspeed,T.y=A.centrY/2+Math.sin(A.angle)*A.range,T.x>e.width+T.radius&&(T.x=-T.radius,A.range+=1),oe.scaleX=P.centryScale+Math.sin(P.angle)*P.range,oe.scaleY=P.centryScale+Math.sin(P.angle)*P.range,P.angle+=P.speed,ae.x=f.centerX+Math.sin(f.angleX)*f.range,ae.y=f.centerY+Math.sin(f.angleY)*f.range,f.angleX+=f.xspeed,f.angleY+=f.yspeed,f.range+=.01,oe.render(t),T.render(t),ae.render(t),()=>{}},destroy(){}};let E,j,z=0,De=0,We=0,je=100,Rt=.02;const Xt={settings:{name:"circle"},init(t,e){E=new v(200,200,40,"#11bbff"),j=new v(200,200,20,"#00ffff"),De=e.width/2,We=e.height/2},render(t){z+=Rt,E.x=De+Math.sin(z)*je,E.y=We+Math.cos(z)*je,j.x=E.x+Math.sin(z*2)*100,j.y=E.y+Math.cos(z*2)*40,E.y-j.y>0?(j.render(t),E.render(t)):(E.render(t),j.render(t))},destroy(){}};let fe,ye,he,le,pe,p=40,S=0;const Yt={settings:{name:"waves"},init(t,e){fe=new v(e.width/2,e.height/2,p,"#ffee00"),ye=new v(e.width/2,e.height/2,p,"#00ff00"),he=new v(e.width/2,e.height/2,p,"#0000ff"),le=new v(e.width/2,e.height/2,p,"#f0f0f0"),pe=new v(e.width/2,e.height/2,p)},render(t,e){S+=.03;let i=e.width/2,s=e.height/2;fe.x=i+Math.sin(S*.2)*(i-p),ye.y=s+Math.sin(S*.3)*(s-p),he.y=s+Math.sin(S*.4)*(s-p),he.x=i+Math.sin(S)*(i-p),le.y=s+Math.sin(S*.5)*(s-p),le.x=i+Math.cos(S*.2)*(i-p),pe.x=i+Math.sin(S*2)*(i-p),fe.render(t),ye.render(t),he.render(t),le.render(t),pe.render(t)},destroy(){}},Ht=[Wt,Xt,jt,Yt,Bt],Nt={name:"chapter 3",expamples:Ht};let O,me,U,qt={friction:Ot(),spring:zt()};const Ft={settings:{name:"balls_2"},init:(t,e)=>{O=new H(t),me=Gt(5e3,e),U=new _(100,100,20,"#eebe0a")},render:(t,e)=>{U.set(O.x,O.y),U.render(t),me.forEach(i=>{i.think(U,{...e,...qt}),i.render(t)})},destroy(){O.destroy(),O=void 0,me=void 0,U=void 0}};function Gt(t,e){let i=[],s=e.width/10,r=e.height/10;for(let a=0;a<t;a++){let o=s+Math.random()*(e.width-s*2),h=r+Math.random()*(e.height-r*2);i.push(new _(o,h,o>e.width/2?2:3,o>e.width/2?"#00bcd4":"#bdb76b"))}return i}function zt(){let t=0,e=0;return{vx(i,s,r){let a=s>r.width/2?t:e;return-(i-s)*a},vy(i,s,r){let a=s>r.width/2?t:e;return-(i-s)*a}}}function Ot(){let t=.99,e=.4;return{vx(i,s,r){return s>r.width/2?t:e},vy(i,s,r){return s>r.width/2?t:e}}}let J,ge,V,Ut={friction:Zt(.5),spring:Qt(.01)};const Jt={settings:{name:"balls"},init:(t,e)=>{J=new H(t),ge=Vt(5e3,e),V=new _(100,100,20,"#eebe0a")},render:t=>{V.set(J.x,J.y),V.render(t),ge.forEach(e=>{e.think(V,Ut),e.render(t)})},destroy(){J.destroy(),J=void 0,ge=void 0,V=void 0}};function Vt(t,e){let i=[],s=e.width/10,r=e.height/10;for(let a=0;a<t;a++){let o=s+Math.random()*(e.width-s*2),h=r+Math.random()*(e.height-r*2);i.push(new _(o,h,2,"#ff0000"))}return i}function Qt(t){return{vx(e,i){return-(e-i)*t},vy(e,i){return-(e-i)*t}}}function Zt(t){return{vx(){return t},vy(){return t}}}let Q,we,Z,Kt={friction:fi(.8),spring:ci(.007)};const ei={settings:{name:"p_dor"},init:t=>{Q=new H(t),we=si().map(e=>(e.set(100+Math.random()*500,100+Math.random()*400),e)),Z=new _(100,100,20,"#eebe0a")},render:t=>{Z.set(Q.x,Q.y),Z.render(t),we.forEach(e=>{e.think(Z,Kt),e.render(t)})},destroy(){Q.destroy(),Q=void 0,we=void 0,Z=void 0}},ti="#ff0000",ii=2,u=(t,e,i=ti)=>new _(t,e,ii,i),l=20;function si(){return[...ri(),...ni(),...oi(),...ai(),...hi(),...li(),...di()]}function ri(){return[...y(200,250,l,t=>u(t,100)),...y(100,150,l,t=>u(225,t))]}function ni(){return[...y(100,150,l,t=>u(270,t)),...re(270,135,l),...y(100,150,l,t=>u(310,t))]}function oi(){return[...y(170,220,l,t=>u(150,t)),...y(150,170,l,t=>u(t,170)),...y(170,220,l,t=>u(170,t))]}function ai(){return[...y(170,220,l,t=>u(190,t)),...ui(190,220,l),...y(170,220,l,t=>u(230,t))]}function hi(){return[...y(170,220,l,t=>u(260,t)),...re(260,195,l,25)]}function li(){return[...re(325,185,l,15,1),...y(180,210,l,t=>u(310,t)),...y(180,210,l,t=>u(340,t)),...re(325,205,l,15,2)]}function di(){return[...y(170,220,l,t=>u(370,t)),...re(370,185,l,15,1.5)]}function re(t,e,i,s=15,r=1.5){let a=[];for(var o=0;o<=i;o++)a.push(u(t+s*Math.cos(Math.PI*o/i+Math.PI*r),e+s*Math.sin(Math.PI*o/i+Math.PI*r)));return a}function ui(t,e,i){let s=[];for(var r=0;r<i;r++)s.push(u(t+2*r,e-2.5*r));return s}function y(t,e,i,s){let r=e-t,a=Math.trunc(r/(i-1)),o=[];for(let h=t;h<=e;h+=a)o.push(s(h));return o}function ci(t){return{vx(e,i){return-(e-i)*t},vy(e,i){return-(e-i)*t}}}function fi(t){return{vx(){return t},vy(){return t}}}let ve,K,R,yi={friction:wi(.99),spring:gi(0)};const pi={settings:{name:"balls_touch"},init:(t,e)=>{R=new St(t),ve=mi(2e3,e),K=new _(e.width/2,e.height/2,30,"#eebe0a")},render:t=>{R.pressed&&K.set(R.x,R.y),K.render(t),ve.forEach(e=>{e.think(K,yi),e.render(t)})},destroy(){R.destroy(),R=void 0,ve=void 0,K=void 0}};function mi(t,e){let i=[],s=e.width/20,r=e.height/20;for(let a=0;a<t;a++){let o=s+Math.random()*(e.width-s*2),h=r+Math.random()*(e.height-r*2);i.push(new _(o,h,2,"#00bcd4"))}return i}function gi(t){return{vx(e,i){return-(e-i)*t},vy(e,i){return-(e-i)*t}}}function wi(t){return{vx(){return t},vy(){return t}}}const vi=[Jt,Ft,ei,pi],bi={name:"chapter_2",expamples:vi};let Re;const Mi={settings:{name:"curves",injectors:[B]},init(t,e){Re=new _i(e.injectors.mouse,e)},render(t){Re.draw(t)},destroy(){}};let _i=class{constructor(e,i){n(this,"points",[]);n(this,"point",{x0:0,y0:0,x1:0,y1:0});n(this,"mouse");this.mouse=e,this.points=de(20,()=>({x:Math.random()*i.width,y:Math.random()*i.height})),this.point={x0:Math.random()*i.width,y0:Math.random()*i.height,x1:Math.random()*i.width,y1:Math.random()*i.height}}draw(e){e.beginPath(),e.strokeStyle="#00ff00",e.lineWidth=10,e.lineCap="butt",e.lineJoin="round",e.miterLimit=20,e.moveTo(this.point.x0,this.point.y0),e.quadraticCurveTo(this.mouse.x,this.mouse.y,this.point.x1,this.point.y1),e.stroke(),e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=5,e.lineCap="butt",e.lineJoin="round",e.miterLimit=10,e.moveTo(this.points[0].x,this.points[0].y);for(let i=1;i<this.points.length-1;i+=2)e.quadraticCurveTo(this.points[i].x,this.points[i].y,this.points[i+1].x,this.points[i+1].y);e.stroke()}},Xe={x:100,y:100},Ye={x:200,y:200},be={x:350,y:150,r:0},Me={x:350,y:150,r:50};const ki={settings:{name:"gradient"},init(){},render(t){let e=t.createLinearGradient(Xe.x,Xe.y,Ye.x,Ye.y);e.addColorStop(0,"#ffffff"),e.addColorStop(.5,"#0000ff"),e.addColorStop(1,"#ff0000"),t.fillStyle=e,t.fillRect(100,100,200,200);let i=t.createRadialGradient(be.x,be.y,be.r,Me.x,Me.y,Me.r);i.addColorStop(0,"#000000"),i.addColorStop(1,"rgba(0, 0, 0, 0)"),t.fillStyle=i,t.fillRect(300,100,100,100)},destroy(){}};let ee={status:"new",data:new Image},He,Ne;const Ti={settings:{name:"image"},init(){ee.data.src="./vovka.png",ee.data.onload=()=>{ee.status="ready"},He=document.getElementById("picture"),Ne=document.getElementById("video")},render(t){ee.status==="ready"&&t.drawImage(ee.data,80,0,135,135,90,90,65,65),t.drawImage(He,230,20,80,140,200,130,100,120),t.drawImage(Ne,300,150,100,100)},destroy(){}};let qe;const Pi={settings:{name:"line",injectors:[B]},init(t,e){qe=new Si(e.injectors.mouse)},render(t){return qe.draw(t),Ei},destroy(){}};function Ei(){}let Si=class{constructor(e){n(this,"mouse");n(this,"prevPos");this.mouse=e}draw(e){b(this.prevPos)&&this.mouse.leftButtonDown?(e.strokeStyle="#ff0000",e.lineWidth=2,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.beginPath(),e.moveTo(this.mouse.x,this.mouse.y),this.prevPos=this.mouse.copyPos()):!b(this.prevPos)&&this.mouse.leftButtonDown?(e.lineTo(this.mouse.x,this.mouse.y),this.prevPos=this.mouse.copyPos(),e.stroke()):!b(this.prevPos)&&!this.mouse.leftButtonDown&&(this.prevPos=null)}},Fe;const $i={settings:{name:"multi_curves",injectors:[B]},init(t,e){Fe=new Li(e.injectors.mouse,e)},render(t){Fe.draw(t)},destroy(){}};let Li=class{constructor(e,i){n(this,"count",10);n(this,"mouse");n(this,"points",[]);n(this,"ctrlPoint",{});this.mouse=e,this.points=de(this.count,()=>({x:Math.random()*i.width,y:Math.random()*i.height}))}draw(e){e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=5,e.lineCap="butt",e.lineJoin="round",e.miterLimit=10;let i=(this.points[0].x+this.points[this.count-1].x)/2,s=(this.points[0].y+this.points[this.count-1].y)/2;e.moveTo(i,s);let r;for(r=1;r<this.points.length-2;r++){let a=(this.points[r].x+this.points[r+1].x)/2,o=(this.points[r].y+this.points[r+1].y)/2;e.quadraticCurveTo(this.points[r].x,this.points[r].y,a,o)}e.quadraticCurveTo(this.points[r].x,this.points[r].y,i,s),e.stroke(),e.beginPath(),e.strokeStyle="#0000ff",e.lineWidth=3,e.arc(100,200,40,0,Math.PI*2,!0),e.closePath(),e.stroke(),e.beginPath(),e.strokeStyle="#00ff44",e.lineWidth=5,e.moveTo(200,200),e.arcTo(200,50,150,200,20),e.stroke()}};class Ii{static colorToRGB(e,i=1){let s;typeof e=="string"&&e[0]==="#"&&(s=parseInt(e.slice(1),16));var r=s>>16&255,a=s>>8&255,o=s&255,h=i<0?0:i>1?1:i;return h===1?`rgb(${r},${a},${o})`:`rgb(${r},${a},${o},${h})`}static parse(e,i=!1){return i===!0?typeof e=="number"?e|0:(typeof e=="string"&&e[0]==="#"&&(e=e.slice(1)),parseInt(e,16)):(typeof e=="number"&&(e="#"+("00000"+(e|0).toString(16)).substr(-6)),e)}}let Ge,ze;const Ai={settings:{name:"pixel",injectors:[B]},init(t,e,i){ze=i.getImageData(0,0,e.width,e.height),Ge=new Ci(e.injectors.mouse)},render(t){return Ge.draw(t,ze),xi},destroy(){}};function xi(){}let Ci=class{constructor(e){n(this,"mouse");n(this,"prevPos");n(this,"brush_size",25);n(this,"brush_density",50);n(this,"brush_color",0);this.mouse=e}draw(e,i){let s=i.data;if(b(this.prevPos)&&this.mouse.leftButtonDown)this.brush_color=Ii.parse(Math.random()*16777215,!0),this.prevPos=this.mouse.copyPos();else if(!b(this.prevPos)&&this.mouse.leftButtonDown){for(let r=0;r<this.brush_density;r++){let a=Math.random()*Math.PI*2,o=Math.random()*this.brush_size,h=this.mouse.x+Math.cos(a)*o|0,L=this.mouse.y+Math.sin(a)*o|0,I=(h+L*i.width)*4;s[I]=this.brush_color>>16&255,s[I+1]=this.brush_color>>8&255,s[I+2]=this.brush_color&255,s[I+3]=255}e.putImageData(i,0,0),this.prevPos=this.mouse.copyPos()}else!b(this.prevPos)&&!this.mouse.leftButtonDown&&(this.prevPos=null)}},Oe;const Bi={settings:{name:"shapes",injectors:[B]},init(t,e){Oe=new Di(e.injectors.mouse,e)},render(t){Oe.draw(t)},destroy(){}};class Di{constructor(e,i){n(this,"count",10);n(this,"mouse");n(this,"points",[]);n(this,"ctrlPoint",{});this.mouse=e,this.points=de(this.count,()=>({x:Math.random()*i.width,y:Math.random()*i.height}))}draw(e){e.beginPath(),e.fillStyle="#ff0000";let i=(this.points[0].x+this.points[this.count-1].x)/2,s=(this.points[0].y+this.points[this.count-1].y)/2;e.moveTo(i,s);let r;for(r=1;r<this.points.length-2;r++){let a=(this.points[r].x+this.points[r+1].x)/2,o=(this.points[r].y+this.points[r+1].y)/2;e.quadraticCurveTo(this.points[r].x,this.points[r].y,a,o)}e.quadraticCurveTo(this.points[r].x,this.points[r].y,i,s),e.fill(),e.beginPath(),e.fillStyle="#00ff44",e.moveTo(100,100),e.arcTo(200,50,150,200,20),e.fill()}}const Wi={name:"chapter 4",expamples:[Ai,Ti,ki,Bi,$i,Mi,Pi]};let te,$,M=0;const ji={settings:{name:"acceleration",injectors:[B,Pe]},init(t,e){$=new Ri(e.width/2,e.height/2),M=0,te=e.injectors.keyboard},render(t){te.pressed(Y.ArrowLeft)&&($.rotation-=2*Math.PI/180),te.pressed(Y.ArrowRight)&&($.rotation+=2*Math.PI/180),te.pressed(Y.ArrowUp)&&M<4&&(M+=.2),te.pressed(Y.ArrowDown)&&(M-=.2),M<0?M=0:M-=.05;let e=Math.cos($.rotation)*M,i=Math.sin($.rotation)*M;$.x+=e,$.y+=i,$.draw(t)},destroy(){}};let Ri=class{constructor(e=0,i=0,s="#ffff00"){n(this,"x");n(this,"y");n(this,"color","");n(this,"rotation",0);this.x=e,this.y=i,this.color=s,this.rotation=0}ratateTo({x:e,y:i}){let s=e-this.x,r=i-this.y;this.rotation=Math.atan2(r,s)}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=2,e.fillStyle=this.color,e.strokeStyle="#000000",e.beginPath(),e.moveTo(-50,-25),e.lineTo(0,-25),e.lineTo(0,-50),e.lineTo(50,0),e.lineTo(0,50),e.lineTo(0,25),e.lineTo(-50,25),e.lineTo(-50,-25),e.closePath(),e.fill(),e.stroke(),e.restore()}};class Xi{constructor(e=0,i=0,s="#ffff00"){n(this,"x");n(this,"y");n(this,"color","");n(this,"rotation",0);this.x=e,this.y=i,this.color=s,this.rotation=0}ratateTo({x:e,y:i}){let s=e-this.x,r=i-this.y;this.rotation=Math.atan2(r,s)}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=2,e.fillStyle=this.color,e.strokeStyle="#000000",e.beginPath(),e.moveTo(-50,-25),e.lineTo(0,-25),e.lineTo(0,-50),e.lineTo(50,0),e.lineTo(0,50),e.lineTo(0,25),e.lineTo(-50,25),e.lineTo(-50,-25),e.closePath(),e.fill(),e.stroke(),e.restore()}}let _e,x,ke=.05,Ue=0,Je=0;const Yi={settings:{name:"mouse_1",injectors:[B,Pe]},init(t,e){x=new Xi(e.width/2,e.height/2),ke=.05,_e=e.injectors.mouse},render(t){let e=_e.x-x.x,i=_e.y-x.y,s=Math.atan2(i,e),r=Math.cos(s)*ke,a=Math.sin(s)*ke;x.rotation=s,Ue+=r,Je+=a,x.x+=Ue,x.y+=Je,x.draw(t)},destroy(){}},Hi={name:"chapter 5",expamples:[Yi,ji]},Ni=50,ie=10;let X,se=[];const qi={settings:{name:"removal"},init(t,e){X=Ve(e),se=Qe(X)},render(t){se=Fi(se,X),se.forEach(e=>{e.think(),e.render(t)}),X.render(t)},destroy(){},resize(t,e){X=Ve(e),se=Qe(X)}};function Fi(t,e){return t.filter(i=>!(i.x-i.radius>e.right||i.x+i.radius<e.x||i.y-i.radius>e.bottom||i.y+i.radius<e.y))}function Ve(t){return new C(100,100,t.width-200,t.height-200,"#00ff00")}function Qe(t){return de(Ni,()=>new et(ie+t.x+Math.random()*(t.right-2*ie),ie+t.y+Math.random()*(t.bottom-2*ie),ie,"#ff6600",new vt(Math.random()*2-1,Math.random()*2-1)))}const Gi={name:"chapter 6",expamples:[qi]};mt([Gi,Hi,Wi,Nt,bi,Ct]);
