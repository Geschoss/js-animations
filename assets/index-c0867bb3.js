var Ie=Object.defineProperty;var Xe=(t,e,s)=>e in t?Ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var o=(t,e,s)=>(Xe(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function Ee(t,e){return e.expamples.find(({settings:s})=>s.name===t)}function Le(t,e){let s=new URL(window.location.href);s.searchParams.set(t,e),window.history.pushState("Animations",t,s)}function Ye(){let t=new URLSearchParams(window.location.search);return{chapter:t.get("chapter")||"",example:t.get("example")||""}}function Be(t,e){let s=e[t];return s??Object.values(e)[0]}function je(t,e){let s=Ee(t,e);return s??e.expamples[0]}const De=()=>{let t={chapters:document.getElementById("chapters_menu"),examples:document.getElementById("examples_menu"),canvas:document.getElementById("canvas"),body:document.body};return{...t,updateExamplesMenu:We(t.examples),updateChaptersMenu:qe(t.chapters)}};function We(t){return(e,s,n)=>{Oe(t);let i;e.expamples.forEach(l=>{let r=document.createElement("div");r.classList.add("menu__item"),r.innerText=l.settings.name,s===l&&(i=r,i.classList.add("menu__item_selected")),r.addEventListener("click",()=>{i!==r&&(i&&i.classList.remove("menu__item_selected"),i=r,i.classList.add("menu__item_selected"),Le("example",l.settings.name),n(l.settings.name))}),t.appendChild(r)})}}function qe(t){return(e,s,n)=>{let i;Object.keys(e).forEach(l=>{let r=e[l],a=document.createElement("div");a.classList.add("menu__item"),a.innerText=r.name,s===r&&(i=a,i.classList.add("menu__item_selected")),a.addEventListener("click",()=>{i!==a&&(i&&i.classList.remove("menu__item_selected"),i=a,i.classList.add("menu__item_selected"),Le("chapter",l),n(l))}),t.appendChild(a)}),n(s.name)}}function Oe(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function p(t){return t==null||t==null}function Re(t){return Object.values(t)}function oe(t,e){let s=[];for(let n=0;n<t;n++)s.push(e(n,t));return s}function Ae(t){const e=t.reduce((y,S)=>({...y,[S.name]:S}),{}),s=De(),n=Ye(),i=s.canvas.getContext("2d");let l=Be(n.chapter,e),r,a,k,x={width:s.body.offsetWidth,height:s.body.offsetHeight,injectors:{}},w=x;s.updateChaptersMenu(e,l,Te);function Te(y){le(),l=e[y],r=je(n.example,l),s.updateExamplesMenu(l,r,$e),ae()}function $e(y){le(),r=Ee(y,l),ae()}function le(){a&&cancelAnimationFrame(a),r&&r.inited&&(p(w.injectors)||Re(w.injectors).map(y=>y.destroy()),r.destroy(s.canvas),r.inited=!1),w=x}function ae(){var S;if(r.inited)return;let y=((S=r.settings.injectors)==null?void 0:S.reduce((Ce,de)=>({...Ce,[de.name]:Fe(de,{canvas:s.canvas})}),{}))||{};w={width:r.settings.width||s.body.offsetWidth,height:r.settings.height||s.body.offsetHeight,injectors:y},s.canvas.width=w.width,s.canvas.height=w.height,r.init(s.canvas,w,i),r.inited=!0,he()}function he(){p(k)?Se():k(),k=r.render(i,w)||null,a=requestAnimationFrame(he)}function Se(){i.clearRect(0,0,s.canvas.width,s.canvas.height)}}function Fe(t,e){let s=t.deps.map(({name:n})=>{let i=e[n];if(p(i))throw new Error(`${t.name} has unknow dep ${n}`);return i});return new t.instance(...s)}class ${constructor(e){o(this,"x",0);o(this,"y",0);o(this,"leftButtonDown",!1);o(this,"rect");o(this,"canvas");o(this,"mousedown",e=>{this.leftButtonDown=!0});o(this,"mouseup",e=>{this.leftButtonDown=!1});o(this,"move",e=>{let s=0,n=0;e.pageX||e.pageY?(s=e.pageX,n=e.pageY):(s=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),s-=this.canvas.offsetLeft,n-=this.canvas.offsetTop,this.x=s,this.y=n});this.canvas=e,e.addEventListener("mousemove",this.move,!1),e.addEventListener("mousedown",this.mousedown,!1),e.addEventListener("mouseup",this.mouseup,!1)}destroy(){this.canvas.removeEventListener("mousemove",this.move,!1),this.canvas.removeEventListener("mousedown",this.mousedown,!1),this.canvas.removeEventListener("mouseup",this.mouseup,!1)}copyPos(){return{x:this.x,y:this.y}}}const J={name:"mouse",instance:$,deps:[{name:"canvas"}]};let g=class{constructor(e=0,s=0,n=0,i="#ff6600"){o(this,"x");o(this,"y");o(this,"r");o(this,"c");o(this,"vx");o(this,"vy");o(this,"originX");o(this,"originY");this.x=e,this.y=s,this.r=n,this.c=i,this.vx=0,this.vy=0,this.originX=e,this.originY=s}set(e,s){this.x=e,this.y=s}think(e,s){let n=this.x-e.x,i=this.y-e.y;if(Math.sqrt(n*n+i*i)<e.r){let r=Math.atan2(i,n),a=e.x+Math.cos(r)*e.r,k=e.y+Math.sin(r)*e.r;this.vx+=a-this.x,this.vy+=k-this.y}this.vx+=s.spring.vx(this.x,this.originX,s),this.vy+=s.spring.vy(this.y,this.originY,s),this.vx*=s.friction.vx(this.x,this.originX,s),this.vy*=s.friction.vy(this.x,this.originX,s),this.x+=this.vx,this.y+=this.vy}render(e){e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI),e.fillStyle=this.c,e.fill(),e.closePath()}};class Je{constructor(e){o(this,"x",0);o(this,"y",0);o(this,"pressed",!1);o(this,"rect");o(this,"canvas");o(this,"touch_start",()=>{this.pressed=!0});o(this,"touch_end",()=>{this.pressed=!1,this.x=0,this.y=0});o(this,"touch_move",e=>{let s=0,n=0,i=e.touches[0];i.pageX||i.pageY?(s=i.pageX,n=i.pageY):(s=i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=i.clientY+document.body.scrollTop+document.documentElement.scrollTop),s-=this.canvas.offsetLeft,n-=this.canvas.offsetTop,this.x=s,this.y=n});this.canvas=e,e.addEventListener("touchstart",this.touch_start,!1),e.addEventListener("touchmove",this.touch_move,!1),e.addEventListener("touchend",this.touch_end,!1)}destroy(){this.canvas.removeEventListener("touchstart",this.touch_start,!1),this.canvas.removeEventListener("touchmove",this.touch_move,!1),this.canvas.removeEventListener("touchend",this.touch_end,!1)}}class ze{constructor(){o(this,"keydown",e=>{console.log(e.code)});o(this,"keyup",e=>{console.log(e.code)});window.addEventListener("keydown",this.keydown,!1),window.addEventListener("keyup",this.keyup,!1)}destroy(){window.removeEventListener("keydown",this.keydown,!1),window.removeEventListener("keyup",this.keyup,!1)}}let C,K,U,ue;const Ne={settings:{name:"arrow"},init(t){K=new Ge(150,150),C=new $(t),U=new g(100,100,20,"#eebe0a"),ue=new ze},render(t){U.set(C.x,C.y),U.render(t),K.ratateTo(C),K.draw(t)},destroy(){ue.destroy(),C.destroy()}};class Ge{constructor(e=0,s=0,n="#ffff00"){o(this,"x");o(this,"y");o(this,"color","");o(this,"rotation",0);this.x=e,this.y=s,this.color=n,this.rotation=0}ratateTo({x:e,y:s}){let n=e-this.x,i=s-this.y;this.rotation=Math.atan2(i,n)}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=2,e.fillStyle=this.color,e.beginPath(),e.moveTo(-50,-25),e.lineTo(0,-25),e.lineTo(0,-50),e.lineTo(50,0),e.lineTo(0,50),e.lineTo(0,25),e.lineTo(-50,25),e.lineTo(-50,-25),e.closePath(),e.fill(),e.stroke(),e.restore()}}let I={x:0,y:0},v={x:0,y:0},X;const He={settings:{name:"distance"},init(t,e){X=new $(t),I.x=Math.random()*e.width,I.y=Math.random()*e.height,v.x=Math.random()*e.width,v.y=Math.random()*e.height},render(t){t.fillStyle="#000000",t.fillRect(I.x-2,I.y-2,4,4),t.fillStyle="#ff0000",t.fillRect(v.x-2,v.y-2,4,4),t.font="30px Arial",t.fillText(`points distance: ${ce(I,v)}`,10,100),t.fillText(`mouse distance: ${ce(X,v)}`,10,130),t.beginPath(),t.moveTo(v.x,v.y),t.lineTo(X.x,X.y),t.closePath(),t.stroke()},destroy(){X.destroy()}};function ce(t,e){let s=t.x-e.x,n=t.y-e.y;return Math.sqrt(s*s+n*n).toFixed(2)}class m{constructor(e=100,s=100,n=20,i="#ff0000"){o(this,"x",200);o(this,"y",100);o(this,"scaleX",1);o(this,"scaleY",1);o(this,"lineWidth",1);o(this,"color","");o(this,"radius",10);o(this,"rotation",0);this.x=e,this.y=s,this.color=i,this.radius=n}ratateTo({x:e,y:s}){let n=e-this.x,i=s-this.y;this.rotation=Math.atan2(i,n)}render(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.scale(this.scaleX,this.scaleY),e.lineWidth=this.lineWidth,e.fillStyle=this.color,e.beginPath(),e.arc(0,0,this.radius,0,Math.PI*2,!0),e.closePath(),e.fill(),this.lineWidth>0&&e.stroke(),e.restore()}}let _,E={angle:0,centrY:200,range:50,xspeed:3,yspeed:.05},z,M={angle:0,centryScale:1,range:.5,speed:.1},N,u={angleX:0,angleY:0,range:150,centerX:0,centerY:0,xspeed:.07,yspeed:.11};const Ke={settings:{name:"liner"},init(t,e){_=new m(0,0),z=new m(e.width/2,e.height/2,30,"#00ff00"),N=new m(e.width/2,e.height/2,30,"#0000ff"),u.centerX=e.width/2,u.centerY=e.height/2},render(t,e){return E.angle+=E.yspeed,_.x+=E.xspeed,_.y=E.centrY/2+Math.sin(E.angle)*E.range,_.x>e.width+_.radius&&(_.x=-_.radius,E.range+=1),z.scaleX=M.centryScale+Math.sin(M.angle)*M.range,z.scaleY=M.centryScale+Math.sin(M.angle)*M.range,M.angle+=M.speed,N.x=u.centerX+Math.sin(u.angleX)*u.range,N.y=u.centerY+Math.sin(u.angleY)*u.range,u.angleX+=u.xspeed,u.angleY+=u.yspeed,u.range+=.01,z.render(t),_.render(t),N.render(t),()=>{}},destroy(){}};let b,L,Y=0,fe=0,me=0,ye=100,Ue=.02;const Qe={settings:{name:"circle"},init(t,e){b=new m(200,200,40,"#11bbff"),L=new m(200,200,20,"#00ffff"),fe=e.width/2,me=e.height/2},render(t){Y+=Ue,b.x=fe+Math.sin(Y)*ye,b.y=me+Math.cos(Y)*ye,L.x=b.x+Math.sin(Y*2)*100,L.y=b.y+Math.cos(Y*2)*40,b.y-L.y>0?(L.render(t),b.render(t)):(b.render(t),L.render(t))},destroy(){}};let Q,V,G,H,Z,f=40,P=0;const Ve={settings:{name:"waves"},init(t,e){Q=new m(e.width/2,e.height/2,f,"#ffee00"),V=new m(e.width/2,e.height/2,f,"#00ff00"),G=new m(e.width/2,e.height/2,f,"#0000ff"),H=new m(e.width/2,e.height/2,f,"#f0f0f0"),Z=new m(e.width/2,e.height/2,f)},render(t,e){P+=.03;let s=e.width/2,n=e.height/2;Q.x=s+Math.sin(P*.2)*(s-f),V.y=n+Math.sin(P*.3)*(n-f),G.y=n+Math.sin(P*.4)*(n-f),G.x=s+Math.sin(P)*(s-f),H.y=n+Math.sin(P*.5)*(n-f),H.x=s+Math.cos(P*.2)*(s-f),Z.x=s+Math.sin(P*2)*(s-f),Q.render(t),V.render(t),G.render(t),H.render(t),Z.render(t)},destroy(){}},Ze=[He,Qe,Ke,Ve,Ne],et={name:"chapter 3",expamples:Ze};let B,ee,j,tt={friction:rt(),spring:nt()};const st={settings:{name:"balls_2"},init:(t,e)=>{B=new $(t),ee=it(5e3,e),j=new g(100,100,20,"#eebe0a")},render:(t,e)=>{j.set(B.x,B.y),j.render(t),ee.forEach(s=>{s.think(j,{...e,...tt}),s.render(t)})},destroy(){B.destroy(),B=void 0,ee=void 0,j=void 0}};function it(t,e){let s=[],n=e.width/10,i=e.height/10;for(let l=0;l<t;l++){let r=n+Math.random()*(e.width-n*2),a=i+Math.random()*(e.height-i*2);s.push(new g(r,a,r>e.width/2?2:3,r>e.width/2?"#00bcd4":"#bdb76b"))}return s}function nt(){let t=0,e=0;return{vx(s,n,i){let l=n>i.width/2?t:e;return-(s-n)*l},vy(s,n,i){let l=n>i.width/2?t:e;return-(s-n)*l}}}function rt(){let t=.99,e=.4;return{vx(s,n,i){return n>i.width/2?t:e},vy(s,n,i){return n>i.width/2?t:e}}}let D,te,W,ot={friction:dt(.5),spring:ht(.01)};const lt={settings:{name:"balls"},init:(t,e)=>{D=new $(t),te=at(5e3,e),W=new g(100,100,20,"#eebe0a")},render:t=>{W.set(D.x,D.y),W.render(t),te.forEach(e=>{e.think(W,ot),e.render(t)})},destroy(){D.destroy(),D=void 0,te=void 0,W=void 0}};function at(t,e){let s=[],n=e.width/10,i=e.height/10;for(let l=0;l<t;l++){let r=n+Math.random()*(e.width-n*2),a=i+Math.random()*(e.height-i*2);s.push(new g(r,a,2,"#ff0000"))}return s}function ht(t){return{vx(e,s){return-(e-s)*t},vy(e,s){return-(e-s)*t}}}function dt(t){return{vx(){return t},vy(){return t}}}let q,se,O,ut={friction:xt(.8),spring:kt(.007)};const ct={settings:{name:"p_dor"},init:t=>{q=new $(t),se=yt().map(e=>(e.set(100+Math.random()*500,100+Math.random()*400),e)),O=new g(100,100,20,"#eebe0a")},render:t=>{O.set(q.x,q.y),O.render(t),se.forEach(e=>{e.think(O,ut),e.render(t)})},destroy(){q.destroy(),q=void 0,se=void 0,O=void 0}},ft="#ff0000",mt=2,d=(t,e,s=ft)=>new g(t,e,mt,s),h=20;function yt(){return[...pt(),...gt(),...wt(),...vt(),..._t(),...Mt(),...bt()]}function pt(){return[...c(200,250,h,t=>d(t,100)),...c(100,150,h,t=>d(225,t))]}function gt(){return[...c(100,150,h,t=>d(270,t)),...F(270,135,h),...c(100,150,h,t=>d(310,t))]}function wt(){return[...c(170,220,h,t=>d(150,t)),...c(150,170,h,t=>d(t,170)),...c(170,220,h,t=>d(170,t))]}function vt(){return[...c(170,220,h,t=>d(190,t)),...Pt(190,220,h),...c(170,220,h,t=>d(230,t))]}function _t(){return[...c(170,220,h,t=>d(260,t)),...F(260,195,h,25)]}function Mt(){return[...F(325,185,h,15,1),...c(180,210,h,t=>d(310,t)),...c(180,210,h,t=>d(340,t)),...F(325,205,h,15,2)]}function bt(){return[...c(170,220,h,t=>d(370,t)),...F(370,185,h,15,1.5)]}function F(t,e,s,n=15,i=1.5){let l=[];for(var r=0;r<=s;r++)l.push(d(t+n*Math.cos(Math.PI*r/s+Math.PI*i),e+n*Math.sin(Math.PI*r/s+Math.PI*i)));return l}function Pt(t,e,s){let n=[];for(var i=0;i<s;i++)n.push(d(t+2*i,e-2.5*i));return n}function c(t,e,s,n){let i=e-t,l=Math.trunc(i/(s-1)),r=[];for(let a=t;a<=e;a+=l)r.push(n(a));return r}function kt(t){return{vx(e,s){return-(e-s)*t},vy(e,s){return-(e-s)*t}}}function xt(t){return{vx(){return t},vy(){return t}}}let ie,R,T,Et={friction:St(.99),spring:$t(0)};const Lt={settings:{name:"balls_touch"},init:(t,e)=>{T=new Je(t),ie=Tt(2e3,e),R=new g(e.width/2,e.height/2,30,"#eebe0a")},render:t=>{T.pressed&&R.set(T.x,T.y),R.render(t),ie.forEach(e=>{e.think(R,Et),e.render(t)})},destroy(){T.destroy(),T=void 0,ie=void 0,R=void 0}};function Tt(t,e){let s=[],n=e.width/20,i=e.height/20;for(let l=0;l<t;l++){let r=n+Math.random()*(e.width-n*2),a=i+Math.random()*(e.height-i*2);s.push(new g(r,a,2,"#00bcd4"))}return s}function $t(t){return{vx(e,s){return-(e-s)*t},vy(e,s){return-(e-s)*t}}}function St(t){return{vx(){return t},vy(){return t}}}const Ct=[lt,st,ct,Lt],It={name:"chapter_2",expamples:Ct};let pe;const Xt={settings:{name:"curves",injectors:[J]},init(t,e){pe=new Yt(e.injectors.mouse,e)},render(t){pe.draw(t)},destroy(){}};let Yt=class{constructor(e,s){o(this,"points",[]);o(this,"point",{x0:0,y0:0,x1:0,y1:0});o(this,"mouse");this.mouse=e,this.points=oe(20,()=>({x:Math.random()*s.width,y:Math.random()*s.height})),this.point={x0:Math.random()*s.width,y0:Math.random()*s.height,x1:Math.random()*s.width,y1:Math.random()*s.height}}draw(e){e.beginPath(),e.strokeStyle="#00ff00",e.lineWidth=10,e.lineCap="butt",e.lineJoin="round",e.miterLimit=20,e.moveTo(this.point.x0,this.point.y0),e.quadraticCurveTo(this.mouse.x,this.mouse.y,this.point.x1,this.point.y1),e.stroke(),e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=5,e.lineCap="butt",e.lineJoin="round",e.miterLimit=10,e.moveTo(this.points[0].x,this.points[0].y);for(let s=1;s<this.points.length-1;s+=2)e.quadraticCurveTo(this.points[s].x,this.points[s].y,this.points[s+1].x,this.points[s+1].y);e.stroke()}},ge={x:100,y:100},we={x:200,y:200},ne={x:350,y:150,r:0},re={x:350,y:150,r:50};const Bt={settings:{name:"gradient"},init(){},render(t){let e=t.createLinearGradient(ge.x,ge.y,we.x,we.y);e.addColorStop(0,"#ffffff"),e.addColorStop(.5,"#0000ff"),e.addColorStop(1,"#ff0000"),t.fillStyle=e,t.fillRect(100,100,200,200);let s=t.createRadialGradient(ne.x,ne.y,ne.r,re.x,re.y,re.r);s.addColorStop(0,"#000000"),s.addColorStop(1,"rgba(0, 0, 0, 0)"),t.fillStyle=s,t.fillRect(300,100,100,100)},destroy(){}};let A={status:"new",data:new Image},ve,_e;const jt={settings:{name:"image"},init(){A.data.src="./vovka.png",A.data.onload=()=>{A.status="ready"},ve=document.getElementById("picture"),_e=document.getElementById("video")},render(t){A.status==="ready"&&t.drawImage(A.data,80,0,135,135,90,90,65,65),t.drawImage(ve,230,20,80,140,200,130,100,120),t.drawImage(_e,300,150,100,100)},destroy(){}};let Me;const Dt={settings:{name:"line",injectors:[J]},init(t,e){Me=new qt(e.injectors.mouse)},render(t){return Me.draw(t),Wt},destroy(){}};function Wt(){}let qt=class{constructor(e){o(this,"mouse");o(this,"prevPos");this.mouse=e}draw(e){p(this.prevPos)&&this.mouse.leftButtonDown?(e.strokeStyle="#ff0000",e.lineWidth=2,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.beginPath(),e.moveTo(this.mouse.x,this.mouse.y),this.prevPos=this.mouse.copyPos()):!p(this.prevPos)&&this.mouse.leftButtonDown?(e.lineTo(this.mouse.x,this.mouse.y),this.prevPos=this.mouse.copyPos(),e.stroke()):!p(this.prevPos)&&!this.mouse.leftButtonDown&&(this.prevPos=null)}},be;const Ot={settings:{name:"multi_curves",injectors:[J]},init(t,e){be=new Rt(e.injectors.mouse,e)},render(t){be.draw(t)},destroy(){}};let Rt=class{constructor(e,s){o(this,"count",10);o(this,"mouse");o(this,"points",[]);o(this,"ctrlPoint",{});this.mouse=e,this.points=oe(this.count,()=>({x:Math.random()*s.width,y:Math.random()*s.height}))}draw(e){e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=5,e.lineCap="butt",e.lineJoin="round",e.miterLimit=10;let s=(this.points[0].x+this.points[this.count-1].x)/2,n=(this.points[0].y+this.points[this.count-1].y)/2;e.moveTo(s,n);let i;for(i=1;i<this.points.length-2;i++){let l=(this.points[i].x+this.points[i+1].x)/2,r=(this.points[i].y+this.points[i+1].y)/2;e.quadraticCurveTo(this.points[i].x,this.points[i].y,l,r)}e.quadraticCurveTo(this.points[i].x,this.points[i].y,s,n),e.stroke(),e.beginPath(),e.strokeStyle="#0000ff",e.lineWidth=3,e.arc(100,200,40,0,Math.PI*2,!0),e.closePath(),e.stroke(),e.beginPath(),e.strokeStyle="#00ff44",e.lineWidth=5,e.moveTo(200,200),e.arcTo(200,50,150,200,20),e.stroke()}};function At(t,e=!1){return e===!0?typeof t=="number"?t|0:(typeof t=="string"&&t[0]==="#"&&(t=t.slice(1)),parseInt(t,16)):(typeof t=="number"&&(t="#"+("00000"+(t|0).toString(16)).substr(-6)),t)}let Pe,ke;const Ft={settings:{name:"pixel",injectors:[J]},init(t,e,s){ke=s.getImageData(0,0,e.width,e.height),Pe=new zt(e.injectors.mouse)},render(t){return Pe.draw(t,ke),Jt},destroy(){}};function Jt(){}let zt=class{constructor(e){o(this,"mouse");o(this,"prevPos");o(this,"brush_size",25);o(this,"brush_density",50);o(this,"brush_color",0);this.mouse=e}draw(e,s){let n=s.data;if(p(this.prevPos)&&this.mouse.leftButtonDown)this.brush_color=At(Math.random()*16777215,!0),this.prevPos=this.mouse.copyPos();else if(!p(this.prevPos)&&this.mouse.leftButtonDown){for(let i=0;i<this.brush_density;i++){let l=Math.random()*Math.PI*2,r=Math.random()*this.brush_size,a=this.mouse.x+Math.cos(l)*r|0,k=this.mouse.y+Math.sin(l)*r|0,x=(a+k*s.width)*4;n[x]=this.brush_color>>16&255,n[x+1]=this.brush_color>>8&255,n[x+2]=this.brush_color&255,n[x+3]=255}e.putImageData(s,0,0),this.prevPos=this.mouse.copyPos()}else!p(this.prevPos)&&!this.mouse.leftButtonDown&&(this.prevPos=null)}},xe;const Nt={settings:{name:"shapes",injectors:[J]},init(t,e){xe=new Gt(e.injectors.mouse,e)},render(t){xe.draw(t)},destroy(){}};class Gt{constructor(e,s){o(this,"count",10);o(this,"mouse");o(this,"points",[]);o(this,"ctrlPoint",{});this.mouse=e,this.points=oe(this.count,()=>({x:Math.random()*s.width,y:Math.random()*s.height}))}draw(e){e.beginPath(),e.fillStyle="#ff0000";let s=(this.points[0].x+this.points[this.count-1].x)/2,n=(this.points[0].y+this.points[this.count-1].y)/2;e.moveTo(s,n);let i;for(i=1;i<this.points.length-2;i++){let l=(this.points[i].x+this.points[i+1].x)/2,r=(this.points[i].y+this.points[i+1].y)/2;e.quadraticCurveTo(this.points[i].x,this.points[i].y,l,r)}e.quadraticCurveTo(this.points[i].x,this.points[i].y,s,n),e.fill(),e.beginPath(),e.fillStyle="#00ff44",e.moveTo(100,100),e.arcTo(200,50,150,200,20),e.fill()}}const Ht={name:"chapter 4",expamples:[Ft,jt,Bt,Nt,Ot,Xt,Dt]};Ae([Ht,et,It]);
