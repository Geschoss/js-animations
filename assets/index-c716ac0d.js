var Pe=Object.defineProperty;var ke=(t,e,s)=>e in t?Pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var o=(t,e,s)=>(ke(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function ge(t,e){return e.expamples.find(({settings:s})=>s.name===t)}function we(t,e){let s=new URL(window.location.href);s.searchParams.set(t,e),window.history.pushState("Animations",t,s)}function Le(){let t=new URLSearchParams(window.location.search);return{chapter:t.get("chapter")||"",example:t.get("example")||""}}function Te(t,e){let s=e[t];return s??Object.values(e)[0]}function Ee(t,e){let s=ge(t,e);return s??e.expamples[0]}const xe=()=>{let t={chapters:document.getElementById("chapters_menu"),examples:document.getElementById("examples_menu"),canvas:document.getElementById("canvas"),body:document.body};return{...t,updateExamplesMenu:$e(t.examples),updateChaptersMenu:Ce(t.chapters)}};function $e(t){return(e,s,n)=>{Se(t);let i;e.expamples.forEach(l=>{let r=document.createElement("div");r.classList.add("menu__item"),r.innerText=l.settings.name,s===l&&(i=r,i.classList.add("menu__item_selected")),r.addEventListener("click",()=>{i!==r&&(i&&i.classList.remove("menu__item_selected"),i=r,i.classList.add("menu__item_selected"),we("example",l.settings.name),n(l.settings.name))}),t.appendChild(r)})}}function Ce(t){return(e,s,n)=>{let i;Object.keys(e).forEach(l=>{let r=e[l],a=document.createElement("div");a.classList.add("menu__item"),a.innerText=r.name,s===r&&(i=a,i.classList.add("menu__item_selected")),a.addEventListener("click",()=>{i!==a&&(i&&i.classList.remove("menu__item_selected"),i=a,i.classList.add("menu__item_selected"),we("chapter",l),n(l))}),t.appendChild(a)}),n(s.name)}}function Se(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function T(t){return t==null||t==null}function Xe(t){return Object.values(t)}function se(t,e){let s=[];for(let n=0;n<t;n++)s.push(e(n,t));return s}function Ye(t){const e=t.reduce((y,$)=>({...y,[$.name]:$}),{}),s=xe(),n=Le(),i=s.canvas.getContext("2d");let l=Te(n.chapter,e),r,a,x,ie={width:s.body.offsetWidth,height:s.body.offsetHeight,injectors:{}},g=ie;s.updateChaptersMenu(e,l,ve);function ve(y){ne(),l=e[y],r=Ee(n.example,l),s.updateExamplesMenu(l,r,Me),re()}function Me(y){ne(),r=ge(y,l),re()}function ne(){a&&cancelAnimationFrame(a),r&&r.inited&&(T(g.injectors)||Xe(g.injectors).map(y=>y.destroy()),r.destroy(s.canvas),r.inited=!1),g=ie}function re(){var $;if(r.inited)return;let y=(($=r.settings.injectors)==null?void 0:$.reduce((be,le)=>({...be,[le.name]:je(le,{canvas:s.canvas})}),{}))||{};g={width:r.settings.width||s.body.offsetWidth,height:r.settings.height||s.body.offsetHeight,injectors:y},s.canvas.width=g.width,s.canvas.height=g.height,r.init(s.canvas,g),r.inited=!0,oe()}function oe(){T(x)?_e():x(),x=r.render(i,g)||null,a=requestAnimationFrame(oe)}function _e(){i.clearRect(0,0,s.canvas.width,s.canvas.height)}}function je(t,e){let s=t.deps.map(({name:n})=>{let i=e[n];if(T(i))throw new Error(`${t.name} has unknow dep ${n}`);return i});return new t.instance(...s)}class E{constructor(e){o(this,"x",0);o(this,"y",0);o(this,"leftButtonDown",!1);o(this,"rect");o(this,"canvas");o(this,"mousedown",e=>{this.leftButtonDown=!0});o(this,"mouseup",e=>{this.leftButtonDown=!1});o(this,"move",e=>{let s=0,n=0;e.pageX||e.pageY?(s=e.pageX,n=e.pageY):(s=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),s-=this.canvas.offsetLeft,n-=this.canvas.offsetTop,this.x=s,this.y=n});this.canvas=e,e.addEventListener("mousemove",this.move,!1),e.addEventListener("mousedown",this.mousedown,!1),e.addEventListener("mouseup",this.mouseup,!1)}destroy(){this.canvas.removeEventListener("mousemove",this.move,!1),this.canvas.removeEventListener("mousedown",this.mousedown,!1),this.canvas.removeEventListener("mouseup",this.mouseup,!1)}copyPos(){return{x:this.x,y:this.y}}}const H={name:"mouse",instance:E,deps:[{name:"canvas"}]};let p=class{constructor(e=0,s=0,n=0,i="#ff6600"){o(this,"x");o(this,"y");o(this,"r");o(this,"c");o(this,"vx");o(this,"vy");o(this,"originX");o(this,"originY");this.x=e,this.y=s,this.r=n,this.c=i,this.vx=0,this.vy=0,this.originX=e,this.originY=s}set(e,s){this.x=e,this.y=s}think(e,s){let n=this.x-e.x,i=this.y-e.y;if(Math.sqrt(n*n+i*i)<e.r){let r=Math.atan2(i,n),a=e.x+Math.cos(r)*e.r,x=e.y+Math.sin(r)*e.r;this.vx+=a-this.x,this.vy+=x-this.y}this.vx+=s.spring.vx(this.x,this.originX,s),this.vy+=s.spring.vy(this.y,this.originY,s),this.vx*=s.friction.vx(this.x,this.originX,s),this.vy*=s.friction.vy(this.x,this.originX,s),this.x+=this.vx,this.y+=this.vy}render(e){e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI),e.fillStyle=this.c,e.fill(),e.closePath()}};class Be{constructor(e){o(this,"x",0);o(this,"y",0);o(this,"pressed",!1);o(this,"rect");o(this,"canvas");o(this,"touch_start",()=>{this.pressed=!0});o(this,"touch_end",()=>{this.pressed=!1,this.x=0,this.y=0});o(this,"touch_move",e=>{let s=0,n=0,i=e.touches[0];i.pageX||i.pageY?(s=i.pageX,n=i.pageY):(s=i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=i.clientY+document.body.scrollTop+document.documentElement.scrollTop),s-=this.canvas.offsetLeft,n-=this.canvas.offsetTop,this.x=s,this.y=n});this.canvas=e,e.addEventListener("touchstart",this.touch_start,!1),e.addEventListener("touchmove",this.touch_move,!1),e.addEventListener("touchend",this.touch_end,!1)}destroy(){this.canvas.removeEventListener("touchstart",this.touch_start,!1),this.canvas.removeEventListener("touchmove",this.touch_move,!1),this.canvas.removeEventListener("touchend",this.touch_end,!1)}}class Ie{constructor(){o(this,"keydown",e=>{console.log(e.code)});o(this,"keyup",e=>{console.log(e.code)});window.addEventListener("keydown",this.keydown,!1),window.addEventListener("keyup",this.keyup,!1)}destroy(){window.removeEventListener("keydown",this.keydown,!1),window.removeEventListener("keyup",this.keyup,!1)}}let C,K,U,ae;const We={settings:{name:"arrow"},init(t){K=new qe(150,150),C=new E(t),U=new p(100,100,20,"#eebe0a"),ae=new Ie},render(t){U.set(C.x,C.y),U.render(t),K.ratateTo(C),K.draw(t)},destroy(){ae.destroy(),C.destroy()}};class qe{constructor(e=0,s=0,n="#ffff00"){o(this,"x");o(this,"y");o(this,"color","");o(this,"rotation",0);this.x=e,this.y=s,this.color=n,this.rotation=0}ratateTo({x:e,y:s}){let n=e-this.x,i=s-this.y;this.rotation=Math.atan2(i,n)}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.lineWidth=2,e.fillStyle=this.color,e.beginPath(),e.moveTo(-50,-25),e.lineTo(0,-25),e.lineTo(0,-50),e.lineTo(50,0),e.lineTo(0,50),e.lineTo(0,25),e.lineTo(-50,25),e.lineTo(-50,-25),e.closePath(),e.fill(),e.stroke(),e.restore()}}let S={x:0,y:0},w={x:0,y:0},X;const De={settings:{name:"distance"},init(t,e){X=new E(t),S.x=Math.random()*e.width,S.y=Math.random()*e.height,w.x=Math.random()*e.width,w.y=Math.random()*e.height},render(t){t.fillStyle="#000000",t.fillRect(S.x-2,S.y-2,4,4),t.fillStyle="#ff0000",t.fillRect(w.x-2,w.y-2,4,4),t.font="30px Arial",t.fillText(`points distance: ${he(S,w)}`,10,100),t.fillText(`mouse distance: ${he(X,w)}`,10,130),t.beginPath(),t.moveTo(w.x,w.y),t.lineTo(X.x,X.y),t.closePath(),t.stroke()},destroy(){X.destroy()}};function he(t,e){let s=t.x-e.x,n=t.y-e.y;return Math.sqrt(s*s+n*n).toFixed(2)}class m{constructor(e=100,s=100,n=20,i="#ff0000"){o(this,"x",200);o(this,"y",100);o(this,"scaleX",1);o(this,"scaleY",1);o(this,"lineWidth",1);o(this,"color","");o(this,"radius",10);o(this,"rotation",0);this.x=e,this.y=s,this.color=i,this.radius=n}ratateTo({x:e,y:s}){let n=e-this.x,i=s-this.y;this.rotation=Math.atan2(i,n)}render(e){e.save(),e.translate(this.x,this.y),e.rotate(this.rotation),e.scale(this.scaleX,this.scaleY),e.lineWidth=this.lineWidth,e.fillStyle=this.color,e.beginPath(),e.arc(0,0,this.radius,0,Math.PI*2,!0),e.closePath(),e.fill(),this.lineWidth>0&&e.stroke(),e.restore()}}let v,P={angle:0,centrY:200,range:50,xspeed:3,yspeed:.05},F,M={angle:0,centryScale:1,range:.5,speed:.1},R,u={angleX:0,angleY:0,range:150,centerX:0,centerY:0,xspeed:.07,yspeed:.11};const Oe={settings:{name:"liner"},init(t,e){v=new m(0,0),F=new m(e.width/2,e.height/2,30,"#00ff00"),R=new m(e.width/2,e.height/2,30,"#0000ff"),u.centerX=e.width/2,u.centerY=e.height/2},render(t,e){return P.angle+=P.yspeed,v.x+=P.xspeed,v.y=P.centrY/2+Math.sin(P.angle)*P.range,v.x>e.width+v.radius&&(v.x=-v.radius,P.range+=1),F.scaleX=M.centryScale+Math.sin(M.angle)*M.range,F.scaleY=M.centryScale+Math.sin(M.angle)*M.range,M.angle+=M.speed,R.x=u.centerX+Math.sin(u.angleX)*u.range,R.y=u.centerY+Math.sin(u.angleY)*u.range,u.angleX+=u.xspeed,u.angleY+=u.yspeed,u.range+=.01,F.render(t),v.render(t),R.render(t),()=>{}},destroy(){}};let _,k,Y=0,de=0,ue=0,ce=100,Ae=.02;const Fe={settings:{name:"circle"},init(t,e){_=new m(200,200,40,"#11bbff"),k=new m(200,200,20,"#00ffff"),de=e.width/2,ue=e.height/2},render(t){Y+=Ae,_.x=de+Math.sin(Y)*ce,_.y=ue+Math.cos(Y)*ce,k.x=_.x+Math.sin(Y*2)*100,k.y=_.y+Math.cos(Y*2)*40,_.y-k.y>0?(k.render(t),_.render(t)):(_.render(t),k.render(t))},destroy(){}};let z,G,J,N,Q,f=40,b=0;const Re={settings:{name:"waves"},init(t,e){z=new m(e.width/2,e.height/2,f,"#ffee00"),G=new m(e.width/2,e.height/2,f,"#00ff00"),J=new m(e.width/2,e.height/2,f,"#0000ff"),N=new m(e.width/2,e.height/2,f,"#f0f0f0"),Q=new m(e.width/2,e.height/2,f)},render(t,e){b+=.03;let s=e.width/2,n=e.height/2;z.x=s+Math.sin(b*.2)*(s-f),G.y=n+Math.sin(b*.3)*(n-f),J.y=n+Math.sin(b*.4)*(n-f),J.x=s+Math.sin(b)*(s-f),N.y=n+Math.sin(b*.5)*(n-f),N.x=s+Math.cos(b*.2)*(s-f),Q.x=s+Math.sin(b*2)*(s-f),z.render(t),G.render(t),J.render(t),N.render(t),Q.render(t)},destroy(){}},Je=[De,Fe,Oe,Re,We],Ne={name:"chapter 3",expamples:Je};let j,V,B,He={friction:Ge(),spring:ze()};const Ke={settings:{name:"balls_2"},init:(t,e)=>{j=new E(t),V=Ue(5e3,e),B=new p(100,100,20,"#eebe0a")},render:(t,e)=>{B.set(j.x,j.y),B.render(t),V.forEach(s=>{s.think(B,{...e,...He}),s.render(t)})},destroy(){j.destroy(),j=void 0,V=void 0,B=void 0}};function Ue(t,e){let s=[],n=e.width/10,i=e.height/10;for(let l=0;l<t;l++){let r=n+Math.random()*(e.width-n*2),a=i+Math.random()*(e.height-i*2);s.push(new p(r,a,r>e.width/2?2:3,r>e.width/2?"#00bcd4":"#bdb76b"))}return s}function ze(){let t=0,e=0;return{vx(s,n,i){let l=n>i.width/2?t:e;return-(s-n)*l},vy(s,n,i){let l=n>i.width/2?t:e;return-(s-n)*l}}}function Ge(){let t=.99,e=.4;return{vx(s,n,i){return n>i.width/2?t:e},vy(s,n,i){return n>i.width/2?t:e}}}let I,Z,W,Qe={friction:tt(.5),spring:et(.01)};const Ve={settings:{name:"balls"},init:(t,e)=>{I=new E(t),Z=Ze(5e3,e),W=new p(100,100,20,"#eebe0a")},render:t=>{W.set(I.x,I.y),W.render(t),Z.forEach(e=>{e.think(W,Qe),e.render(t)})},destroy(){I.destroy(),I=void 0,Z=void 0,W=void 0}};function Ze(t,e){let s=[],n=e.width/10,i=e.height/10;for(let l=0;l<t;l++){let r=n+Math.random()*(e.width-n*2),a=i+Math.random()*(e.height-i*2);s.push(new p(r,a,2,"#ff0000"))}return s}function et(t){return{vx(e,s){return-(e-s)*t},vy(e,s){return-(e-s)*t}}}function tt(t){return{vx(){return t},vy(){return t}}}let q,ee,D,st={friction:pt(.8),spring:yt(.007)};const it={settings:{name:"p_dor"},init:t=>{q=new E(t),ee=ot().map(e=>(e.set(100+Math.random()*500,100+Math.random()*400),e)),D=new p(100,100,20,"#eebe0a")},render:t=>{D.set(q.x,q.y),D.render(t),ee.forEach(e=>{e.think(D,st),e.render(t)})},destroy(){q.destroy(),q=void 0,ee=void 0,D=void 0}},nt="#ff0000",rt=2,d=(t,e,s=nt)=>new p(t,e,rt,s),h=20;function ot(){return[...lt(),...at(),...ht(),...dt(),...ut(),...ct(),...ft()]}function lt(){return[...c(200,250,h,t=>d(t,100)),...c(100,150,h,t=>d(225,t))]}function at(){return[...c(100,150,h,t=>d(270,t)),...A(270,135,h),...c(100,150,h,t=>d(310,t))]}function ht(){return[...c(170,220,h,t=>d(150,t)),...c(150,170,h,t=>d(t,170)),...c(170,220,h,t=>d(170,t))]}function dt(){return[...c(170,220,h,t=>d(190,t)),...mt(190,220,h),...c(170,220,h,t=>d(230,t))]}function ut(){return[...c(170,220,h,t=>d(260,t)),...A(260,195,h,25)]}function ct(){return[...A(325,185,h,15,1),...c(180,210,h,t=>d(310,t)),...c(180,210,h,t=>d(340,t)),...A(325,205,h,15,2)]}function ft(){return[...c(170,220,h,t=>d(370,t)),...A(370,185,h,15,1.5)]}function A(t,e,s,n=15,i=1.5){let l=[];for(var r=0;r<=s;r++)l.push(d(t+n*Math.cos(Math.PI*r/s+Math.PI*i),e+n*Math.sin(Math.PI*r/s+Math.PI*i)));return l}function mt(t,e,s){let n=[];for(var i=0;i<s;i++)n.push(d(t+2*i,e-2.5*i));return n}function c(t,e,s,n){let i=e-t,l=Math.trunc(i/(s-1)),r=[];for(let a=t;a<=e;a+=l)r.push(n(a));return r}function yt(t){return{vx(e,s){return-(e-s)*t},vy(e,s){return-(e-s)*t}}}function pt(t){return{vx(){return t},vy(){return t}}}let te,O,L,gt={friction:_t(.99),spring:Mt(0)};const wt={settings:{name:"balls_touch"},init:(t,e)=>{L=new Be(t),te=vt(2e3,e),O=new p(e.width/2,e.height/2,30,"#eebe0a")},render:t=>{L.pressed&&O.set(L.x,L.y),O.render(t),te.forEach(e=>{e.think(O,gt),e.render(t)})},destroy(){L.destroy(),L=void 0,te=void 0,O=void 0}};function vt(t,e){let s=[],n=e.width/20,i=e.height/20;for(let l=0;l<t;l++){let r=n+Math.random()*(e.width-n*2),a=i+Math.random()*(e.height-i*2);s.push(new p(r,a,2,"#00bcd4"))}return s}function Mt(t){return{vx(e,s){return-(e-s)*t},vy(e,s){return-(e-s)*t}}}function _t(t){return{vx(){return t},vy(){return t}}}const bt=[Ve,Ke,it,wt],Pt={name:"chapter_2",expamples:bt};let fe;const kt={settings:{name:"curves",injectors:[H]},init(t,e){fe=new Lt(e.injectors.mouse,e)},render(t){fe.draw(t)},destroy(){}};let Lt=class{constructor(e,s){o(this,"points",[]);o(this,"point",{x0:0,y0:0,x1:0,y1:0});o(this,"mouse");this.mouse=e,this.points=se(20,()=>({x:Math.random()*s.width,y:Math.random()*s.height})),this.point={x0:Math.random()*s.width,y0:Math.random()*s.height,x1:Math.random()*s.width,y1:Math.random()*s.height}}draw(e){e.beginPath(),e.strokeStyle="#00ff00",e.lineWidth=10,e.lineCap="butt",e.lineJoin="round",e.miterLimit=20,e.moveTo(this.point.x0,this.point.y0),e.quadraticCurveTo(this.mouse.x,this.mouse.y,this.point.x1,this.point.y1),e.stroke(),e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=5,e.lineCap="butt",e.lineJoin="round",e.miterLimit=10,e.moveTo(this.points[0].x,this.points[0].y);for(let s=1;s<this.points.length-1;s+=2)e.quadraticCurveTo(this.points[s].x,this.points[s].y,this.points[s+1].x,this.points[s+1].y);e.stroke()}},me;const Tt={settings:{name:"line",injectors:[H]},init(t,e){me=new xt(e.injectors.mouse)},render(t){return me.draw(t),Et},destroy(){}};function Et(){}let xt=class{constructor(e){o(this,"mouse");o(this,"prevPos");this.mouse=e}draw(e){T(this.prevPos)&&this.mouse.leftButtonDown?(e.strokeStyle="#ff0000",e.lineWidth=2,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.beginPath(),e.moveTo(this.mouse.x,this.mouse.y),this.prevPos=this.mouse.copyPos()):!T(this.prevPos)&&this.mouse.leftButtonDown?(e.lineTo(this.mouse.x,this.mouse.y),this.prevPos=this.mouse.copyPos(),e.stroke()):!T(this.prevPos)&&!this.mouse.leftButtonDown&&(this.prevPos=null)}},ye;const $t={settings:{name:"multi_curves",injectors:[H]},init(t,e){ye=new Ct(e.injectors.mouse,e)},render(t){ye.draw(t)},destroy(){}};let Ct=class{constructor(e,s){o(this,"count",10);o(this,"mouse");o(this,"points",[]);o(this,"ctrlPoint",{});this.mouse=e,this.points=se(this.count,()=>({x:Math.random()*s.width,y:Math.random()*s.height}))}draw(e){e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=5,e.lineCap="butt",e.lineJoin="round",e.miterLimit=10;let s=(this.points[0].x+this.points[this.count-1].x)/2,n=(this.points[0].y+this.points[this.count-1].y)/2;e.moveTo(s,n);let i;for(i=1;i<this.points.length-2;i++){let l=(this.points[i].x+this.points[i+1].x)/2,r=(this.points[i].y+this.points[i+1].y)/2;e.quadraticCurveTo(this.points[i].x,this.points[i].y,l,r)}e.quadraticCurveTo(this.points[i].x,this.points[i].y,s,n),e.stroke(),e.beginPath(),e.strokeStyle="#0000ff",e.lineWidth=3,e.arc(100,200,40,0,Math.PI*2,!0),e.closePath(),e.stroke(),e.beginPath(),e.strokeStyle="#00ff44",e.lineWidth=5,e.moveTo(200,200),e.arcTo(200,50,150,200,20),e.stroke()}},pe;const St={settings:{name:"shapes",injectors:[H]},init(t,e){pe=new Xt(e.injectors.mouse,e)},render(t){pe.draw(t)},destroy(){}};class Xt{constructor(e,s){o(this,"count",10);o(this,"mouse");o(this,"points",[]);o(this,"ctrlPoint",{});this.mouse=e,this.points=se(this.count,()=>({x:Math.random()*s.width,y:Math.random()*s.height}))}draw(e){e.beginPath(),e.fillStyle="#ff0000";let s=(this.points[0].x+this.points[this.count-1].x)/2,n=(this.points[0].y+this.points[this.count-1].y)/2;e.moveTo(s,n);let i;for(i=1;i<this.points.length-2;i++){let l=(this.points[i].x+this.points[i+1].x)/2,r=(this.points[i].y+this.points[i+1].y)/2;e.quadraticCurveTo(this.points[i].x,this.points[i].y,l,r)}e.quadraticCurveTo(this.points[i].x,this.points[i].y,s,n),e.fill(),e.beginPath(),e.fillStyle="#00ff44",e.moveTo(100,100),e.arcTo(200,50,150,200,20),e.fill()}}const Yt={name:"chapter 4",expamples:[St,$t,kt,Tt]};Ye([Yt,Ne,Pt]);
