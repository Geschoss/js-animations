var Wt=Object.defineProperty;var Yt=(o,t,e)=>t in o?Wt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>(Yt(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();class Ft{constructor(t){i(this,"root");i(this,"chapters");i(this,"examples");this.examples=this.renderExamplesMenu(),this.chapters=this.renderChaptersMenu(),this.root=this.renderRoot(),t.appendChild(this.root)}renderChaptersMenu(){let t=document.createElement("div");return t.classList.add("menu__list"),t.classList.add("menu__list_chapter"),t}renderExamplesMenu(){let t=document.createElement("div");return t.classList.add("menu__list"),t}renderRoot(){let t=document.createElement("div");return t.classList.add("menu__root"),t.appendChild(this.chapters),t.appendChild(this.examples),t}}class Ut{constructor(t,e){i(this,"menu");i(this,"routing");this.menu=new Ft(t.body),this.routing=e}renderChaptersMenu(t,e){let s;Object.keys(t).forEach(r=>{let n=t[r],h=document.createElement("div");h.classList.add("menu__item"),h.innerText=n.name,e===n&&(s=h,s.classList.add("menu__item_selected")),h.addEventListener("click",()=>{s!==h&&(s&&s.classList.remove("menu__item_selected"),s=h,s.classList.add("menu__item_selected"),this.routing.setChapter(r))}),this.menu.chapters.appendChild(h)})}renderModuleMenu(t,e){if(this.removeChildren(this.menu.examples),!t)return;let s;t.modules.forEach(r=>{let n=document.createElement("div");n.classList.add("menu__item"),n.innerText=r.id,(e==null?void 0:e.id)===r.id&&(s=n,s.classList.add("menu__item_selected")),n.addEventListener("click",()=>{s!==n&&(s&&s.classList.remove("menu__item_selected"),s=n,s.classList.add("menu__item_selected"),this.routing.setModule(r.id))}),this.menu.examples.appendChild(n)})}removeChildren(t){for(;t.lastChild;)t.removeChild(t.lastChild)}}class Nt{constructor(){i(this,"module");i(this,"chapter");i(this,"onChange");const{module:t,chapter:e}=this.getSearchParam();this.module=t,this.chapter=e,this.onChange=()=>{},window.addEventListener("popstate",()=>this.urlChanged(),!1)}onUrlChanged(t){this.onChange=t}setModule(t){this.setSearchParam("module",t),this.urlChanged()}setChapter(t){this.setSearchParam("chapter",t),this.urlChanged()}urlChanged(){const{module:t,chapter:e}=this.getSearchParam();this.module=t,this.chapter=e,this.onChange()}getSearchParam(){let t=new URLSearchParams(window.location.search);return{module:t.get("module")||"",chapter:t.get("chapter")||""}}setSearchParam(t,e){let s=new URL(window.location.href);s.searchParams.set(t,e),window.history.pushState("Animations",t,s)}}function Qt(o,t){return Object.hasOwn(o,t)}class Xt{constructor(t){i(this,"chaptersMap");i(this,"currentChapter");i(this,"currentModule");i(this,"dom");i(this,"routing");this.chaptersMap=t.reduce((e,s)=>{if(Qt(e,s.name))throw new Error(`Chapter ${s.name} alredy has in list!`);return{...e,[s.name]:s}},{}),this.routing=new Nt,this.routing.onUrlChanged(()=>{var e;((e=this.currentChapter)==null?void 0:e.name)!==this.routing.chapter&&(this.currentChapter=this.chapterByName()),this.moduleChanged()}),this.dom=new Ut(document,this.routing),this.currentChapter=this.chapterByName(),this.moduleChanged(),this.dom.renderChaptersMenu(this.chaptersMap,this.currentChapter)}moduleChanged(){if(this.currentModule&&(this.currentModule.module.destroy(),this.currentModule=void 0),!this.currentChapter)return;let t=this.moduleByName();t&&(this.currentModule={id:t.id,module:new t}),this.dom.renderModuleMenu(this.currentChapter,this.currentModule)}chapterByName(){return this.chaptersMap[this.routing.chapter]}moduleByName(){if(this.currentChapter)return this.currentChapter.modules.find(({id:t})=>t===this.routing.module)}}class at{constructor(t,e){i(this,"name");i(this,"modules");this.name=t,this.modules=e}}class lt{constructor(){}destroy(){}}i(lt,"id","arcanoid");class dt{constructor(t,e){i(this,"width");i(this,"height");i(this,"ctx");i(this,"canvas");this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,document.body.appendChild(this.canvas)}destroy(){this.ctx=null,this.canvas.remove()}clean(){this.ctx.clearRect(0,0,this.width,this.height)}resize(t,e){this.width=t,this.height=e,this.canvas.width=this.width,this.canvas.height=this.height}}function L(o,t){let e=[];for(let s=0;s<o;s++)e.push(t(s,o));return e}function jt(o,t){let e=[];for(let s=0;s<o;s++)e.push(t);return e}function Ht(o){return o[o.length-1]}const j={blue:"#0070ff",green:"#0dc267",red:"#ff4d3a",warning:"#d17c09",special:"#b99bf8",positive:"#0dc267",neutral:"#DCE3EB",accent:"#0070ff",negative:"#ff4d3a",text_primary:"#000000",text_secondary:"#768694",text_tertiary:"#AABBCA"};function T(o,t){return Math.random()>.5?o:t}function k(o,t){return Math.trunc(o+Math.random()*(t-o))}function I(o){return o==null||o==null}function x(){return Math.random().toString(16).slice(2)}class Vt{constructor(){i(this,"keys_pressed",[]);i(this,"up_subscribers",[]);i(this,"down_subscribers",[]);i(this,"subscriber_callback",t=>({keys:e,cb:s})=>{(e.length===0||e.includes(t))&&s(t)});i(this,"keydown",t=>{let e=t.code;this.keys_pressed.push(e),this.down_subscribers.forEach(this.subscriber_callback(e))});i(this,"keyup",t=>{this.keys_pressed=this.keys_pressed.filter(s=>s!==t.code);let e=t.code;this.up_subscribers.forEach(this.subscriber_callback(e))});window.addEventListener("keydown",this.keydown,!1),window.addEventListener("keyup",this.keyup,!1)}destroy(){window.removeEventListener("keydown",this.keydown,!1),window.removeEventListener("keyup",this.keyup,!1)}pressed(t){return I(t)?this.keys_pressed.length!=0:this.keys_pressed.includes(t)}down(t){let e=x();return this.down_subscribers.push({...t,hash:e}),e}up(t){let e=x();return this.up_subscribers.push({...t,hash:e}),e}}class zt{constructor(t){i(this,"x",0);i(this,"y",0);i(this,"pressed",!1);i(this,"rect");i(this,"canvas");i(this,"mousedown",()=>{this.pressed=!0});i(this,"mouseup",()=>{this.pressed=!1});i(this,"move",t=>{let e=0,s=0;t.pageX||t.pageY?(e=t.pageX,s=t.pageY):(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),e-=this.canvas.offsetLeft,s-=this.canvas.offsetTop,this.x=e,this.y=s});this.canvas=t,t.addEventListener("mousemove",this.move,!1),t.addEventListener("mousedown",this.mousedown,!1),t.addEventListener("mouseup",this.mouseup,!1)}destroy(){this.canvas.removeEventListener("mousemove",this.move,!1),this.canvas.removeEventListener("mousedown",this.mousedown,!1),this.canvas.removeEventListener("mouseup",this.mouseup,!1)}copyPos(){return{x:this.x,y:this.y}}}class Gt{constructor(){i(this,"destroyed",!1);i(this,"cb");i(this,"animationCbId");this.cb=()=>{},this.animationCbId=0}tick(t){this.cb=t;const e=s=>{(this.cb||!this.destroyed)&&(this.cb(s),this.animationCbId=requestAnimationFrame(e))};e(0)}destroy(){this.destroyed=!0,this.animationCbId&&cancelAnimationFrame(this.animationCbId),this.animationCbId=null}}class Zt{constructor(t=document.body){i(this,"cb");i(this,"subs");i(this,"resizeFn");this.subs=[],this.cb=()=>{},this.resizeFn=()=>{var r;const{offsetWidth:e,offsetHeight:s}=t;this.cb&&this.cb(e,s),(r=this.subs)==null||r.forEach(n=>{n(e,s)})},window.addEventListener("resize",this.resizeFn)}changed(t){this.cb=t}onChanged(t){var e;(e=this.subs)==null||e.push(t)}destroy(){this.cb=void 0,this.subs=void 0,this.resizeFn&&window.removeEventListener("resize",this.resizeFn),this.resizeFn=void 0}}class d{constructor(t={}){i(this,"loop");i(this,"resize");i(this,"keyboard");i(this,"context2d");i(this,"controller");i(this,"env");const{controller:e=zt}=t,s=document.body;this.env={width:s.offsetWidth,height:s.offsetHeight},this.loop=new Gt,this.resize=new Zt(s),this.context2d=new dt(s.offsetWidth,s.offsetHeight),this.keyboard=new Vt,this.controller=new e(this.context2d.canvas),this.resize.onChanged((r,n)=>{this.env={width:s.offsetWidth,height:s.offsetHeight},this.context2d.resize(r,n)})}tick(t){this.loop.tick(e=>{this.context2d.clean(),t({time:e,context:this.context2d,keyboard:this.keyboard,controller:this.controller})})}onResize(t){this.resize.onChanged((e,s)=>{t(e,s)})}destroy(){this.loop.destroy(),this.resize.destroy(),this.keyboard.destroy(),this.context2d.destroy(),this.controller.destroy(),this.loop=void 0,this.resize=void 0,this.keyboard=void 0,this.context2d=void 0,this.controller=void 0}}class z{constructor(t=0,e=0){i(this,"dx");i(this,"dy");this.dx=t,this.dy=e}think(t){t.x+=this.dx,t.y+=this.dy}}class G{constructor(){i(this,"dx",0);i(this,"dy",0)}think(){}}class Jt{render(t,{x:e,y:s,radius:r,color:n}){t.save(),t.beginPath(),t.arc(e,s,r,0,2*Math.PI),t.fillStyle=n,t.fill(),t.closePath(),t.restore()}}class $t{render(t,{x:e,y:s,width:r,height:n,color:h}){t.save(),t.strokeStyle=h,t.beginPath(),t.rect(e,s,r,n),t.closePath(),t.stroke(),t.restore()}}let Z=class{constructor(t=0,e=0,s=10,r="#ff6600",n=new G,h=new Jt){i(this,"x");i(this,"y");i(this,"color");i(this,"radius");i(this,"behavior");i(this,"view");this.x=t,this.y=e,this.color=r,this.radius=s,this.view=h,this.behavior=n}think(){this.behavior.think(this)}render(t){this.view.render(t,this)}getBounds(){return{x:this.x-this.radius,y:this.y-this.radius,width:this.radius*2,height:this.radius*2}}distansTo(t,e){return Math.sqrt(Math.pow(t-this.x,2)+Math.pow(e-this.y,2))}isInside(t,e){return this.radius>=this.distansTo(t,e)}};class Kt{constructor(t){i(this,"raw");i(this,"status","new");this.raw=new Image,this.raw.src=t,this.raw.onload=()=>{this.status="ready"},this.raw.onerror=e=>{this.status="error",console.error(e)}}isReady(){return this.status==="ready"}data(){return this.raw}}class g{constructor(t,e){i(this,"x");i(this,"y");this.x=t,this.y=e}static create(t=0,e=0){return new g(t,e)}static from({x:t,y:e}){return new g(t,e)}add(t){return new g(this.x+t.x,this.y+t.y)}left(){this.x-=1}right(){this.x+=1}up(){this.y-=1}down(){this.y+=1}}class U{constructor(t,e,s,r){i(this,"x1");i(this,"x2");i(this,"y1");i(this,"y2");this.x1=t,this.y1=e,this.x2=s,this.y2=r}static create(t,e,s,r){return new U(t,e,t+s-1,e+r-1)}intersect(t){return this.x1<=t.x2&&this.x2>=t.x1&&this.y1<=t.y2&&this.y2>=t.y1}intersect_with_padding(t,e){return this.x1-e<=t.x2&&this.x2+e>=t.x1&&this.y1-e<=t.y2&&this.y2+e>=t.y1}for_each(t){for(let e=this.x1;e<=this.x2;e++)for(let s=this.y1;s<=this.y2;s++)t(g.from({x:e,y:s}))}center(){return new g((this.x1+this.x2)/2,(this.y1+this.y2)/2)}center_trunc(){return new g(Math.trunc((this.x1+this.x2)/2),Math.trunc((this.y1+this.y2)/2))}center_floor(){return new g(Math.floor((this.x1+this.x2)/2),Math.floor((this.y1+this.y2)/2))}cut_by_window(t,e){this.x1=this.x1<1?1:this.x1,this.x2=this.x2>t?t:this.x2,this.y1=this.y1<1?1:this.y1,this.y2=this.y2>e?e:this.y2}}class E{constructor(t=100,e=100,s=200,r=200,n="#ff0000",h=new G,a=new $t){i(this,"width");i(this,"height");i(this,"y");i(this,"x");i(this,"right");i(this,"bottom");i(this,"color");i(this,"behavior");i(this,"view");this.x=t,this.y=e,this.color=n,this.width=s,this.height=r,this.right=t+s,this.bottom=e+r,this.view=a,this.behavior=h}static create({x:t,y:e,width:s,height:r,color:n,view:h,behavior:a}){return new E(t,e,s,r,n,a,h)}think(){this.behavior.think(this)}render(t){this.view.render(t,this)}}var R=(o=>(o[o.Wall=0]="Wall",o[o.Floor=1]="Floor",o))(R||{});class J{constructor(t,e,s,r){i(this,"tiles");i(this,"sectors");i(this,"width",0);i(this,"height",0);this.tiles=t,this.width=s,this.sectors=e,this.height=r}static create(t,e,s){let r=jt(e*s,1);return new J(t,r,e,s)}render(t,e,s){for(let r=0;r<this.width;r++)for(let n=0;n<this.height;n++){let h=this.idx(r,n),a=this.sectors[h],l=e.centre.x+(r-e.position.x)*s.tile_dimensions.x,f=e.centre.y+(n-e.position.y)*s.tile_dimensions.y;switch(a){case 1:this.tiles.renderFloor(t,g.from({x:l,y:f}));break}}}can_enter_tile(t){return this.in_bounds(t)&&this.sectors[this.idx(t.x,t.y)]===1}in_bounds(t){return t.x>=0&&t.x<this.width-1&&t.y>=0&&t.y<this.height-1}try_idx(t){if(this.in_bounds(t))return this.idx(t.x,t.y)}idx(t,e){return e*this.width+t}}const qt=60,tt=25,et=5,xt=200;class ${constructor(t,e,s){i(this,"map");i(this,"tiles");i(this,"rooms");i(this,"player_start");this.map=t,this.rooms=e,this.player_start=s}static create(t,e,s){let r=new $(J.create(t,e,s),[],g.create());return r.fill(R.Wall),r.build_random_rooms(e,s),r.build_corridors(),r.player_start=r.rooms[0].center_trunc(),r}fill(t){this.map.sectors=this.map.sectors.map(()=>t)}mock_rooms(t,e){this.rooms=te().map(({x1:s,x2:r,y1:n,y2:h})=>new U(s,n,r,h)),this.rooms.forEach(s=>{s.for_each(({x:r,y:n})=>{if(r>0&&r<t-1&&n>0&&n<e-1){let h=this.map.idx(r,n);this.map.sectors[h]=R.Floor}})})}build_random_rooms(t,e){let s=0;for(;this.rooms.length<qt;){let r=U.create(k(-2,t-2),k(-2,e-2),k(et,tt),k(et,tt));if(r.cut_by_window(t-2,e-2),s+=1,this.rooms.some(h=>h.intersect_with_padding(r,1))||(s=0,r.for_each(({x:h,y:a})=>{let l=this.map.idx(h,a);this.map.sectors[l]=R.Floor}),this.rooms.push(r)),xt<s)break}}apply_horizontal_tunnel(t,e,s){for(let r=Math.min(t,e);r<=Math.max(t,e);r++){let n=this.map.try_idx(g.create(r,s));n&&(this.map.sectors[n]=R.Floor)}}apply_vertical_tunnel(t,e,s){for(let r=Math.min(t,e);r<=Math.max(t,e);r++){let n=this.map.try_idx(g.create(s,r));n&&(this.map.sectors[n]=R.Floor)}}build_corridors(){let t=this.rooms.sort((r,n)=>r.center_trunc().x-n.center_trunc().x),[e,...s]=t;s.forEach(r=>{let n=r.center_trunc(),h=e.center_trunc();T(!0,!1)?(this.apply_horizontal_tunnel(h.x,n.x,h.y),this.apply_vertical_tunnel(h.y,n.y,n.x)):(this.apply_vertical_tunnel(h.y,n.y,h.x),this.apply_horizontal_tunnel(h.x,n.x,n.y)),e=r})}}function te(){return[{x1:1,x2:6,y1:9,y2:14},{x1:10,x2:15,y1:3,y2:8},{x1:13,x2:19,y1:17,y2:23}]}class K{constructor(t,e,s,r){i(this,"tiles");i(this,"centre");i(this,"position");i(this,"prevMove");this.tiles=t,this.centre=r,this.position=g.create(e,s),this.prevMove=0}static create(t,e=0,s=0,r){return new K(t,e,s,r)}render(t){this.tiles.isReady()&&this.tiles.renderPlayer(t,this.centre)}update(t,e){let s=new Date().getTime();if(s-this.prevMove>50){this.prevMove=s;let r=this.move(e),n=this.position.add(r);t.can_enter_tile(n)&&(this.position=n)}}move(t){let e=g.from({x:0,y:0});return t.pressed("ArrowLeft")&&e.left(),t.pressed("ArrowRight")&&e.right(),t.pressed("ArrowUp")&&e.up(),t.pressed("ArrowDown")&&e.down(),e}}class q{constructor(t,e,s){i(this,"env");i(this,"size");i(this,"image");this.env=t,this.size=s,this.image=new Kt(e)}static create(t,e,s){return new q(t,e,s)}isReady(){return this.image.isReady()}renderFloor(t,e){t.drawImage(this.image.data(),this.size*2,0,this.size,this.size,e.x,e.y,this.env.tile_dimensions.x,this.env.tile_dimensions.y)}renderWall(t,e){t.drawImage(this.image.data(),this.size*2,this.size*2,this.size,this.size,e.x,e.y,this.env.tile_dimensions.x,this.env.tile_dimensions.y)}renderPlayer(t,e){t.save(),t.fillStyle="#00ff00",t.beginPath(),t.rect(e.x,e.y,this.env.tile_dimensions.x,this.env.tile_dimensions.y),t.closePath(),t.fill(),t.restore()}}const ee="/js-animations/assets/floor_tiles-Q5m0QA2F.png",st=24,b={map:null,camera:null,player:null,tiles:null};class ut{constructor(){i(this,"game2D");this.game2D=new d;const{env:t}=this.game2D,e={x:st,y:st};b.tiles=q.create({tile_dimensions:e},ee,32);let s=$.create(b.tiles,100,100);b.map=s.map,b.player=K.create(b.tiles,s.player_start.x,s.player_start.y,g.create(t.width/2,t.height/2)),this.game2D.tick(({context:r,keyboard:n})=>{b.tiles.isReady()&&(b.player.update(b.map,n),b.map.render(r.ctx,b.player,{...t,tile_dimensions:e}),b.player.render(r.ctx))})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(ut,"id","dungeonCrawl");class H{constructor(t){i(this,"url");i(this,"data");i(this,"status");this.url=t,this.data=document.createElement("audio"),this.status="new"}load(t){this.data.setAttribute("src",this.url),this.data.addEventListener("loadeddata",()=>{this.data.readyState>=3&&t()})}get isLoaded(){return this.status==="loaded"}}class se{constructor(t,e,s){i(this,"url");i(this,"data");i(this,"status");this.url=t,this.data=document.createElement("video"),this.data.width=e,this.data.height=s,this.data.autoplay=!0,this.status="new"}load(t){this.data.setAttribute("src",this.url),this.data.addEventListener("loadeddata",()=>{this.data.readyState>=3&&t()})}get isLoaded(){return this.status==="loaded"}}class D{constructor(t){i(this,"url");i(this,"data");i(this,"status");this.url=t,this.data=new Image,this.status="new"}load(t){this.data.src=this.url,this.data.onload=t}get isLoaded(){return this.status==="loaded"}}class ct{constructor(t){i(this,"assets");this.assets=t}load(){return new Promise(t=>{let e=this.assets.length;const s=()=>{e=e-1,e===0&&t(this.assets)};this.assets.forEach(r=>r.load(s))})}}class ie{constructor(t,e){i(this,"width",336);i(this,"height",122);i(this,"dh",132);i(this,"speed",3);i(this,"bricks");i(this,"rect");i(this,"asset");this.asset=e,this.rect=new E(0,t.height-this.height,t.width,this.height,"#0000ff"),this.bricks=this.init_bricks()}init_bricks(){let t=Math.ceil(this.rect.width/this.width)+1;return L(t,e=>new N({x:this.width*e,y:this.rect.y,sw:this.width,sh:this.height,dw:this.width,dh:this.dh,asset:this.asset}))}think(){let t=this.bricks[0],e=Ht(this.bricks);t.rigth<0&&(this.bricks.shift(),this.bricks.push(new N({x:e.rigth,y:this.rect.y,sw:this.width,sh:this.height,dw:this.width,dh:this.dh,asset:this.asset}))),this.bricks.forEach(s=>{s.think(-this.speed)})}reset(){this.bricks=this.init_bricks()}collision(t){return this.rect.y<=t.rect.y+t.rect.height}render(t){this.bricks.forEach(e=>{e.render(t)})}}class N{constructor({x:t,y:e,sw:s,sh:r,dw:n=s,dh:h=r,asset:a}){i(this,"x");i(this,"y");i(this,"sw");i(this,"sh");i(this,"dw");i(this,"dh");i(this,"asset");this.x=t,this.y=e,this.sw=s,this.sh=r,this.dw=n,this.dh=h,this.asset=a}get rigth(){return this.x+this.dw}get left(){return this.x}think(t){this.x=this.x+t}render(t){t.save(),t.drawImage(this.asset.data,0,0,this.sw,this.sh,this.x,this.y,this.dw,this.dh),t.restore()}}class re{constructor(t,e){i(this,"width",288);i(this,"height",512);i(this,"speed",.2);i(this,"asset");i(this,"bricks");i(this,"env");this.env=t,this.asset=e,this.bricks=this.init_bricks()}init_bricks(){let t=Math.ceil(this.env.width/this.width)+2,e=-1;return L(t,s=>{let r=e+s;return new N({x:(this.width-1)*r,y:0,sw:this.width,sh:this.height,dw:this.width,dh:this.env.height,asset:this.asset})})}think(){let t=this.bricks[0];t.left>=-30&&(this.bricks.pop(),this.bricks.unshift(new N({x:-1*(t.left+this.width)-1,y:0,sw:this.width,sh:this.height,dw:this.width,dh:this.env.height,asset:this.asset}))),this.bricks.forEach(e=>{e.think(this.speed)})}render(t){this.bricks.forEach(e=>{e.render(t)})}reset(){this.bricks=this.init_bricks()}}class oe{constructor(){i(this,"value");this.value=0}reset(){this.value=0}increment(){this.value+=1}render(t,e){t.font="35px Arial",t.fillStyle="#0000ff",t.fillText(`Score: ${this.value}`,e.width/2-70,150)}}const ne="/js-animations/assets/background-day-DZpyCXUD.png",he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVAAAABwBAMAAAC6HTVoAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEVUOEfk/Ytzvy6c5llVgCLXqEze2JX////FcUEnAAAAAWJLR0QHFmGI6wAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+MDDAACE+f6JbgAAACmSURBVHja7c5BCQIBAAVRK1jBClawghXsH0HYu7AHYefDm9Mc3+2mP3cfaQf6OHoelX8M2vH8/C1oyPPzp6BXG079EvRyw6kfgl5vOPU70IDh1O9AXyPtQN8j7UA/I4GC1gMFrQcKWg8UtB4oaD1Q0HqgoPVAQeuBgtYDBa0HCloPFLQeKGg9UNB6oKD1QEHrgYLWAwWtBwpaDxS0HihoPVDQejPQL4Py73DUmV51AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAzLTExVDE4OjAyOjE5KzA2OjAw4So5wwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMy0xMVQxODowMjoxOSswNjowMJB3gX8AAAAASUVORK5CYII=",ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYBAMAAABtiDI6AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAHlBMVEUAAABTOEZU0f/6+vpLwfjX5sz82ITkYBhApNL///8xUeTGAAAAAXRSTlMAQObYZgAAAAFiS0dECfHZpewAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjAwwAAhPn+iW4AAAAbElEQVQY043RUQ3AIAwE0Fo4C1jAQi3MAhawgOwdt8GWFZLdF32hoYCZAsVe+QqQUkLO2Atrd8JDQcCachBuCgL3vyLaSo9o3CQICjcXEqqClWj61lBn10oKodPVtBCd3kTjYaPMuS18xb0+AZiXPG+0XooyAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAzLTExVDE4OjAyOjE5KzA2OjAw4So5wwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMy0xMVQxODowMjoxOSswNjowMJB3gX8AAAAASUVORK5CYII=",le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYBAMAAABtiDI6AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAHlBMVEUAAABTOEZU0f/6+vpLwfjX5sz82ITkYBhApNL///8xUeTGAAAAAXRSTlMAQObYZgAAAAFiS0dECfHZpewAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjAwwAAhPn+iW4AAAAa0lEQVQY04XRUQ3AIAwE0Fo4C1jAQi3MAhawgOwdpdvYCtn93UsooYhYYJEpXwFSSsgZe2FXJTwUBOyUg+AUBKr/0uO0Ebs1G/lLFlIIhYJqwULG5NZQ741EEdYeXIdWIhg2LTaKT59/4iUna5Q61/PQYY0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDMtMTFUMTg6MDI6MTkrMDY6MDDhKjnDAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAzLTExVDE4OjAyOjE5KzA2OjAwkHeBfwAAAABJRU5ErkJggg==",de="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYBAMAAABtiDI6AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAHlBMVEUAAABTOEZU0f/6+vpLwfjX5sz82ITkYBhApNL///8xUeTGAAAAAXRSTlMAQObYZgAAAAFiS0dECfHZpewAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjAwwAAhPn+iW4AAAAbElEQVQY043R2w3AIAgFUFa4K7CCK7hCV2AFV2DsIthqfSS9X3qiBJHIAw8NmQVgZqSEs9g+Z4NOs9SS2eQyCFokTv+Qh04ithCv3V6yipEEFA92UltUVZQ+kY2oB++ljRDChsGu0gY//sRHbqCxPNXcDN8UAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAzLTExVDE4OjAyOjE5KzA2OjAw4So5wwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMy0xMVQxODowMjoxOSswNjowMJB3gX8AAAAASUVORK5CYII=",ue="/js-animations/assets/hit-Cfd1O73w.wav",ce="/js-animations/assets/pipe-green-CxLOXPgv.png",fe="/js-animations/assets/point-B3dcINZl.wav",ye="/js-animations/assets/wing-CnunrI0v.wav";class ge{constructor(t,e,s){i(this,"MIN_VELOCITY",-6);i(this,"status","fly");i(this,"rect");i(this,"audio");i(this,"asset");i(this,"velocity");this.rect=new E(150,t,50,35,"#00ff00"),this.asset=new me(s),this.audio=e,this.velocity=0}ubdate_status(){return this.velocity<this.MIN_VELOCITY+2?"jump":this.velocity>this.MIN_VELOCITY+2&&this.velocity<0?"fly":"down"}reset(){this.rect.x=150,this.rect.y=350,this.velocity=0}render(t){this.asset.render(t,this)}think(){this.rect.y+=this.velocity,this.velocity<6&&(this.velocity+=.2),this.status=this.ubdate_status()}jump(){this.status!=="jump"&&(this.audio.data.pause(),this.audio.data.currentTime=0,this.audio.data.play(),this.velocity=this.MIN_VELOCITY)}}class me{constructor(t){i(this,"assets");this.assets=t}render(t,e){let s=this.assets.bluebird_upflap.data;e.status==="jump"?s=this.assets.bluebird_downflap.data:e.status==="fly"&&(s=this.assets.bluebird_midflap.data),t.save(),t.drawImage(s,0,0,35,35,e.rect.x,e.rect.y,50,50),t.restore()}}const u=class u{constructor(t,e,s,r,n=0){i(this,"x");i(this,"y");i(this,"top");i(this,"bottom");i(this,"asset");i(this,"behavior");i(this,"type");this.type="next",this.asset=t,this.x=e,this.y=s,this.behavior=new z(u.SPEED-n/10);let h=u.GAP-n,a=k(u.MIN_HEIGHT,r-h-2*u.MIN_HEIGHT);this.top=E.create({x:e,y:s,width:u.WIDTH,height:a});let l=this.top.bottom+h,f=r-l;this.bottom=E.create({x:this.top.x,y:l,width:u.WIDTH,height:f})}think(){this.behavior.think(this),this.top.x=this.x,this.bottom.x=this.x}render(t){t.save(),t.drawImage(this.asset.data,0,0,51,u.ASSET_HEIGHT,this.bottom.x,this.bottom.y,this.bottom.width,this.bottom.height),t.restore(),t.save(),t.translate(this.top.x+this.top.width/2,this.top.y+this.top.height/2),t.rotate(Math.PI);let e=this.top.width/2*-1,s=this.top.height/2*-1;t.drawImage(this.asset.data,0,0,51,u.ASSET_HEIGHT,e,s,this.top.width,this.top.height),t.restore()}collision(t){let e={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},r={x:t.x,y:t.y+t.height},n={x:t.x+t.width,y:t.y+t.height},h={x:this.top.x,y:this.top.y+this.top.height},a={x:this.top.x+u.WIDTH,y:this.top.y+this.top.height},l={x:this.bottom.x,y:this.bottom.y},f={x:this.bottom.x+u.WIDTH,y:this.bottom.y};return s.x<this.x||this.x+u.WIDTH<t.x?!1:!!(B(h.x,s.x,a.x)&&B(this.y,s.y,h.y)||B(h.x,e.x,a.x)&&B(this.y,e.y,h.y)||B(l.x,n.x,f.x)&&l.y<n.y||B(l.x,r.x,f.x)&&l.y<r.y)}};i(u,"GAP",290),i(u,"WIDTH",90),i(u,"MIN_HEIGHT",60),i(u,"DISTANCE_BEETWEN",290),i(u,"SPEED",-4),i(u,"ASSET_HEIGHT",320);let p=u;class pe{constructor(t,e,s){i(this,"h_padding",40);i(this,"env");i(this,"pipes");i(this,"floor");i(this,"asset");this.env=e,this.floor=t,this.asset=s,this.reset()}reset(){let t=[],e=this.env.width,s=this.h_padding,r=this.env.height-this.floor.rect.height,n=screen.width/(p.WIDTH+p.DISTANCE_BEETWEN)+1;for(let h=0;h<n;h++)t.push(new p(this.asset,e,s,r)),e+=p.WIDTH+p.DISTANCE_BEETWEN;this.pipes=t}collision(t){return this.pipes.some(e=>e.collision(t.rect))}isPassed(t){for(let s of this.pipes)if(s.type!=="passed")return s.type==="current"&&s.x+p.WIDTH<=t.rect.x?(s.type="passed",!0):(s.x<=t.rect.x+t.rect.width&&(s.type="current"),!1);return this.pipes[0].x+p.WIDTH<t.rect.x}think(t){this.pipes.forEach(n=>n.think());let e=this.pipes[0],s=this.pipes[this.pipes.length-1],r=-p.WIDTH;if(e.x<r){this.pipes.shift();let n=0,h=this.env.height-this.floor.rect.height;this.pipes.push(new p(this.asset,s.x+p.WIDTH+p.DISTANCE_BEETWEN,n,h,t.value))}}render(t){this.pipes.forEach(e=>e.render(t))}}function B(o,t,e){return o<t&&t<e}class ft{constructor(){i(this,"state");i(this,"game2D");this.game2D=new d;const t=this.game2D.env,e=new ct([new D(ae),new D(le),new D(de),new D(ne),new D(ce),new D(he),new H(ye),new H(ue),new H(fe)]);this.state={type:"init",bird:null,floor:null,score:0},e.load().then(([s,r,n,h,a,l,f,y,A])=>{this.state.floor=new ie(t,l),this.state.background=new re({width:t.width,height:t.height-this.state.floor.rect.height},h),this.state.score=new oe,this.state.plumbing=new pe(this.state.floor,t,a),this.state.bird=new ge(t.height-this.state.floor.rect.height,f,{bluebird_downflap:s,bluebird_midflap:r,bluebird_upflap:n});const v=()=>{this.state.background.reset(),this.state.bird.reset(),this.state.floor.reset(),this.state.score.reset(),this.state.plumbing.reset(),this.state.type="play"};this.game2D.tick(({context:Q,keyboard:X})=>{switch(this.state.type){case"init":we(this.state,Q.ctx,t),X.pressed("Enter")&&v();break;case"play":Ae(this.state,t,Q.ctx,X,y,A);break;case"dead":ve(this.state,t,Q.ctx),X.pressed("Enter")&&v();break}})})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(ft,"id","flappy_bird");function we(o,t,e){o.background.render(t),o.floor.render(t),t.font="30px Arial",t.fillStyle="#0000ff",t.fillText("ENTER to start",e.width/2-100,(e.height-200)/2),t.fillText("SPACE to jump",e.width/2-100,(e.height-100)/2)}function Ae(o,t,e,s,r,n){o.background.think(),o.background.render(e),s.pressed("Space")&&o.bird.jump(),o.bird.think(),o.bird.render(e);{if(o.plumbing.collision(o.bird)){o.type="dead",r.data.play();return}if(o.floor.collision(o.bird)){o.type="dead",r.data.play();return}}o.floor.think(),o.floor.render(e),o.plumbing.think(o.score),o.plumbing.render(e),o.plumbing.isPassed(o.bird)&&(n.data.pause(),n.data.currentTime=0,n.data.play(),o.score.increment()),o.score.render(e,t)}function ve(o,t,e){o.background.render(e),o.bird.render(e),o.floor.render(e),o.plumbing.render(e),o.score.render(e,t),e.font="30px Arial",e.fillStyle="#0000ff",e.fillText("You are dead",t.width/2-100,t.height/2-30),e.fillText("Press ENTER to start",t.width/2-150,t.height/2)}class be{constructor(){i(this,"vr",0);i(this,"vx",0);i(this,"vy",0);i(this,"trust",0);i(this,"gravity",.01);i(this,"rotation",0)}left(){this.vr=-3}rigth(){this.vr=3}up(){this.trust=.05}forward(){this.vr=0}stop(){this.trust=0}calculate(){this.rotation+=this.vr*Math.PI/180;let t=Math.cos(this.rotation)*this.trust,e=Math.sin(this.rotation)*this.trust;return this.vx+=t,this.vy+=e,this.vx+=this.vx>0?-this.gravity:this.gravity,this.vy+=this.vy>0?-this.gravity:this.gravity,{vx:this.vx,vy:this.vy,rotation:this.rotation}}}class Te{constructor(t,e,s=0,r=0,n,h){i(this,"x");i(this,"y");i(this,"width");i(this,"height");i(this,"rotation");i(this,"moving");i(this,"keyboard");i(this,"acceleration");i(this,"weapon");i(this,"view");this.x=s,this.y=r,this.width=25,this.height=20,this.rotation=0,this.keyboard=t,this.moving=!1,this.acceleration=e,this.weapon=n,this.view=new h(n),this.keyboard.up({keys:["ArrowUp","ArrowLeft","ArrowRight"],cb:a=>{if(a==="ArrowUp"){this.moving=!1,this.acceleration.stop();return}this.acceleration.forward()}})}changeChip(t){this.view=new t(this.weapon)}cnahgeWeapon(t){this.view.changeWeapon(t)}shot(t){const e=this.view.shot(this);e&&t.bullets.push(...e)}think(t){this.keyboard.pressed("Space")&&this.shot(t),this.keyboard.pressed("ArrowLeft")&&this.acceleration.left(),this.keyboard.pressed("ArrowRight")&&this.acceleration.rigth(),this.keyboard.pressed("ArrowUp")&&(this.acceleration.up(),this.moving=!0);let{vx:e,vy:s,rotation:r}=this.acceleration.calculate();this.rotation=r,this.x+=e,this.y+=s}render(t){this.view.render(t,this)}}class _e{constructor(t){i(this,"name","classic");i(this,"weapon_name");i(this,"weapon");this.changeWeapon(t)}changeWeapon(t){const e=new t;this.weapon_name=e.name,this.weapon=new t}shot(t){const e=this.weapon.shot({x:t.x,y:t.y,rotation:t.rotation});if(e)return[e]}render(t,e){if(t.save(),t.translate(e.x,e.y),t.rotate(e.rotation),t.lineWidth=1,t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(10,0),t.lineTo(-10,10),t.lineTo(-5,0),t.lineTo(-10,-10),t.lineTo(10,0),t.stroke(),e.moving){let s=Math.random()>.5?17:15;t.beginPath(),t.strokeStyle="#ff9200",t.moveTo(-7.5,-5),t.lineTo(-s,0),t.lineTo(-7.5,5),t.stroke()}t.restore()}}class ke{constructor(t){i(this,"name","еф-50");i(this,"weapon_name");i(this,"weapons");this.changeWeapon(t)}changeWeapon(t){const e=new t;this.weapon_name=e.name,this.weapons=[e,new t,new t]}shot(t){const s=[],n=this.weapons[0].shot({x:t.x+15*Math.cos(t.rotation+Math.PI*1.84),y:t.y+15*Math.sin(t.rotation+Math.PI*1.84),rotation:t.rotation-.03});n&&s.push(n);const h=.16,a=this.weapons[1].shot({x:t.x+15*Math.cos(t.rotation+Math.PI*h),y:t.y+15*Math.sin(t.rotation+Math.PI*h),rotation:t.rotation+.03});a&&s.push(a);const l=0,f=this.weapons[2].shot({x:t.x+15*Math.cos(t.rotation+Math.PI*l),y:t.y+15*Math.sin(t.rotation+Math.PI*l),rotation:t.rotation});return f&&s.push(f),s.length>0?s:void 0}render(t,e){t.save(),t.translate(e.x,e.y),t.rotate(e.rotation),t.lineWidth=1,t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(20,0),t.lineTo(15,-10),t.lineTo(-15,-15),t.lineTo(-10,0),t.lineTo(-15,15),t.lineTo(15,10),t.lineTo(20,0),t.stroke(),t.beginPath(),t.moveTo(15,-10),t.quadraticCurveTo(8,0,15,10),t.stroke(),t.beginPath(),t.moveTo(-12,-2),t.lineTo(-20,-2),t.lineTo(-20,-9),t.lineTo(-14,-9),t.stroke(),t.beginPath(),t.moveTo(-12,2),t.lineTo(-20,2),t.lineTo(-20,9),t.lineTo(-14,9),t.stroke(),t.beginPath(),t.moveTo(7,11),t.lineTo(7,15),t.lineTo(14,15),t.stroke(),t.beginPath(),t.moveTo(7,-11),t.lineTo(7,-15),t.lineTo(14,-15),t.stroke(),e.moving&&(t.strokeStyle="#ff9200",t.beginPath(),t.moveTo(-20,-9),t.lineTo(-T(30,27),-6),t.lineTo(-20,-2),t.stroke(),t.beginPath(),t.moveTo(-20,9),t.lineTo(-T(30,27),6),t.lineTo(-20,2),t.stroke()),t.restore()}}class Me{constructor(t){i(this,"name","еф-100");i(this,"weapon_name");i(this,"weapons");this.changeWeapon(t)}changeWeapon(t){const e=new t;this.weapon_name=e.name,this.weapons=[e,new t]}shot(t){const r=this.weapons[0].shot({x:t.x+17*Math.cos(t.rotation+Math.PI*1.88),y:t.y+17*Math.sin(t.rotation+Math.PI*1.88),rotation:t.rotation}),n=.12,h=this.weapons[1].shot({x:t.x+17*Math.cos(t.rotation+Math.PI*n),y:t.y+17*Math.sin(t.rotation+Math.PI*n),rotation:t.rotation});let a=[];return r&&a.push(r),h&&a.push(h),a.length>0?a:void 0}render(t,e){t.save(),t.translate(e.x,e.y),t.rotate(e.rotation),t.strokeStyle="#ff0000",t.beginPath(),t.arc(0,0,15,0,2*Math.PI),t.stroke(),t.closePath(),t.beginPath(),t.arc(0,0,5,0,2*Math.PI),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(3,15),t.quadraticCurveTo(5,22,10,21),t.stroke(),t.beginPath(),t.moveTo(8,13),t.quadraticCurveTo(10,18,15,17),t.stroke(),t.beginPath(),t.moveTo(15,17),t.lineTo(20,17),t.stroke(),t.beginPath(),t.moveTo(10,21),t.lineTo(20,21),t.stroke(),t.beginPath(),t.moveTo(20,21),t.lineTo(20,17),t.stroke(),t.beginPath(),t.moveTo(20,21),t.lineTo(24,19),t.stroke(),t.beginPath(),t.moveTo(20,17),t.lineTo(24,18),t.stroke(),t.beginPath(),t.moveTo(13,7),t.lineTo(30,3),t.stroke(),t.beginPath(),t.moveTo(15,2),t.lineTo(30,2),t.stroke(),t.beginPath(),t.moveTo(13,-7),t.lineTo(30,-3),t.stroke(),t.beginPath(),t.moveTo(15,-2),t.lineTo(30,-2),t.stroke(),t.beginPath(),t.moveTo(15,0),t.lineTo(5,0),t.stroke(),t.beginPath(),t.moveTo(0,15),t.lineTo(0,5),t.stroke(),t.beginPath(),t.moveTo(0,-15),t.lineTo(0,-5),t.stroke(),t.beginPath(),t.moveTo(-15,0),t.lineTo(-5,0),t.stroke(),t.beginPath(),t.moveTo(4,4),t.lineTo(11,11),t.stroke(),t.beginPath(),t.moveTo(4,-4),t.lineTo(11,-11),t.stroke(),t.beginPath(),t.moveTo(-4,-4),t.lineTo(-11,-11),t.stroke(),t.beginPath(),t.moveTo(-4,4),t.lineTo(-11,11),t.stroke(),e.moving&&(t.beginPath(),t.strokeStyle="#ff9200",t.moveTo(-10,-12),t.lineTo(-T(21,19),-11),t.lineTo(-14,-7),t.stroke(),t.beginPath(),t.strokeStyle="#ff9200",t.moveTo(-12,-7),t.lineTo(-T(22,20),-4),t.lineTo(-14,0),t.stroke(),t.beginPath(),t.strokeStyle="#ff9200",t.moveTo(-12,7),t.lineTo(-T(22,20),4),t.lineTo(-14,0),t.stroke(),t.beginPath(),t.strokeStyle="#ff9200",t.moveTo(-14,7),t.lineTo(-T(21,19),11),t.lineTo(-10,12),t.stroke()),t.restore()}}class Pe{constructor(t){i(this,"name","эх-100");i(this,"weapon_name");i(this,"weapons");this.changeWeapon(t)}changeWeapon(t){const e=new t;this.weapon_name=e.name,this.weapons=[e,new t]}shot(t){const r=this.weapons[0].shot({x:t.x+15*Math.cos(t.rotation+Math.PI*1.88),y:t.y+15*Math.sin(t.rotation+Math.PI*1.88),rotation:t.rotation}),n=.12,h=this.weapons[1].shot({x:t.x+15*Math.cos(t.rotation+Math.PI*n),y:t.y+15*Math.sin(t.rotation+Math.PI*n),rotation:t.rotation});let a=[];return r&&a.push(r),h&&a.push(h),a.length>0?a:void 0}render(t,e){t.save(),t.translate(e.x,e.y),t.rotate(e.rotation),t.lineWidth=1,t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(15,10),t.lineTo(10,10),t.lineTo(10,5),t.lineTo(-10,5),t.lineTo(-10,10),t.lineTo(-15,10),t.lineTo(-15,-10),t.lineTo(-10,-10),t.lineTo(-10,-5),t.lineTo(-10,-5),t.lineTo(10,-5),t.lineTo(10,-10),t.lineTo(15,-10),t.stroke(),t.beginPath(),t.moveTo(15,10),t.quadraticCurveTo(30,0,15,-10),t.stroke(),e.moving&&(t.beginPath(),t.strokeStyle="#ff9200",t.moveTo(-15,-10),t.lineTo(-T(25,22),-5),t.lineTo(-15,0),t.stroke(),t.beginPath(),t.strokeStyle="#ff9200",t.moveTo(-15,10),t.lineTo(-T(25,22),5),t.lineTo(-15,0),t.stroke()),t.restore()}}class De{constructor(t){i(this,"name","т-50");i(this,"weapon_name");i(this,"weapons");this.changeWeapon(t)}changeWeapon(t){const e=new t;this.weapon_name=e.name,this.weapons=[e,new t]}shot(t){const s=[],n=this.weapons[0].shot({x:t.x+10*Math.cos(t.rotation+Math.PI*1.5),y:t.y+10*Math.sin(t.rotation+Math.PI*1.5),rotation:t.rotation});n&&s.push(n);const h=.5,a=this.weapons[1].shot({x:t.x+10*Math.cos(t.rotation+Math.PI*h),y:t.y+10*Math.sin(t.rotation+Math.PI*h),rotation:t.rotation});return a&&s.push(a),s.length>0?s:void 0}render(t,e){t.save(),t.translate(e.x,e.y),t.rotate(e.rotation),t.lineWidth=1,t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(20,0),t.lineTo(15,-5),t.lineTo(-15,-5),t.lineTo(-20,-10),t.lineTo(-20,10),t.lineTo(-15,5),t.lineTo(15,5),t.lineTo(20,0),t.stroke(),t.beginPath(),t.moveTo(0,-5),t.lineTo(0,-10),t.lineTo(5,-10),t.lineTo(5,-5),t.stroke(),t.beginPath(),t.moveTo(0,5),t.lineTo(0,10),t.lineTo(5,10),t.lineTo(5,5),t.stroke(),e.moving&&(t.strokeStyle="#ff9200",t.beginPath(),t.moveTo(-20,-10),t.lineTo(-T(30,27),-6),t.lineTo(-20,-2),t.stroke(),t.beginPath(),t.moveTo(-20,10),t.lineTo(-T(30,27),6),t.lineTo(-20,2),t.stroke()),t.restore()}}class Ee{constructor(){i(this,"name","Пулимет");i(this,"rate");i(this,"bulletSpeed");i(this,"prevShotTime");this.rate=10,this.prevShotTime=0,this.bulletSpeed=6}shot(t){let e=new Date().getTime();if(e-this.prevShotTime>1e3/this.rate)return this.prevShotTime=e,new Se(t.x,t.y,t.rotation,this.bulletSpeed)}}class Se{constructor(t,e,s,r=3){i(this,"x");i(this,"y");i(this,"speed");i(this,"rotation");this.x=t,this.y=e,this.speed=r,this.rotation=s}think(){this.x+=this.speed*Math.cos(this.rotation),this.y+=this.speed*Math.sin(this.rotation)}render(t){let e=5*Math.cos(this.rotation),s=5*Math.sin(this.rotation);t.save(),t.beginPath(),t.strokeStyle="#ff0000",t.lineWidth=2,t.moveTo(this.x,this.y),t.lineTo(this.x+e,this.y+s),t.closePath(),t.stroke(),t.restore()}}class Ce{constructor(){i(this,"name","Плазма");i(this,"rate");i(this,"bulletSpeed");i(this,"prevShotTime");this.rate=5,this.prevShotTime=0,this.bulletSpeed=6}shot(t){let e=new Date().getTime();if(e-this.prevShotTime>1e3/this.rate)return this.prevShotTime=e,new Ie(t.x,t.y,t.rotation,this.bulletSpeed)}}class Ie{constructor(t,e,s,r=4){i(this,"x");i(this,"y");i(this,"speed");i(this,"rotation");this.x=t,this.y=e,this.speed=r,this.rotation=s}think(){this.x+=this.speed*Math.cos(this.rotation),this.y+=this.speed*Math.sin(this.rotation)}render(t){t.save(),t.beginPath(),t.fillStyle="#00ff00",t.beginPath(),t.arc(this.x,this.y,3,0,2*Math.PI),t.fill(),t.closePath(),t.restore()}}class Le{constructor(){i(this,"name","Рокетница");i(this,"rate");i(this,"prevShotTime");this.rate=1,this.prevShotTime=0}shot(t){let e=new Date().getTime();if(e-this.prevShotTime>1e3/this.rate)return this.prevShotTime=e,new Be(t.x,t.y,t.rotation)}}class Be{constructor(t=0,e=0,s=0,r=0,n=.04){i(this,"x");i(this,"y");i(this,"speed");i(this,"rotation");i(this,"acceleration");i(this,"max_speed");this.x=t+5*Math.cos(s),this.y=e+5*Math.sin(s),this.speed=r,this.rotation=s,this.acceleration=n,this.max_speed=6}think(){this.speed+=this.acceleration,this.speed>=this.max_speed?this.acceleration=0:this.acceleration+=.02,this.x+=this.speed*Math.cos(this.rotation),this.y+=this.speed*Math.sin(this.rotation)}render(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.lineWidth=1,t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(8,1),t.lineTo(-8,1),t.lineTo(-8,-1),t.lineTo(8,-1),t.lineTo(8,1),t.stroke(),Math.random()>.1&&(t.beginPath(),t.strokeStyle="#ff9200",t.moveTo(-8,-2),t.lineTo(-12,0),t.lineTo(-8,2),t.stroke()),t.restore()}}const V=[ke,De,_e,Pe,Me],F=[Ee,Le,Ce];let S=0,C=0,O={enemies:[],bullets:[]},P;class yt{constructor(){i(this,"game2D");this.game2D=new d;const{env:t,keyboard:e}=this.game2D;let s=new be,r=V[C];P=new Te(e,s,t.width/2,t.height/2,F[S],r),this.game2D.tick(({context:n,keyboard:h})=>{h.pressed("KeyL")&&rt(P,V,1),h.pressed("Semicolon")&&rt(P,V,-1),h.pressed("KeyO")&&ot(P,1),h.pressed("KeyP")&&ot(P,-1),Re(n.ctx,t),We(n.ctx,t,P),O.enemies.forEach(a=>{a.think(O),a.render(n.ctx)}),O.bullets.forEach(a=>{a.think(O),a.render(n.ctx)}),P.think(O),P.render(n.ctx),Oe(O,t)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(yt,"id","spacesShip");function Oe(o,t){o.bullets=o.bullets.filter(e=>it(0,t.width,e.x)&&it(0,t.height,e.y))}function it(o,t,e){return e>o&&e<t}function rt(o,t,e){C+=e,C>=t.length&&(C=0),C<0&&(C=t.length-1),o.changeChip(t[C])}function ot(o,t){S+=t,S>=F.length&&(S=0),S<0&&(S=F.length-1),o.cnahgeWeapon(F[S])}function Re(o,t){o.save(),o.fillStyle="#ff0000",o.font="20px Arial",o.fillText("Смена корабля: Д или Ж",10,t.height-10),o.fillText("Смена оружия: Щ или З",10,t.height-30),o.fillText("Летать на стрелки",10,t.height-50),o.restore()}function We(o,t,e){o.save(),o.fillStyle="#ff0000",o.font="20px Arial",o.fillText(`корабль: ${e.view.name}`,10,t.height-80),o.fillText(`оружие: ${e.view.weapon_name}`,10,t.height-100),o.restore()}const Ye=new at("simple_2d_games",[ft,lt,yt,ut]);let M=class{constructor(t=0,e=0,s=0,r="#ff6600"){i(this,"x");i(this,"y");i(this,"r");i(this,"c");i(this,"vx");i(this,"vy");i(this,"originX");i(this,"originY");this.x=t,this.y=e,this.r=s,this.c=r,this.vx=0,this.vy=0,this.originX=t,this.originY=e}set(t,e){this.x=t,this.y=e}think(t,e){let s=this.x-t.x,r=this.y-t.y;if(Math.sqrt(s*s+r*r)<t.r){let h=Math.atan2(r,s),a=t.x+Math.cos(h)*t.r,l=t.y+Math.sin(h)*t.r;this.vx+=a-this.x,this.vy+=l-this.y}this.vx+=e.spring.vx(this.x,this.originX,e),this.vy+=e.spring.vy(this.y,this.originY,e),this.vx*=e.friction.vx(this.x,this.originX,e),this.vy*=e.friction.vy(this.x,this.originX,e),this.x+=this.vx,this.y+=this.vy}render(t){t.beginPath(),t.arc(this.x,this.y,this.r,0,2*Math.PI),t.fillStyle=this.c,t.fill(),t.closePath()}};class gt{constructor(){i(this,"balls");i(this,"player");i(this,"game2D");this.game2D=new d,this.balls=Fe(5e3,this.game2D.env),this.player=new M(100,100,20,"#eebe0a");let t={friction:Ne(.5),spring:Ue(.01)};this.game2D.tick(({context:e,controller:s})=>{this.player.set(s.x,s.y),this.player.render(e.ctx),this.balls.forEach(r=>{r.think(this.player,t),r.render(e.ctx)})})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.balls=void 0,this.player=void 0}}i(gt,"id","Balls");function Fe(o,t){let e=[],s=t.width/10,r=t.height/10;for(let n=0;n<o;n++){let h=s+Math.random()*(t.width-s*2),a=r+Math.random()*(t.height-r*2);e.push(new M(h,a,2,"#ff0000"))}return e}function Ue(o){return{vx(t,e){return-(t-e)*o},vy(t,e){return-(t-e)*o}}}function Ne(o){return{vx(){return o},vy(){return o}}}class mt{constructor(){i(this,"balls");i(this,"player");i(this,"game2D");this.game2D=new d,this.balls=Qe(5e3,this.game2D.env),this.player=new M(100,100,20,"#eebe0a");let t={friction:je(),spring:Xe()};this.game2D.tick(({context:e,controller:s})=>{this.player.set(s.x,s.y),this.player.render(e.ctx),this.balls.forEach(r=>{r.think(this.player,{...this.game2D.env,...t}),r.render(e.ctx)})})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.balls=void 0,this.player=void 0}}i(mt,"id","Balls2");function Qe(o,t){let e=[],s=t.width/10,r=t.height/10;for(let n=0;n<o;n++){let h=s+Math.random()*(t.width-s*2),a=r+Math.random()*(t.height-r*2);e.push(new M(h,a,h>t.width/2?2:3,h>t.width/2?"#00bcd4":"#bdb76b"))}return e}function Xe(){let o=0,t=0;return{vx(e,s,r){let n=s>r.width/2?o:t;return-(e-s)*n},vy(e,s,r){let n=s>r.width/2?o:t;return-(e-s)*n}}}function je(){let o=.99,t=.4;return{vx(e,s,r){return s>r.width/2?o:t},vy(e,s,r){return s>r.width/2?o:t}}}class He{constructor(t){i(this,"x",0);i(this,"y",0);i(this,"pressed",!1);i(this,"rect");i(this,"canvas");i(this,"touch_start",()=>{this.pressed=!0});i(this,"touch_end",()=>{this.pressed=!1,this.x=0,this.y=0});i(this,"touch_move",t=>{let e=0,s=0,r=t.touches[0];r.pageX||r.pageY?(e=r.pageX,s=r.pageY):(e=r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s=r.clientY+document.body.scrollTop+document.documentElement.scrollTop),e-=this.canvas.offsetLeft,s-=this.canvas.offsetTop,this.x=e,this.y=s});this.canvas=t,t.addEventListener("touchstart",this.touch_start,!1),t.addEventListener("touchmove",this.touch_move,!1),t.addEventListener("touchend",this.touch_end,!1)}destroy(){this.canvas.removeEventListener("touchstart",this.touch_start,!1),this.canvas.removeEventListener("touchmove",this.touch_move,!1),this.canvas.removeEventListener("touchend",this.touch_end,!1)}}class pt{constructor(){i(this,"balls");i(this,"player");i(this,"game2D");this.game2D=new d({controller:He});const t=this.game2D.env;this.balls=Ve(2e3,t),this.player=new M(t.width/2,t.height/2,30,"#eebe0a");let e={friction:Ge(.99),spring:ze(0)};this.game2D.tick(({context:s,controller:r})=>{r.pressed&&this.player.set(r.x,r.y),this.player.render(s.ctx),this.balls.forEach(n=>{n.think(this.player,e),n.render(s.ctx)})})}destroy(){this.game2D.destroy(),this.balls=void 0,this.game2D=void 0,this.player=void 0}}i(pt,"id","BallTouch");function Ve(o,t){let e=[],s=t.width/20,r=t.height/20;for(let n=0;n<o;n++){let h=s+Math.random()*(t.width-s*2),a=r+Math.random()*(t.height-r*2);e.push(new M(h,a,2,"#00bcd4"))}return e}function ze(o){return{vx(t,e){return-(t-e)*o},vy(t,e){return-(t-e)*o}}}function Ge(o){return{vx(){return o},vy(){return o}}}class wt{constructor(){i(this,"balls");i(this,"player");i(this,"game2D");this.game2D=new d,this.balls=$e().map(e=>(e.set(100+Math.random()*500,100+Math.random()*400),e)),this.player=new M(100,100,20,"#eebe0a");let t={friction:ns(.8),spring:os(.007)};this.game2D.tick(({context:e,controller:s})=>{this.player.set(s.x,s.y),this.player.render(e.ctx),this.balls.forEach(r=>{r.think(this.player,t),r.render(e.ctx)})})}destroy(){this.game2D.destroy(),this.balls=void 0,this.game2D=void 0,this.player=void 0}}i(wt,"id","Pidor");const Ze="#ff0000",Je=2,m=(o,t,e=Ze)=>new M(o,t,Je,e),c=20;function $e(){return[...Ke(),...qe(),...xe(),...ts(),...es(),...ss(),...is()]}function Ke(){return[...w(200,250,c,o=>m(o,100)),...w(100,150,c,o=>m(225,o))]}function qe(){return[...w(100,150,c,o=>m(270,o)),...Y(270,135,c),...w(100,150,c,o=>m(310,o))]}function xe(){return[...w(170,220,c,o=>m(150,o)),...w(150,170,c,o=>m(o,170)),...w(170,220,c,o=>m(170,o))]}function ts(){return[...w(170,220,c,o=>m(190,o)),...rs(190,220,c),...w(170,220,c,o=>m(230,o))]}function es(){return[...w(170,220,c,o=>m(260,o)),...Y(260,195,c,25)]}function ss(){return[...Y(325,185,c,15,1),...w(180,210,c,o=>m(310,o)),...w(180,210,c,o=>m(340,o)),...Y(325,205,c,15,2)]}function is(){return[...w(170,220,c,o=>m(370,o)),...Y(370,185,c,15,1.5)]}function Y(o,t,e,s=15,r=1.5){let n=[];for(var h=0;h<=e;h++)n.push(m(o+s*Math.cos(Math.PI*h/e+Math.PI*r),t+s*Math.sin(Math.PI*h/e+Math.PI*r)));return n}function rs(o,t,e){let s=[];for(var r=0;r<e;r++)s.push(m(o+2*r,t-2.5*r));return s}function w(o,t,e,s){let r=t-o,n=Math.trunc(r/(e-1)),h=[];for(let a=o;a<=t;a+=n)h.push(s(a));return h}function os(o){return{vx(t,e){return-(t-e)*o},vy(t,e){return-(t-e)*o}}}function ns(o){return{vx(){return o},vy(){return o}}}class At{constructor(){i(this,"game2D");this.game2D=new d;let t=new hs(150,150),e=new M(100,100,20,"#eebe0a");this.game2D.tick(({context:s,controller:r})=>{e.set(r.x,r.y),e.render(s.ctx),t.ratateTo(r),t.draw(s.ctx)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(At,"id","Arrow");let hs=class{constructor(t=0,e=0,s="#ffff00"){i(this,"x");i(this,"y");i(this,"color","");i(this,"rotation",0);this.x=t,this.y=e,this.color=s,this.rotation=0}ratateTo({x:t,y:e}){let s=t-this.x,r=e-this.y;this.rotation=Math.atan2(r,s)}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.lineWidth=2,t.fillStyle=this.color,t.beginPath(),t.moveTo(-50,-25),t.lineTo(0,-25),t.lineTo(0,-50),t.lineTo(50,0),t.lineTo(0,50),t.lineTo(0,25),t.lineTo(-50,25),t.lineTo(-50,-25),t.closePath(),t.fill(),t.stroke(),t.restore()}};class vt{constructor(){i(this,"game2D");i(this,"rect_1");i(this,"rect_2");this.game2D=new d;const t=this.game2D.env;this.rect_1={x:Math.random()*t.width,y:Math.random()*t.height},this.rect_2={x:Math.random()*t.width,y:Math.random()*t.height},this.game2D.tick(({context:e,controller:s})=>{e.ctx.fillStyle="#000000",e.ctx.fillRect(this.rect_1.x-2,this.rect_1.y-2,4,4),e.ctx.fillStyle="#ff0000",e.ctx.fillRect(this.rect_2.x-2,this.rect_2.y-2,4,4),e.ctx.font="30px Arial",e.ctx.fillText(`points distance: ${nt(this.rect_1,this.rect_2)}`,10,100),e.ctx.fillText(`mouse distance: ${nt(s,this.rect_2)}`,10,130),e.ctx.beginPath(),e.ctx.moveTo(this.rect_2.x,this.rect_2.y),e.ctx.lineTo(s.x,s.y),e.ctx.closePath(),e.ctx.stroke()})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.rect_1=void 0,this.rect_2=void 0}}i(vt,"id","Distance");function nt(o,t){let e=o.x-t.x,s=o.y-t.y;return Math.sqrt(e*e+s*s).toFixed(2)}class _{constructor(t=100,e=100,s=20,r="#ff0000"){i(this,"x",200);i(this,"y",100);i(this,"scaleX",1);i(this,"scaleY",1);i(this,"lineWidth",1);i(this,"color","");i(this,"radius",10);i(this,"rotation",0);this.x=t,this.y=e,this.color=r,this.radius=s}ratateTo({x:t,y:e}){let s=t-this.x,r=e-this.y;this.rotation=Math.atan2(r,s)}render(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY),t.lineWidth=this.lineWidth,t.fillStyle=this.color,t.beginPath(),t.arc(0,0,this.radius,0,Math.PI*2,!0),t.closePath(),t.fill(),this.lineWidth>0&&t.stroke(),t.restore()}}class bt{constructor(){i(this,"game2D");this.game2D=new d;const t=this.game2D.env;let e={angle:0,centrY:200,range:50,xspeed:3,yspeed:.05},s={angle:0,centryScale:1,range:.5,speed:.1},r={angleX:0,angleY:0,range:150,centerX:0,centerY:0,xspeed:.07,yspeed:.11},n=new _(0,0),h=new _(t.width/2,t.height/2,30,"#00ff00"),a=new _(t.width/2,t.height/2,30,"#0000ff");r.centerX=t.width/2,r.centerY=t.height/2,this.game2D.tick(({context:l})=>{e.angle+=e.yspeed,n.x+=e.xspeed,n.y=e.centrY/2+Math.sin(e.angle)*e.range,n.x>t.width+n.radius&&(n.x=-n.radius,e.range+=1),h.scaleX=s.centryScale+Math.sin(s.angle)*s.range,h.scaleY=s.centryScale+Math.sin(s.angle)*s.range,s.angle+=s.speed,a.x=r.centerX+Math.sin(r.angleX)*r.range,a.y=r.centerY+Math.sin(r.angleY)*r.range,r.angleX+=r.xspeed,r.angleY+=r.yspeed,r.range+=.01,h.render(l.ctx),n.render(l.ctx),a.render(l.ctx)})}destroy(){this.game2D.destroy()}}i(bt,"id","Liner");class Tt{constructor(){i(this,"game2D");i(this,"ball");i(this,"ball_oval");this.game2D=new d;const t=this.game2D.env;this.ball=new _(200,200,40,"#11bbff"),this.ball_oval=new _(200,200,20,"#00ffff");let e=t.width/2,s=t.height/2,r=0,n=100,h=.02;this.game2D.tick(({context:a})=>{let l=a.ctx;r+=h,this.ball.x=e+Math.sin(r)*n,this.ball.y=s+Math.cos(r)*n,this.ball_oval.x=this.ball.x+Math.sin(r*2)*100,this.ball_oval.y=this.ball.y+Math.cos(r*2)*40,this.ball.y-this.ball_oval.y>0?(this.ball_oval.render(l),this.ball.render(l)):(this.ball.render(l),this.ball_oval.render(l))})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(Tt,"id","Circle");class _t{constructor(){i(this,"game2D");this.game2D=new d;const t=this.game2D.env;let e=40,s=0,r=new _(t.width/2,t.height/2,e,"#ffee00"),n=new _(t.width/2,t.height/2,e,"#00ff00"),h=new _(t.width/2,t.height/2,e,"#0000ff"),a=new _(t.width/2,t.height/2,e,"#f0f0f0"),l=new _(t.width/2,t.height/2,e);this.game2D.tick(({context:f})=>{let y=f.ctx;s+=.03;let A=t.width/2,v=t.height/2;r.x=A+Math.sin(s*.2)*(A-e),n.y=v+Math.sin(s*.3)*(v-e),h.y=v+Math.sin(s*.4)*(v-e),h.x=A+Math.sin(s)*(A-e),a.y=v+Math.sin(s*.5)*(v-e),a.x=A+Math.cos(s*.2)*(A-e),l.x=A+Math.sin(s*2)*(A-e),r.render(y),n.render(y),h.render(y),a.render(y),l.render(y)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(_t,"id","Waves");class kt{constructor(){i(this,"pencil");i(this,"game2D");this.game2D=new d;const t=this.game2D.env;this.pencil=new as(t),this.game2D.tick(({context:e,controller:s})=>{this.pencil.draw(e.ctx,s)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}i(kt,"id","Curves");let as=class{constructor(t){i(this,"points",[]);i(this,"point",{x0:0,y0:0,x1:0,y1:0});this.points=L(20,()=>({x:Math.random()*t.width,y:Math.random()*t.height})),this.point={x0:Math.random()*t.width,y0:Math.random()*t.height,x1:Math.random()*t.width,y1:Math.random()*t.height}}draw(t,e){t.beginPath(),t.strokeStyle="#00ff00",t.lineWidth=10,t.lineCap="butt",t.lineJoin="round",t.miterLimit=20,t.moveTo(this.point.x0,this.point.y0),t.quadraticCurveTo(e.x,e.y,this.point.x1,this.point.y1),t.stroke(),t.beginPath(),t.strokeStyle="#ff0000",t.lineWidth=5,t.lineCap="butt",t.lineJoin="round",t.miterLimit=10,t.moveTo(this.points[0].x,this.points[0].y);for(let s=1;s<this.points.length-1;s+=2)t.quadraticCurveTo(this.points[s].x,this.points[s].y,this.points[s+1].x,this.points[s+1].y);t.stroke()}};class Mt{constructor(){i(this,"context2d");let t={x:100,y:100},e={x:200,y:200},s={x:350,y:150,r:0},r={x:350,y:150,r:50};const n=document.body;this.context2d=new dt(n.offsetWidth,n.offsetHeight);const h=this.context2d.ctx;let a=h.createLinearGradient(t.x,t.y,e.x,e.y);a.addColorStop(0,"#ffffff"),a.addColorStop(.5,"#0000ff"),a.addColorStop(1,"#ff0000"),h.fillStyle=a,h.fillRect(100,100,200,200);let l=h.createRadialGradient(s.x,s.y,s.r,r.x,r.y,r.r);l.addColorStop(0,"#000000"),l.addColorStop(1,"rgba(0, 0, 0, 0)"),h.fillStyle=l,h.fillRect(300,100,100,100)}destroy(){this.context2d.destroy(),this.context2d=void 0}}i(Mt,"id","Gradient");const ls="/js-animations/assets/floor_tiles-Q5m0QA2F.png",ds="/js-animations/assets/video-DKY2MWlb.mov",us="/js-animations/assets/vovka-C-gnN3YF.png";class Pt{constructor(){i(this,"game2D");this.game2D=new d,new ct([new D(us),new D(ls),new se(ds,640,360)]).load().then(([e,s,r])=>{this.game2D.tick(({context:n})=>{n.ctx.drawImage(s.data,230,20,80,140,200,130,100,120),n.ctx.drawImage(e.data,80,0,135,135,90,90,65,65),n.ctx.drawImage(r.data,300,150,100,100)})})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(Pt,"id","Images");class Dt{constructor(){i(this,"pencil");i(this,"game2D");this.game2D=new d,this.pencil=new cs,this.game2D.tick(({context:t,controller:e})=>{this.pencil.draw(t.ctx,e)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}i(Dt,"id","Line");let cs=class{constructor(){i(this,"prevPos")}draw(t,e){I(this.prevPos)&&e.pressed?(t.strokeStyle="#ff0000",t.lineWidth=2,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.beginPath(),t.moveTo(e.x,e.y),this.prevPos={x:e.x,y:e.y}):!I(this.prevPos)&&e.pressed?(t.lineTo(e.x,e.y),this.prevPos={x:e.x,y:e.y},t.stroke()):!I(this.prevPos)&&!e.pressed&&(this.prevPos=null)}};class Et{constructor(){i(this,"pencil");i(this,"game2D");this.game2D=new d;const t=this.game2D.env;this.pencil=new fs(t),this.game2D.tick(({context:e})=>{this.pencil.draw(e.ctx)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}i(Et,"id","MultiCurves");let fs=class{constructor(t){i(this,"count",10);i(this,"points",[]);i(this,"ctrlPoint",{});this.points=L(this.count,()=>({x:Math.random()*t.width,y:Math.random()*t.height}))}draw(t){t.beginPath(),t.strokeStyle="#ff0000",t.lineWidth=5,t.lineCap="butt",t.lineJoin="round",t.miterLimit=10;let e=(this.points[0].x+this.points[this.count-1].x)/2,s=(this.points[0].y+this.points[this.count-1].y)/2;t.moveTo(e,s);let r;for(r=1;r<this.points.length-2;r++){let n=(this.points[r].x+this.points[r+1].x)/2,h=(this.points[r].y+this.points[r+1].y)/2;t.quadraticCurveTo(this.points[r].x,this.points[r].y,n,h)}t.quadraticCurveTo(this.points[r].x,this.points[r].y,e,s),t.stroke(),t.beginPath(),t.strokeStyle="#0000ff",t.lineWidth=3,t.arc(100,200,40,0,Math.PI*2,!0),t.closePath(),t.stroke(),t.beginPath(),t.strokeStyle="#00ff44",t.lineWidth=5,t.moveTo(200,200),t.arcTo(200,50,150,200,20),t.stroke()}};class ys{static colorToRGB(t,e=1){let s;typeof t=="string"&&t[0]==="#"&&(s=parseInt(t.slice(1),16));var r=s>>16&255,n=s>>8&255,h=s&255,a=e<0?0:e>1?1:e;return a===1?`rgb(${r},${n},${h})`:`rgb(${r},${n},${h},${a})`}static parse(t,e=!1){return e===!0?typeof t=="number"?t|0:(typeof t=="string"&&t[0]==="#"&&(t=t.slice(1)),parseInt(t,16)):(typeof t=="number"&&(t="#"+("00000"+(t|0).toString(16)).substr(-6)),t)}}class St{constructor(){i(this,"game2D");i(this,"pencil");this.game2D=new d;const t=this.game2D.env,e=this.game2D.context2d.ctx.getImageData(0,0,t.width,t.height);this.pencil=new gs,this.game2D.tick(({context:s,controller:r})=>{this.pencil.draw(s.ctx,r,e)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}i(St,"id","pixel");let gs=class{constructor(){i(this,"prevPos");i(this,"brush_size",25);i(this,"brush_density",50);i(this,"brush_color",0)}draw(t,e,s){let r=s.data;if(I(this.prevPos)&&e.pressed)this.brush_color=ys.parse(Math.random()*16777215,!0),this.prevPos={x:e.x,y:e.y};else if(!I(this.prevPos)&&e.pressed){for(let n=0;n<this.brush_density;n++){let h=Math.random()*Math.PI*2,a=Math.random()*this.brush_size,l=e.x+Math.cos(h)*a|0,f=e.y+Math.sin(h)*a|0,y=(l+f*s.width)*4;r[y]=this.brush_color>>16&255,r[y+1]=this.brush_color>>8&255,r[y+2]=this.brush_color&255,r[y+3]=255}t.putImageData(s,0,0),this.prevPos={x:e.x,y:e.y}}else!I(this.prevPos)&&!e.pressed&&(this.prevPos=null)}};class Ct{constructor(){i(this,"pencil");i(this,"game2D");this.game2D=new d;const t=this.game2D.env;this.pencil=new ms(t),this.game2D.tick(({context:e})=>{this.pencil.draw(e.ctx)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.pencil=void 0}}i(Ct,"id","Shapes");class ms{constructor(t){i(this,"count",10);i(this,"points",[]);i(this,"ctrlPoint",{});this.points=L(this.count,()=>({x:Math.random()*t.width,y:Math.random()*t.height}))}draw(t){t.beginPath(),t.fillStyle="#ff0000";let e=(this.points[0].x+this.points[this.count-1].x)/2,s=(this.points[0].y+this.points[this.count-1].y)/2;t.moveTo(e,s);let r;for(r=1;r<this.points.length-2;r++){let n=(this.points[r].x+this.points[r+1].x)/2,h=(this.points[r].y+this.points[r+1].y)/2;t.quadraticCurveTo(this.points[r].x,this.points[r].y,n,h)}t.quadraticCurveTo(this.points[r].x,this.points[r].y,e,s),t.fill(),t.beginPath(),t.fillStyle="#00ff44",t.moveTo(100,100),t.arcTo(200,50,150,200,20),t.fill()}}class It{constructor(){i(this,"game2D");this.game2D=new d;const t=this.game2D.env;let e=new ps(t.width/2,t.height/2),s=0;this.game2D.tick(({context:r,keyboard:n})=>{n.pressed("ArrowLeft")&&(e.rotation-=2*Math.PI/180),n.pressed("ArrowRight")&&(e.rotation+=2*Math.PI/180),n.pressed("ArrowUp")&&s<4&&(s+=.2),n.pressed("ArrowDown")&&(s-=.2),s<0?s=0:s-=.05;let h=Math.cos(e.rotation)*s,a=Math.sin(e.rotation)*s;e.x+=h,e.y+=a,e.draw(r.ctx)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(It,"id","acceleration");let ps=class{constructor(t=0,e=0,s="#ffff00"){i(this,"x");i(this,"y");i(this,"color","");i(this,"rotation",0);this.x=t,this.y=e,this.color=s,this.rotation=0}ratateTo({x:t,y:e}){let s=t-this.x,r=e-this.y;this.rotation=Math.atan2(r,s)}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.lineWidth=2,t.fillStyle=this.color,t.strokeStyle="#000000",t.beginPath(),t.moveTo(-50,-25),t.lineTo(0,-25),t.lineTo(0,-50),t.lineTo(50,0),t.lineTo(0,50),t.lineTo(0,25),t.lineTo(-50,25),t.lineTo(-50,-25),t.closePath(),t.fill(),t.stroke(),t.restore()}};class ws{constructor(t=0,e=0,s="#ffff00"){i(this,"x");i(this,"y");i(this,"color","");i(this,"rotation",0);this.x=t,this.y=e,this.color=s,this.rotation=0}ratateTo({x:t,y:e}){let s=t-this.x,r=e-this.y;this.rotation=Math.atan2(r,s)}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.lineWidth=2,t.fillStyle=this.color,t.strokeStyle="#000000",t.beginPath(),t.moveTo(-50,-25),t.lineTo(0,-25),t.lineTo(0,-50),t.lineTo(50,0),t.lineTo(0,50),t.lineTo(0,25),t.lineTo(-50,25),t.lineTo(-50,-25),t.closePath(),t.fill(),t.stroke(),t.restore()}}class Lt{constructor(){i(this,"game2D");let t=.05,e=0,s=0;this.game2D=new d;const r=this.game2D.env;let n=new ws(r.width/2,r.height/2);this.game2D.tick(({context:h,controller:a})=>{let l=a.x-n.x,f=a.y-n.y,y=Math.atan2(f,l),A=Math.cos(y)*t,v=Math.sin(y)*t;n.rotation=y,e+=A,s+=v,n.x+=e,n.y+=s,n.draw(h.ctx)})}destroy(){this.game2D.destroy(),this.game2D=void 0}}i(Lt,"id","mouse1");class Bt{constructor(){i(this,"game2D");i(this,"balls");i(this,"screen");this.game2D=new d,this.screen=ht(this.game2D.env);const t=10,e=30,s=3,r=.9;this.balls=L(e,()=>new Z(k(t+this.screen.x,this.screen.right-t),k(t+this.screen.y,this.screen.bottom-t),t,"#ff6600",new z(k(-s,s),k(-s,s)),new bs)),this.game2D.tick(({context:n})=>{var h;(h=this.screen)==null||h.render(n.ctx),this.balls.forEach(a=>{As(a,this.screen)&&(a.behavior.dx=-r*a.behavior.dx,a.behavior.dy=r*a.behavior.dy),vs(a,this.screen)&&(a.behavior.dx=r*a.behavior.dx,a.behavior.dy=-r*a.behavior.dy),a.think(),a.render(n.ctx)})}),this.game2D.onResize(()=>{this.game2D&&(this.screen=ht(this.game2D.env))})}destroy(){var t;(t=this.game2D)==null||t.destroy(),this.game2D=void 0,this.balls=void 0,this.screen=void 0}}i(Bt,"id","Boundaries");function ht(o){let t=o.width*5/100,e=o.height*20/100;return new E(t,e,o.width-2*t,o.height-2*e,"#00ffff")}function As(o,t){return t.x>o.x-o.radius&&o.behavior.dx<0||t.right<o.x+o.radius&&o.behavior.dx>0}function vs(o,t){return t.y>o.y-o.radius&&o.behavior.dy<0||t.bottom<o.y+o.radius&&o.behavior.dy>0}let bs=class{render(t,{x:e,y:s,radius:r,color:n,behavior:h}){t.save(),t.beginPath(),t.arc(e,s,r,0,2*Math.PI),t.fillStyle=n,t.fill(),t.closePath(),t.restore(),t.beginPath(),t.strokeStyle="#0000ff",t.moveTo(e,s),t.lineTo(e+h.dx*100,s),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(e,s),t.lineTo(e,s+h.dy*100),t.strokeStyle="#f00fff",t.closePath(),t.stroke(),t.beginPath(),t.moveTo(e,s),t.lineTo(e+h.dx*100,s+h.dy*100),t.strokeStyle="#ff0000",t.closePath(),t.stroke()}};const Ts=50,W=10;class Ot{constructor(){i(this,"game2D");i(this,"rect");i(this,"balls",[]);this.game2D=new d;const t=this.game2D.env;this.rect=ks(t),this.balls=Ms(this.rect),this.game2D.tick(({context:e})=>{this.balls=_s(this.balls,this.rect),this.balls.forEach(s=>{s.think(),s.render(e.ctx)}),this.rect.render(e.ctx)})}destroy(){this.game2D.destroy(),this.game2D=void 0,this.rect=void 0,this.balls=[]}}i(Ot,"id","removal");function _s(o,t){return o.filter(e=>!(e.x-e.radius>t.right||e.x+e.radius<t.x||e.y-e.radius>t.bottom||e.y+e.radius<t.y))}function ks(o){return new E(100,100,o.width-200,o.height-200,"#00ff00")}function Ms(o){return L(Ts,()=>new Z(W+o.x+Math.random()*(o.right-2*W),W+o.y+Math.random()*(o.bottom-2*W),W,"#ff6600",new z(Math.random()*2-1,Math.random()*2-1)))}class Rt{constructor(){i(this,"game2D");i(this,"ball");this.game2D=new d,this.ball=new Z(200,300,40,"ff6600",new G,new Ps);let t=0,e=0,s=!1;this.game2D.tick(({context:r,controller:n})=>{this.ball.color=j.warning,n.pressed||(t=this.ball.x-n.x,e=this.ball.y-n.y,s=!1),this.ball.isInside(n.x,n.y)&&(n.pressed&&(s=!0),this.ball.color=j.positive),s&&(this.ball.color=j.positive,this.ball.x=n.x+t,this.ball.y=n.y+e),this.ball.think(),this.ball.render(r.ctx)})}destroy(){var t;(t=this.game2D)==null||t.destroy(),this.game2D=void 0,this.ball=void 0}}i(Rt,"id","Pressing");class Ps{render(t,{x:e,y:s,radius:r,color:n,behavior:h}){t.save(),t.beginPath(),t.arc(e,s,r,0,2*Math.PI),t.fillStyle=n,t.fill(),t.closePath(),t.restore(),t.beginPath(),t.strokeStyle="#0000ff",t.moveTo(e,s),t.lineTo(e+h.dx*100,s),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(e,s),t.lineTo(e,s+h.dy*100),t.strokeStyle="#f00fff",t.closePath(),t.stroke(),t.beginPath(),t.moveTo(e,s),t.lineTo(e+h.dx*100,s+h.dy*100),t.strokeStyle="#ff0000",t.closePath(),t.stroke()}}const Ds=new at("simple_examples",[Rt,Bt,Ot,Lt,It,St,Pt,Mt,Ct,Et,kt,Dt,vt,Tt,bt,_t,At,gt,mt,pt,wt]);new Xt([Ye,Ds]);
